(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{375:function(s,n,a){"use strict";a.r(n);var e=a(10),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"ubuntu-建置-django-開發作業環境指引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-建置-django-開發作業環境指引"}},[s._v("#")]),s._v(" Ubuntu 建置 Django 開發作業環境指引")]),s._v(" "),n("h2",{attrs:{id:"摘要"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#摘要"}},[s._v("#")]),s._v(" 摘要")]),s._v(" "),n("p",[s._v("在 VirtualBox VM 執行安裝作業，使 VM 成為 Django App 之「作業平台」。")]),s._v(" "),n("ul",[n("li",[s._v("安裝開發作業基礎工具")]),s._v(" "),n("li",[s._v("安裝 Node.js 作業環境")]),s._v(" "),n("li",[s._v("安裝 Python 作業環境")]),s._v(" "),n("li",[s._v("安裝編輯器")]),s._v(" "),n("li",[s._v("安裝 nginx 服務")]),s._v(" "),n("li",[s._v("安裝 Django App 原始碼")]),s._v(" "),n("li",[s._v("安裝 uWSGI 服務")])]),s._v(" "),n("h2",{attrs:{id:"安裝開發作業基礎工具"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安裝開發作業基礎工具"}},[s._v("#")]),s._v(" 安裝開發作業基礎工具")]),s._v(" "),n("ol",[n("li",[s._v("安裝 git 版本管理套件。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo apt install git\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("安裝檔案下載工具。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo apt install curl\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"安裝-node-js-作業環境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安裝-node-js-作業環境"}},[s._v("#")]),s._v(" 安裝 Node.js 作業環境")]),s._v(" "),n("h3",{attrs:{id:"安裝-node-與-npm-套件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安裝-node-與-npm-套件"}},[s._v("#")]),s._v(" 安裝 node 與 npm 套件")]),s._v(" "),n("ol",[n("li",[s._v("安裝 n 套件管理器")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd\ncurl -L https://git.io/n-install | bash\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("或")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("brew install n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("在 Bash Shell 設定檔，設定 PATH 環境變數。")])]),s._v(" "),n("p",[s._v("🔖 ~/.bashrc")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('#export N_PREFIX="$HOME/n"; [[ :$PATH: == *":$N_PREFIX/bin:"* ]] || PATH+=":$N_PREFIX/bin"  # Added by n-install (see http://git.io/n-install-repo).\nexport N_PREFIX="$HOME/n";\nexport PATH="$N_PREFIX/bin:$PATH"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("重啟 Bash Shell 。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("source ~/.bashrc\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("透過 n 套件管理器，安裝 node 與 npm 套件。")])]),s._v(" "),n("ul",[n("li",[s._v("最新版")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("n latest\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("最近 LTS 版")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("n lts\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"安裝套件管理器-yarn"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安裝套件管理器-yarn"}},[s._v("#")]),s._v(" 安裝套件管理器：yarn")]),s._v(" "),n("p",[s._v("npm 本身即是 Node 之「套件管理器」。何以要再安裝 yarn ，主要原因是有些套件的安裝\n偏好使用 yarn 所致。")]),s._v(" "),n("ol",[n("li",[s._v("安裝")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo npm i -g yarn\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("驗證")])]),s._v(" "),n("p",[s._v("yarn 安裝位置： /usr/local/bin/yarn")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("which yarn\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"安裝-python-作業環境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安裝-python-作業環境"}},[s._v("#")]),s._v(" 安裝 Python 作業環境")]),s._v(" "),n("h3",{attrs:{id:"ubuntu-python-特性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-python-特性"}},[s._v("#")]),s._v(" Ubuntu Python 特性")]),s._v(" "),n("ol",[n("li",[s._v("Ubuntu 20.04 作業系統，預設安裝 "),n("strong",[s._v("Python 3.8.5")]),s._v(" ；但無 Python 2.X 。")])]),s._v(" "),n("p",[s._v("作業系統預設的安裝目錄路徑："),n("strong",[n("code",[s._v("/usr/bin/")])]),s._v(" 。")]),s._v(" "),n("p",[s._v("📺 使用指令 python, pyton3 觀察作業系統的預設：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('alanjui@MBP2018:~$ ssh 192.168.66.220\nWelcome to Ubuntu 20.04.2 LTS (GNU/Linux 5.8.0-48-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n現在可以安裝 0 項更新。\n其中有 0 項更新為安全性更新。\n\nYour Hardware Enablement Stack (HWE) is supported until April 2025.\nLast login: Sat Apr  3 11:28:46 2021 from 192.168.66.21\nalanjui@VB02-Ubuntu-2004:~$ which python\nalanjui@VB02-Ubuntu-2004:~$ which python3\n/usr/bin/python3\nalanjui@VB02-Ubuntu-2004:~$ python3\nPython 3.8.5 (default, Jan 27 2021, 15:41:15)\n[GCC 9.3.0] on linux\nType "help", "copyright", "credits" or "license" for more information.\n>>>\nalanjui@VB02-Ubuntu-2004:~$\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[s._v("📺 觀察作業系統預設的「安裝目錄路徑」：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("alanjui@VB02-Ubuntu-2004:~$ ll /usr/bin/python*\nlrwxrwxrwx 1 root root       9  3月 13  2020 /usr/bin/python2 -> python2.7*\n-rwxr-xr-x 1 root root 3674216  3月  8 21:02 /usr/bin/python2.7*\nlrwxrwxrwx 1 root root       9  3月 24 21:24 /usr/bin/python3 -> python3.8*\n-rwxr-xr-x 1 root root 5486384  1月 27 23:41 /usr/bin/python3.8*\nlrwxrwxrwx 1 root root      33  1月 27 23:41 /usr/bin/python3.8-config -> x86_64-linux-gnu-python3.8-config*\nlrwxrwxrwx 1 root root      16  3月 13  2020 /usr/bin/python3-config -> python3.8-config*\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("需要使用套件管理器時，得手動安裝 pip3 。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo apt install python3-pip\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("上述指令執行後，使用者即可在作業系統以 pip3 指令，安裝 Python 套件。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pip3 install [Package_Name]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("📺 若有需要可查詢 pip3 之版本編號，與其安裝目錄路徑：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("alanjui@VB02-Ubuntu-2004:~$ pip3 --version\npip 21.0.1 from /usr/local/lib/python3.8/dist-packages/pip (python 3.8)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("更新 pip3 至最新版本。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pip3 install --upgrade pip\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("【注意】： 指令最後是 pip ；而非 pip3 。自更新到最新版後，往後使用 pip 這個\nPython 套件管理器，可以改成 pip ；不一定要特別標示為 Python 3.x 版本之 pip3 。")]),s._v(" "),n("p",[s._v("📺 pip3 完成更新後，將衍生出 pip ；且 pip3 與 pip 為同一版本。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("alanjui@VB02-Ubuntu-2004:~$ ll /usr/local/lib/python3.8/dist-packages/\n總用量 52\ndrwxrwsr-x 10 root staff  4096  4月  3 01:37 ./\ndrwxrwsr-x  3 root staff  4096  4月 23  2020 ../\ndrwxr-sr-x  3 root staff  4096  3月 28 12:01 asgiref/\ndrwxr-sr-x  2 root staff  4096  3月 28 12:01 asgiref-3.3.1.dist-info/\ndrwxr-sr-x  5 root staff  4096  3月 30 20:55 pip/\ndrwxr-sr-x  2 root staff  4096  3月 30 20:55 pip-21.0.1.dist-info/\ndrwxr-sr-x  2 root staff  4096  4月  3 01:37 __pycache__/\ndrwxr-sr-x  5 root staff  4096  3月 28 12:01 sqlparse/\ndrwxr-sr-x  2 root staff  4096  3月 28 12:01 sqlparse-0.4.1.dist-info/\ndrwxr-sr-x  2 root staff  4096  4月  3 01:37 uWSGI-2.0.19.1.dist-info/\n-rw-r--r--  1 root staff 10392  4月  3 01:37 uwsgidecorators.py\n\nalanjui@VB02-Ubuntu-2004:~$ which pip3\n/usr/local/bin/pip3\n\nalanjui@VB02-Ubuntu-2004:~$ pip --version\npip 21.0.1 from /usr/local/lib/python3.8/dist-packages/pip (python 3.8)\n\nalanjui@VB02-Ubuntu-2004:~$ pip3 --version\npip 21.0.1 from /usr/local/lib/python3.8/dist-packages/pip (python 3.8)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("sudo pip install 與 pip install 的不同。")])]),s._v(" "),n("p",[s._v("sudo pip install [Package_Name] 會將 Python 套件安裝在如下目錄路徑：")]),s._v(" "),n("ul",[n("li",[s._v("套件檔： /usr/local/lib/python3.8/dies-package/[Package_Name]")]),s._v(" "),n("li",[s._v("執行檔： /usr/local/bin/[Package_Name]")])]),s._v(" "),n("p",[s._v("pip install [Package_Name] 會將套件安裝在如下目錄路徑：")]),s._v(" "),n("ul",[n("li",[s._v("套件檔： ~/.local/lib/python3.8/dies-package/[Package_Name]")]),s._v(" "),n("li",[s._v("執行檔： ~/.local/bin/[Package_Name]")])]),s._v(" "),n("h3",{attrs:{id:"安裝版本管理器-pyenv"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安裝版本管理器-pyenv"}},[s._v("#")]),s._v(" 安裝版本管理器 pyenv")]),s._v(" "),n("p",[s._v("安裝 Python 版本管理器：pyenv。")]),s._v(" "),n("ol",[n("li",[s._v("執行安裝。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("git clone https://github.com/pyenv/pyenv.git ~/.pyenv\ngit clone https://github.com/pyenv/pyenv-virtualenv.git ~/.pyenv/plugins/pyenv-virtualenv\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("設定 Shell 環境，執行 pyenv 所需「環境變數」。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim ~/.bashrc\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("🔖 ~/.bashrc:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('export PYENV_ROOT="$HOME/.pyenv"\nexport PATH="$PYENV_ROOT/bin:$PATH"\nif command -v pyenv 1>/dev/null 2>&1; then\n  eval "$(pyenv init -)"\n  eval "$(pyenv virtualenv-init -)"\nfi\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("重啟 Shell ，啟用 pyenv 。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("source ~/.bashrc\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("查驗 pyenv 安裝路徑：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("which pyenv\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"5"}},[n("li",[s._v("驗證 pyenv 已能運作。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pyenv versions\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("alanjui@VB02-Ubuntu-2004:~$ which pyenv\n/home/alanjui/.pyenv/bin/pyenv\n\nalanjui@VB02-Ubuntu-2004:~$ pyenv versions\n* system (set by /home/alanjui/.pyenv/version)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h3",{attrs:{id:"安裝指定版本-python"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安裝指定版本-python"}},[s._v("#")]),s._v(" 安裝指定版本 Python")]),s._v(" "),n("p",[s._v("透過 pyenv 指令，安裝指定版本之 Python 直譯器。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pyenv install [Version_No]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("📺 安裝 Python v3.9.1")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pyenv install 3.9.1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"設定作業系統預設-python"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#設定作業系統預設-python"}},[s._v("#")]),s._v(" 設定作業系統預設 Python")]),s._v(" "),n("p",[s._v("將某版本 Python 直譯器，設定成作業系統的「預設 Python 直譯器」。")]),s._v(" "),n("ol",[n("li",[s._v("使用 pyenv global 指令，指派作業系統層級之「預設 Python」。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pyenv global [Version_No]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("使用 pyenv versions 指令，查詢「預設 Python」之版本編號。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pyenv versions\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("執行下列二指令，用以驗證「Python 直譯器所月嵬之版本編號」與「預設 Python」\n所見「版本編號」一致。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pyenv versions\npython\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("執行下列指令，用以驗證 Python [Version_No] 之一致性")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pyenv --version\n~/.pyenv/shims/python --version\n~/.pyenv/versions/[Version_No]/bin/python --version\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("📺 指定「作業系統」的「預設」為 pyenv 的預設： pyenv")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("alanjui@VB02-Ubuntu-2004:~$ pyenv global system\nalanjui@VB02-Ubuntu-2004:~$ pyenv versions\n* system (set by /home/alanjui/.pyenv/version)\n  3.8.5\n  3.8.5/envs/mysite.ccc.tw.local\n  3.9.1\n  3.9.1/envs/venv-3.9.1\n  mysite.ccc.tw.local\n  venv-3.9.1\nalanjui@VB02-Ubuntu-2004:~$ pyenv which python\npyenv: python: command not found\n\nThe `python' command exists in these Python versions:\n  3.8.5\n  3.8.5/envs/mysite.ccc.tw.local\n  3.9.1\n  3.9.1/envs/venv-3.9.1\n  mysite.ccc.tw.local\n  venv-3.9.1\n\nNote: See 'pyenv help global' for tips on allowing both\n      python2 and python3 to be found.\n\nalanjui@VB02-Ubuntu-2004:~$ python3 -V\nPython 3.8.5\n\nalanjui@VB02-Ubuntu-2004:~$ echo $PATH\n/home/alanjui/.pyenv/plugins/pyenv-virtualenv/shims:/home/alanjui/.pyenv/shims:/home/alanjui/.pyenv/bin:/home/alanjui/n/bin:/home/alanjui/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/alanjui/n/bin\n\nalanjui@VB02-Ubuntu-2004:~$ which python3\n/home/alanjui/.pyenv/shims/python3\n\nalanjui@VB02-Ubuntu-2004:~$ ~/.pyenv/shims/python3 -V\nPython 3.8.5\n\nalanjui@VB02-Ubuntu-2004:~$ pyenv which python3\n/usr/bin/python3\n\nalanjui@VB02-Ubuntu-2004:~$ /usr/bin/python3 -V\nPython 3.8.5\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br")])]),n("p",[s._v("📺 使用 pyenv which [Python_Package] ，可確認將執行的 Python 套件，來自那個\n「目錄路徑」。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("alanjui@VB02-Ubuntu-2004:~$ pyenv which pip3\n/usr/local/bin/pip3\n\nalanjui@VB02-Ubuntu-2004:~$ pyenv which pip\n/usr/local/bin/pip\n\nalanjui@VB02-Ubuntu-2004:~$ pyenv which uwsgi\n/usr/local/bin/uwsgi\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://files.realpython.com/media/pyenv-pyramid.d2f35a19ded9.png",alt:""}})]),s._v(" "),n("h2",{attrs:{id:"安裝-vim-編輯器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安裝-vim-編輯器"}},[s._v("#")]),s._v(" 安裝 Vim 編輯器")]),s._v(" "),n("p",[s._v("安裝 Vim 編輯器。")]),s._v(" "),n("h3",{attrs:{id:"安裝軟體"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安裝軟體"}},[s._v("#")]),s._v(" 安裝軟體")]),s._v(" "),n("ol",[n("li",[s._v("下載原始碼。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("git clone https://github.com/vim/vim.git\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("編輯原始碼與安裝執行檔。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd vim\n./configure\nsudo apt install ncurses-dev\nmake\nsudo make install\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h3",{attrs:{id:"設定作業環境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#設定作業環境"}},[s._v("#")]),s._v(" 設定作業環境")]),s._v(" "),n("ol",[n("li",[s._v("安裝 vim 作業設定檔")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("git clone https://github.com/AlanJui/vim8.git ~/.vim\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("安裝 Vim Plugins。")])]),s._v(" "),n("p",[s._v("啟動 vim ，以便 vim 自動安裝 vim plugins 。")]),s._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[s._v("安裝 vim plugins 相依套件。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo apt install vifm\nsudo apt install fzf\nsudo apt install ripgrep\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm i -g bash-language-server\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("alanjui@VB02-Ubuntu-2004:~$ npm i -g bash-language-server\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN deprecated request-promise-native@1.0.9: request-promise-native has been deprecated because it extends the now deprecated request package, see https://github.com/request/request/issues/3142\nnpm WARN deprecated har-validator@5.1.5: this library is no longer supported\nnpm WARN deprecated left-pad@1.3.0: use String.prototype.padStart()\n/home/alanjui/n/bin/bash-language-server -> /home/alanjui/n/lib/node_modules/bash-language-server/bin/main.js\n+ bash-language-server@1.17.0\nadded 115 packages from 220 contributors in 9.368s\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"建置-django-app-開發作業環境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建置-django-app-開發作業環境"}},[s._v("#")]),s._v(" 建置 Django App 開發作業環境")]),s._v(" "),n("p",[s._v("說明如何建置可供開發 Django App 之作業環境。")]),s._v(" "),n("h3",{attrs:{id:"建置-django-app-專案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建置-django-app-專案"}},[s._v("#")]),s._v(" 建置 Django App 專案")]),s._v(" "),n("ol",[n("li",[s._v("建置 Django App 專案目錄")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd ~/workspace/django\nmkdir mysite && cd $_\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("建置及啟用虛擬環境。")])]),s._v(" "),n("ul",[n("li",[s._v("確認作業系統中，已安裝之 Python 有那些版本？")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pyenv versions\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("套用 Python 3.9.1 ，建置名稱為 venv-3.9.1 之「虛擬環境」。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pyenv virtualenv 3.9.1 venv-3.9.1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("啟動 pyenv-virtualenv「依設定自動啟用虛擬環境」功能")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pyenv local venv-3.9.1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("安裝 Django 套件。")])]),s._v(" "),n("ul",[n("li",[s._v("更新 pip 到最新版")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pip install --upgrade pip\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("或 ⋯⋯")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("~/.pyenv/versions/3.9.1/envs/venv-3.9.1/bin/python3.9 -m pip install --upgrade pip\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("安裝 Django 套件")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pip install Django\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("確認 Django 套件版本編號")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("python -m django --version\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("(venv-3.9.1) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$ python -m pip install Django\nCollecting Django\n  Using cached Django-3.1.7-py3-none-any.whl (7.8 MB)\nCollecting pytz\n  Using cached pytz-2021.1-py2.py3-none-any.whl (510 kB)\nCollecting asgiref<4,>=3.2.10\n  Using cached asgiref-3.3.1-py3-none-any.whl (19 kB)\nCollecting sqlparse>=0.2.2\n  Using cached sqlparse-0.4.1-py3-none-any.whl (42 kB)\nInstalling collected packages: sqlparse, pytz, asgiref, Django\nSuccessfully installed Django-3.1.7 asgiref-3.3.1 pytz-2021.1 sqlparse-0.4.1\n\n(venv-3.9.1) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$ python -m django --version\n3.1.7\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("建置 Django App 專案。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("django-admin startproject app_config .\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("(venv-3.9.1) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$ django-admin startproject app_config .\n\n(venv-3.9.1) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$ ll\n總用量 20\ndrwxrwxr-x 3 alanjui alanjui 4096  4月  1 14:08 ./\ndrwxrwxr-x 3 alanjui alanjui 4096  4月  1 13:16 ../\ndrwxrwxr-x 2 alanjui alanjui 4096  4月  1 14:08 app_config/\n-rwxrwxr-x 1 alanjui alanjui  666  4月  1 14:08 manage.py*\n-rw-rw-r-- 1 alanjui alanjui   11  4月  1 13:59 .python-version\n\n(venv-3.9.1) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$ tree .\n.\n├── app_config\n│   ├── asgi.py\n│   ├── __init__.py\n│   ├── settings.py\n│   ├── urls.py\n│   └── wsgi.py\n└── manage.py\n\n1 directory, 6 files\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("ol",{attrs:{start:"5"}},[n("li",[s._v("設定 Django App 能使用之 Domain Name 或 IP 。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim app_config/settings.py\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("🔖")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ALLOWED_HOSTS = [\n    'mysite.ccc.tw.local',\n    '192.168.66.220',\n    'localhost',\n    '127.0.0.1',\n]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("ol",{attrs:{start:"6"}},[n("li",[s._v("驗證 Django App 已能運作。")])]),s._v(" "),n("ul",[n("li",[s._v("啟用 Django App")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("python manage.py runserver 0.0.0.0:8000\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("使用「瀏覽器」觀察以下網址，若能看到如下畫面，即表通過驗證。")]),s._v(" "),n("ul",[n("li",[s._v("http://192.168.66.220:8000/")]),s._v(" "),n("li",[s._v("http://mysite.ccc.tw.local:8000/")])]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/django/django-app-default-home.png",alt:""}})]),s._v(" "),n("h3",{attrs:{id:"安裝-uwsgi-wsgi-介面"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安裝-uwsgi-wsgi-介面"}},[s._v("#")]),s._v(" 安裝 uWSGI （WSGI 介面）")]),s._v(" "),n("p",[s._v("WSGI: Web Server Gateway Interface ，為 HTTP Server 與 Application Server 串接\n之介面。在此指引，Application Server 即代表 Django App 應用系統。")]),s._v(" "),n("p",[s._v("以下說明，如何安裝 uwsgi 套件。在安裝結束後，進行一個簡單的測試，用以驗證 uwsgi\n能與 Python 程式串接。此 Python 測試程式，扮演「偽 Application Server」（或稱：\n假 Django App）。這個測試可用以驗證 uwsgi 的安裝正確；另外亦能用於證明 uwsgi 可\n用於串接 Python 程式碼。")]),s._v(" "),n("ol",[n("li",[s._v("安裝 python 套件：uwsgi")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pip install uwsgi\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("(venv-3.9.1) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$ pip install uwsgi\n    Collecting uwsgi\nUsing cached uWSGI-2.0.19.1.tar.gz (803 kB)\n    Using legacy 'setup.py install' for uwsgi, since package 'wheel' is not installed.\n    Installing collected packages: uwsgi\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("建立測試原始碼： wsgi_test.py 。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# wsgi_test.py\n\ndef application(env, start_response):\nstart_response('200 OK', [('Content-Type','text/html')])\nreturn [b\"Hello World\"] # python3\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("啟動 WSGI 介面程式，要求 uwsgi 監聽 Port: 9000 ，將收到之 HTTP Request，依據\n--wsgi-file 參數之設定，轉交「偽 Application Server （假 Django App）」 處理。")])]),s._v(" "),n("p",[s._v("通信路徑：\nWeb Client ⬅➡ uWSGI (Port: 9000) ⬅➡ Django App（Fake）")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("uwsgi --http :9000 --wsgi-file wsgi_test.py\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("啟動「瀏覽器」觀察網址： http://mysite.ccc.tw.local:9000/ 。若在「網頁」看到\nHello World 即代表測試通過。")])]),s._v(" "),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("(venv-3.9.1) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$ uwsgi --http :9000 --wsgi-file wsgi_test.py\n*** Starting uWSGI 2.0.19.1 (64bit) on [Thu Apr  1 15:19:16 2021] ***\ncompiled with version: 9.3.0 on 01 April 2021 07:04:38\nos: Linux-5.8.0-48-generic #54~20.04.1-Ubuntu SMP Sat Mar 20 13:40:25 UTC 2021\nnodename: VB02-Ubuntu-2004\nmachine: x86_64\nclock source: unix\ndetected number of CPU cores: 2\ncurrent working directory: /home/alanjui/workspace/django/mysite\ndetected binary path: /home/alanjui/.pyenv/versions/3.9.1/envs/venv-3.9.1/bin/uwsgi\n!!! no internal routing support, rebuild with pcre support !!!\n*** WARNING: you are running uWSGI without its master process manager ***\nyour processes number limit is 15511\nyour memory page size is 4096 bytes\ndetected max file descriptor number: 1024\nlock engine: pthread robust mutexes\nthunder lock: disabled (you can enable it with --thunder-lock)\nuWSGI http bound on :9000 fd 4\nspawned uWSGI http 1 (pid: 22278)\nuwsgi socket 0 bound to TCP address 127.0.0.1:37807 (port auto-assigned) fd 3\nPython version: 3.9.1 (default, Mar 26 2021, 13:50:53)  [GCC 9.3.0]\n*** Python threads support is disabled. You can enable it with --enable-threads ***\nPython main interpreter initialized at 0x55f5d0d131e0\nyour server socket listen backlog is limited to 100 connections\nyour mercy for graceful operations on workers is 60 seconds\nmapped 72920 bytes (71 KB) for 1 cores\n*** Operational MODE: single process ***\nWSGI app 0 (mountpoint='') ready in 0 seconds on interpreter 0x55f5d0d131e0 pid: 22236 (default app)\n*** uWSGI is running in multiple interpreter mode ***\nspawned uWSGI worker 1 (and the only) (pid: 22236, cores: 1)\n[pid: 22236|app: 0|req: 1/1] 192.168.66.21 () {38 vars in 725 bytes} [Thu Apr  1 15:19:45 2021] GET / => generated 11 bytes in 0 msecs (HTTP/1.1 200) 1 headers in 44 bytes (1 switches on core 0)\n[pid: 22236|app: 0|req: 2/2] 192.168.66.21 () {38 vars in 689 bytes} [Thu Apr  1 15:19:45 2021] GET /favicon.ico => generated 11 bytes in 0 msecs (HTTP/1.1 200) 1 headers in 44 bytes (1 switches on core 0)\n^C(venv-3.9.1) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br")])]),n("h3",{attrs:{id:"驗證-uwsgi-可串接-django"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#驗證-uwsgi-可串接-django"}},[s._v("#")]),s._v(" 驗證 uwsgi 可串接 Django")]),s._v(" "),n("p",[s._v("要求 uwsgi 監聽 Port: 8001 ，將收到之 HTTP Request ，依據 --module 參數之設定\n，將 Port: 8001 所收到之 HTTP Request 轉交 Django App 處理。")]),s._v(" "),n("p",[s._v("通信路徑：\nWeb Client ⬅➡ uWSGI (Port: 8001) ⬅➡ Django App")]),s._v(" "),n("ol",[n("li",[s._v("啟動 uwsgi 介面程式。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("uwsgi --http :8001 --module app_config.wsgi\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("(mysite.ccc.tw.local) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$ uwsgi --http :8001 --module app_config.wsgi\n*** Starting uWSGI 2.0.19.1 (64bit) on [Mon Apr  5 10:31:55 2021] ***\ncompiled with version: 9.3.0 on 02 April 2021 17:30:08\nos: Linux-5.8.0-48-generic #54~20.04.1-Ubuntu SMP Sat Mar 20 13:40:25 UTC 2021\nnodename: VB02-Ubuntu-2004\nmachine: x86_64\nclock source: unix\npcre jit disabled\ndetected number of CPU cores: 2\ncurrent working directory: /home/alanjui/workspace/django/mysite\ndetected binary path: /home/alanjui/.pyenv/versions/3.8.5/envs/mysite.ccc.tw.local/bin/uwsgi\n*** WARNING: you are running uWSGI without its master process manager ***\nyour processes number limit is 15511\nyour memory page size is 4096 bytes\ndetected max file descriptor number: 1024\nlock engine: pthread robust mutexes\nthunder lock: disabled (you can enable it with --thunder-lock)\nuWSGI http bound on :8001 fd 4\nspawned uWSGI http 1 (pid: 7888)\nuwsgi socket 0 bound to TCP address 127.0.0.1:33437 (port auto-assigned) fd 3\nPython version: 3.8.5 (default, Apr  3 2021, 00:06:18)  [GCC 9.3.0]\n*** Python threads support is disabled. You can enable it with --enable-threads ***\nPython main interpreter initialized at 0x558a67952e20\nyour server socket listen backlog is limited to 100 connections\nyour mercy for graceful operations on workers is 60 seconds\nmapped 72920 bytes (71 KB) for 1 cores\n*** Operational MODE: single process ***\nWSGI app 0 (mountpoint='') ready in 0 seconds on interpreter 0x558a67952e20 pid: 7846 (default app)\n*** uWSGI is running in multiple interpreter mode ***\nspawned uWSGI worker 1 (and the only) (pid: 7846, cores: 1)\n[pid: 7846|app: 0|req: 1/1] 192.168.66.21 () {38 vars in 726 bytes} [Mon Apr  5 02:32:12 2021] GET / => generated 16351 bytes in 18 msecs (HTTP/1.1 200) 5 headers in 153 bytes (1 switches on core 0)\nNot Found: /static/admin/css/fonts.css\n[pid: 7846|app: 0|req: 2/2] 192.168.66.21 () {38 vars in 674 bytes} [Mon Apr  5 02:32:13 2021] GET /static/admin/css/fonts.css => generated 2031 bytes in 13 msecs (HTTP/1.1 404) 5 headers in 159 bytes (1 switches on core 0)\nNot Found: /favicon.ico\n[pid: 7846|app: 0|req: 3/3] 192.168.66.21 () {38 vars in 690 bytes} [Mon Apr  5 02:32:13 2021] GET /favicon.ico => generated 1986 bytes in 4 msecs (HTTP/1.1 404) 5 headers in 159 bytes (1 switches on core 0)\n^C(mysite.ccc.tw.local) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("啟動「瀏覽器」觀察網址： http://mysite.ccc.tw.local:8001/ 。若能在「網頁」看到\n如下畫面，即表測試通過。")])]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/django/django-app-default-home.png",alt:""}})]),s._v(" "),n("h3",{attrs:{id:"安裝-nginx-http-server"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安裝-nginx-http-server"}},[s._v("#")]),s._v(" 安裝 Nginx (HTTP Server)")]),s._v(" "),n("p",[s._v("安裝 nginx 作為 HTTP Server。")]),s._v(" "),n("ol",[n("li",[s._v("安裝 nginx 套件。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo apt install nginx -y\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("驗證 nginx 服務已啟動。")])]),s._v(" "),n("ul",[n("li",[s._v("驗證服務已啟用，且能隨作業系統開機自動啟動")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("systemctl status nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("alanjui@VB02-Ubuntu-2004:~$ systemctl status nginx\n● nginx.service - A high performance web server and a reverse proxy server\nLoaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)\nActive: active (running) since Fri 2021-03-26 14:30:00 CST; 1min 10s ago\nDocs: man:nginx(8)\nMain PID: 67493 (nginx)\nTasks: 3 (limit: 4653)\nMemory: 4.8M\nCGroup: /system.slice/nginx.service\n├─67493 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;\n├─67494 nginx: worker process\n└─67495 nginx: worker process\n\n3 月 26 14:30:00 VB02-Ubuntu-2004 systemd[1]: Starting A high performance web server and a reverse proxy ser>\n3 月 26 14:30:00 VB02-Ubuntu-2004 systemd[1]: Started A high performance web server and a reverse proxy serv>\nlines 1-14/14 (END)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("驗證 nginx 的 HTTP Server 已能正常運作")])]),s._v(" "),n("p",[s._v("使用 Web 瀏覽器，瀏覽如下網址，若能正常閱讀「網頁」內容，則表 HTTP Server 已能\n正常運作。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("http://[IP_Address]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:"/assets/img/nginx/nginx_browse_test.png",alt:"ArchLinux: Django Project"}})]),s._v(" "),n("h2",{attrs:{id:"設定-nginx-uwsgi-作業環境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#設定-nginx-uwsgi-作業環境"}},[s._v("#")]),s._v(" 設定 Nginx + uWSGI 作業環境")]),s._v(" "),n("h3",{attrs:{id:"建置-nginx-虛擬網站"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建置-nginx-虛擬網站"}},[s._v("#")]),s._v(" 建置 Nginx 虛擬網站")]),s._v(" "),n("ol",[n("li",[s._v("套用 defaut 虛擬網站設定檔，建置 Django App 虛擬網站。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd ~/workspace/django/mysite\ncp /etc/nginx/sites-available/default config/mysite.ccc.tw.local.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("設定 Django App 的「Nginx 虛擬網站」作業環境。")])]),s._v(" "),n("ul",[n("li",[s._v("監聽 Port：8001")])]),s._v(" "),n("p",[s._v("Nginx 依據「虛擬網站設定」，處理接收到之 HTTP Request ，對於無法處理之 Request ，\n則依據「設定檔中最後一條處理規則：uwsgi_pass」，轉交 upstream django { ... } 其中\n的設定處理。")]),s._v(" "),n("p",[s._v("也就是 Nginx 虛擬網站，對於無法處理的 HTTP Request ，將透過 Port: 8001 轉交 WSGI\n介面的程式 uwsgi 。uwsgi 這個介面程式，將把收到的 HTTP Request ，再次轉傳給最終的\nDjango App 進行處理。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim config/mysite.ccc.tw.local.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("🔖 mysite.ccc.tw.local.conf")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("upstream django {\n    # for a web port socket\n    server 127.0.0.1:8001;\n}\n\nserver {\n    # the port mysite will be served on\n    listen 80;\n\n    server_name mysite.ccc.tw.local;\n\n    root /home/alanjui/worksapce/django/mysite;\n\n    # Finally, send all non-static, non-media requests to the Django App server.\n    location / {\n        uwsgi_pass  django;\n        include     /etc/nginx/uwsgi_params;\n    }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("停用 Default 虛擬網站")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo unlink /etc/nginx/sites-enabled/default\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("啟用 Django App 虛擬網站")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo ln -nfs ~/workspace/django/mysite/config/mysite.ccc.tw.local.conf /etc/nginx/sites-enabled\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"5"}},[n("li",[s._v("檢驗虛擬網站的設定，正確無誤。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo nginx -t\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("📺 驗證失敗")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('(venv-3.9.1) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite/config\\$ sudo nginx -t\nnginx: [emerg] unexpected "}" in /etc/nginx/sites-enabled/mysite.ccc.tw.local.conf:81\nnginx: configuration file /etc/nginx/nginx.conf test failed\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("📺 驗證通過")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("(venv-3.9.1) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite/config\\$ sudo nginx -t\nnginx: the configuration file /etc/nginx/nginx.conf syntax is ok\nnginx: configuration file /etc/nginx/nginx.conf test is successful\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ol",{attrs:{start:"6"}},[n("li",[s._v("重啟 nginx 服務。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo sytemctl restart nginx\nsystemctl status nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"7"}},[n("li",[s._v("啟動 WSGI 介面程式，要求 uwsgi 監聽 Port: 8001 ，然後透過 --module 參數的設定\n，將 Port: 8001 收到的 HTTP Request 轉交 Django App 處理。")])]),s._v(" "),n("p",[s._v("通信路徑：\nWeb Client ⬅➡ Web Server (Nginx) ⬅➡ uWSGI (Port: 8001) ⬅➡ Django App")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("uwsgi --socket :8001 --module app_config.wsgi\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("(venv-3.9.1) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$ uwsgi --http :8001 --module app_config.wsgi\n*** Starting uWSGI 2.0.19.1 (64bit) on [Fri Apr  2 10:42:19 2021] ***\ncompiled with version: 9.3.0 on 01 April 2021 07:04:38\nos: Linux-5.8.0-48-generic #54~20.04.1-Ubuntu SMP Sat Mar 20 13:40:25 UTC 2021\nnodename: VB02-Ubuntu-2004\nmachine: x86_64\nclock source: unix\ndetected number of CPU cores: 2\ncurrent working directory: /home/alanjui/workspace/django/mysite\ndetected binary path: /home/alanjui/.pyenv/versions/3.9.1/envs/venv-3.9.1/bin/uwsgi\n!!! no internal routing support, rebuild with pcre support !!!\n*** WARNING: you are running uWSGI without its master process manager ***\nyour processes number limit is 15511\nyour memory page size is 4096 bytes\ndetected max file descriptor number: 1024\nlock engine: pthread robust mutexes\nthunder lock: disabled (you can enable it with --thunder-lock)\nuWSGI http bound on :8001 fd 4\nspawned uWSGI http 1 (pid: 28180)\nuwsgi socket 0 bound to TCP address 127.0.0.1:43009 (port auto-assigned) fd 3\nPython version: 3.9.1 (default, Mar 26 2021, 13:50:53)  [GCC 9.3.0]\n*** Python threads support is disabled. You can enable it with --enable-threads ***\nPython main interpreter initialized at 0x55e0c9c181d0\nyour server socket listen backlog is limited to 100 connections\nyour mercy for graceful operations on workers is 60 seconds\nmapped 72920 bytes (71 KB) for 1 cores\n*** Operational MODE: single process ***\nWSGI app 0 (mountpoint='') ready in 0 seconds on interpreter 0x55e0c9c181d0 pid: 28138 (default app)\n*** uWSGI is running in multiple interpreter mode ***\nspawned uWSGI worker 1 (and the only) (pid: 28138, cores: 1)\n[pid: 28138|app: 0|req: 1/1] 192.168.66.21 () {40 vars in 750 bytes} [Fri Apr  2 02:42:40 2021] GET / => generated 16351 bytes in 11 msecs (HTTP/1.1 200) 5 headers in 153 bytes (1 switches on core 0)\nNot Found: /static/admin/css/fonts.css\n[pid: 28138|app: 0|req: 2/2] 192.168.66.21 () {40 vars in 728 bytes} [Fri Apr  2 02:42:40 2021] GET /static/admin/css/fonts.css => generated 2031 bytes in 5 msecs (HTTP/1.1 404) 5 headers in 159 bytes (1 switches on core 0)\nNot Found: /favicon.ico\n[pid: 28138|app: 0|req: 3/3] 192.168.66.21 () {38 vars in 690 bytes} [Fri Apr  2 02:42:44 2021] GET /favicon.ico => generated 1986 bytes in 6 msecs (HTTP/1.1 404) 5 headers in 159 bytes (1 switches on core 0)\n^C(venv-3.9.1) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br")])]),n("ol",{attrs:{start:"8"}},[n("li",[s._v("驗證 Django App 虛擬網站的 HTTP 服務已能正常運作。")])]),s._v(" "),n("p",[s._v("使用 Web 瀏覽器，瀏覽網址： http://mysite.ccc.tw.local/ 。若一切正常，應能於瀏覽器\n看到如下「內容」之網頁。")]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/django/django-app-default-home.png",alt:""}})]),s._v(" "),n("h3",{attrs:{id:"驗證-django-app-已能整合運作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#驗證-django-app-已能整合運作"}},[s._v("#")]),s._v(" 驗證 Django App 已能整合運作")]),s._v(" "),n("ol",[n("li",[s._v("變更 socket 串連方式為 uninx socket 。")])]),s._v(" "),n("p",[s._v("令 Nginx 虛擬網站與 uwsgi 介面程式的串接，自原來的 uwsgi 監聽 Port: 8001 ，改為：\n監聽 uninx socket 檔案。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim config/mysite.ccc.tw.local.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("🔖 mysite.ccc.tw.local.conf")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("upstream django {\n    # for a web port socket\n    # server 127.0.0.1:8001;\n\n    # for a file socket\n    # server unix:///path/to/your/mysite/mysite.sock;\n    # server unix:///home/alanjui/worksapce/django/mysite/run/mysite.ccc.tw.local.sock;\n    server unix:///run/uwsgi/mysite.ccc.tw.local.sock;\n}\n\nserver {\n    # the port mysite will be served on\n    listen 80;\n\n    server_name mysite.ccc.tw.local;\n\n    root /home/alanjui/worksapce/django/mysite;\n\n    # Finally, send all non-static, non-media requests to the Django App server.\n    location / {\n        uwsgi_pass  django;\n        include     /etc/nginx/uwsgi_params;\n    }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("備妥 unix socket 檔案，欲存放之「目錄」： /run/uwsgi/ 。")])]),s._v(" "),n("ul",[n("li",[s._v("建立目錄")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo mkdir -p /run/uwsgi\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("設定目錄及檔案的「擁有著」與「使用權限」")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo chown -R www-data:www-data /run/uwsgi\nsudo chmod -R 775 /run/uwsgi\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("重啟 nginx 服務。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo systemctl restart nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("啟動 WSGI 介面。")])]),s._v(" "),n("p",[s._v("通信路徑：\nWeb Client ⬅➡ Web Server ⬅➡ Web Socket (Socket File) ⬅➡ uWSGI ⬅➡ Django App")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("uwsgi --socket /run/uwsgi/mysite.ccc.tw.local.sock --module app_config.wsgi --chmod-socket=666\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("(mysite.ccc.tw.local) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$ uwsgi --socket /run/uwsgi/mysite.ccc.tw.local.sock --module app_config.wsgi --chmod-socket=666\n*** Starting uWSGI 2.0.19.1 (64bit) on [Mon Apr  5 11:59:53 2021] ***\ncompiled with version: 9.3.0 on 02 April 2021 17:30:08\nos: Linux-5.8.0-48-generic #54~20.04.1-Ubuntu SMP Sat Mar 20 13:40:25 UTC 2021\nnodename: VB02-Ubuntu-2004\nmachine: x86_64\nclock source: unix\npcre jit disabled\ndetected number of CPU cores: 2\ncurrent working directory: /home/alanjui/workspace/django/mysite\ndetected binary path: /home/alanjui/.pyenv/versions/3.8.5/envs/mysite.ccc.tw.local/bin/uwsgi\n*** WARNING: you are running uWSGI without its master process manager ***\nyour processes number limit is 15511\nyour memory page size is 4096 bytes\ndetected max file descriptor number: 1024\nlock engine: pthread robust mutexes\nthunder lock: disabled (you can enable it with --thunder-lock)\nuwsgi socket 0 bound to UNIX address /run/uwsgi/mysite.ccc.tw.local.sock fd 3\nPython version: 3.8.5 (default, Apr  3 2021, 00:06:18)  [GCC 9.3.0]\n*** Python threads support is disabled. You can enable it with --enable-threads ***\nPython main interpreter initialized at 0x563b16c43890\nyour server socket listen backlog is limited to 100 connections\nyour mercy for graceful operations on workers is 60 seconds\nmapped 72920 bytes (71 KB) for 1 cores\n*** Operational MODE: single process ***\nWSGI app 0 (mountpoint='') ready in 0 seconds on interpreter 0x563b16c43890 pid: 11003 (default app)\n*** uWSGI is running in multiple interpreter mode ***\nspawned uWSGI worker 1 (and the only) (pid: 11003, cores: 1)\n[pid: 11003|app: 0|req: 1/1] 192.168.66.21 () {42 vars in 797 bytes} [Mon Apr  5 04:00:25 2021] GET / => generated 16351 bytes in 11 msecs (HTTP/1.1 200) 5 headers in 153 bytes (1 switches on core 0)\nNot Found: /favicon.ico\n[pid: 11003|app: 0|req: 2/2] 192.168.66.21 () {42 vars in 756 bytes} [Mon Apr  5 04:00:25 2021] GET /favicon.ico => generated 1981 bytes in 8 msecs (HTTP/1.1 404) 5 headers in 159 bytes (1 switches on core 0)\n^C(mysite.ccc.tw.local) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("啟動「瀏覽器」觀察網址： http://mysite.ccc.tw.local/ ，若能看到以下畫面，\n即表通過測試。")])]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/django/django-app-default-home.png",alt:""}})]),s._v(" "),n("h3",{attrs:{id:"啟用-nginx-靜態檔的服務"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#啟用-nginx-靜態檔的服務"}},[s._v("#")]),s._v(" 啟用 Nginx 靜態檔的服務")]),s._v(" "),n("p",[s._v("啟用 Nginx 的「靜態檔」服務。當 HTTP Request 僅只是要求下載 static 或 media 類型\n的檔案時，Nginx 服務將發揮扮演「HTTP Server」的角色，直接提供檔案下載的服務；但\n若 HTTP Request 不是要求下載靜態檔時，Nginx 即透過 upstream 中的設定，將 HTTP Request\n轉交予 uwsgi 介面程式，再由 uwsgi 交付給最終的 Django App 處理。")]),s._v(" "),n("p",[s._v("通信路徑：\nWeb Client ⬅➡ Web Server ⬅➡ Web Socket (Socket File) ⬅➡ uWSGI ⬅➡ Django App")]),s._v(" "),n("p",[s._v("驗證 Web Client 傳來之 HTTP Request ，能被 uwsgi 服務接收，並轉傳至 Django App 。")]),s._v(" "),n("ol",[n("li",[s._v("建置「靜態檔案類型目錄」。")])]),s._v(" "),n("p",[s._v("建立 static 及 media 靜態檔使用目錄。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd ~/workspace/django/mysite\nmkdir media\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("編輯 Django App 的設定檔")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim app_config/settings.py\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("設定 static_root ，令「靜態檔」集中匯入：專案目錄下的子目錄：static_files")])]),s._v(" "),n("p",[s._v("🔖 settings.py")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("STATIC_URL = '/static/'\nSTATIC_ROOT = BASE_DIR / 'static_files'\n\nMEDIA_URL = '/media/'\nMEDIA_ROOT = BASE_DIR / 'media'\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("佈署 Django App 的「靜態檔案（static files）」。")])]),s._v(" "),n("p",[s._v("匯集所有靜態檔案至「靜態檔佈署目錄」：\n/home/alanjui/workspace/django/mysite/static_files/")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("python manage.py collectstatic\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("佈署 Django App 的 Media 檔案")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cp static_files/admin/img/search.svg media/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"5"}},[n("li",[s._v("變更 Nginx 虛擬網站設定檔。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim config/mysite.ccc.tw.local.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("🔖 mysite.ccc.tw.local")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("upstream django {\n    # server 127.0.0.1:8001;\n    server unix:///run/uwsgi/mysite.ccc.tw.local.sock;\n}\n\nserver {\n    # listen 8000;\n    listen 80;\n\n    server_name mysite.ccc.tw.local;\n\n    root /home/alanjui/workspace/django/mysite;\n    # index index.html;\n    charset utf-8;\n\n    # max upload size\n    client_max_body_size 75M; # adjust to taste\n\n    # Django media\n    location /media {\n        alias /home/alanjui/workspace/django/mysite/media;\n    }\n\n    # Django static\n    location /static {\n        # alias /home/alanjui/workspace/django/mysite/static_collected;\n        alias /home/alanjui/workspace/django/mysite/static_files;\n    }\n\n    # Finally, send all non-media requests to the Djang server.\n    location / {\n        # try_files $uri $uri/ =404;\n        uwsgi_pass      django;\n        include         /etc/nginx/uwsgi_params;\n    }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br")])]),n("ol",{attrs:{start:"6"}},[n("li",[s._v("驗證設定語法正確。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo nginx -t\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"7"}},[n("li",[s._v("重啟 Nginx 服務")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo systemctl restart nginx\nsystemctl status nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"8"}},[n("li",[s._v("啟動 uwsgi 介面程式。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("uwsgi --socket ./run/mysite.ccc.tw.local.sock --module app_config.wsgi --chmod-socket=666\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("📚 若執行 uwsgi 時，不在「Django App 專案目錄」時（如：Shell 的現行目錄在 Home），\n則可加入 chdir 選項，令 uwsgi 仍能正常執行。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd\n\nuwsgi --socket ~/workspace/django/mysite/run/mysite.ccc.tw.local.sock \\\n--chdir ~/workspace/django/mysite \\\n--module app_config.wsgi \\\n--chmod-socket=666\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("ol",{attrs:{start:"9"}},[n("li",[s._v("驗證能存取 static 靜態檔案")])]),s._v(" "),n("p",[s._v("在 Web 瀏覽器，瀏覽網址： http://mysite.ccc.tw.local/static/admin/img/search.svg\n，確認「網頁」能見到「放大鏡圖示」。")]),s._v(" "),n("ol",{attrs:{start:"10"}},[n("li",[s._v("驗證能存取 media 靜態檔案")])]),s._v(" "),n("p",[s._v("在 Web 瀏覽器，瀏覽網址： http://mysite.ccc.tw.local/media/search.svg\n，確認「網頁」能見到「放大鏡圖示」。")]),s._v(" "),n("ol",{attrs:{start:"11"}},[n("li",[s._v("驗證非存取 static 與 media 的 HTTP Request 會被送往 Django App ，使用者會\n在「網頁」看到如下畫面。")])]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/django/django-app-default-home.png",alt:""}})]),s._v(" "),n("ol",{attrs:{start:"12"}},[n("li",[s._v("清除測試後，遺留下的 unix socket 檔案。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ls -al /etc/uwsgi/\nsudo rm -f /etc/uwsgi/mysite.ccc.tw.local.sock\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"使用-uwsgi-介面設定檔"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-uwsgi-介面設定檔"}},[s._v("#")]),s._v(" 使用 uwsgi 介面設定檔")]),s._v(" "),n("p",[s._v("為使 uwsgi 介面程式啟動的時候，可以更簡便些，不用輸入那麼多的「參數」。改善的\n方法便是，設定 uwsgi 介面設定檔。")]),s._v(" "),n("ol",[n("li",[s._v("建置 uwsgi 服務設定檔")])]),s._v(" "),n("p",[s._v("建置 uWSGI 介面設定檔： mysite_uwsgi.ini 。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd /home/alanjui/worksapce/django/mysite\nvim config/mysite_uwsgi.ini\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("🔖 uwsgi_mysite.ini")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# uwsgi_mysite.ini\n[uwsgi]\nproject = mysite\ndomain = %(project).ccc.tw.local\nuid = www-data\ngid = www-data\nbase = /home/alanjui/workspace/django/%(project)\n\n# Django-related settings\n# the base directory (full path)\n#chdir = /home/alanjui/workspace/django/mysite\nchdir = %(base)\n\n# Django's wsgi file\nmodule = app_config.wsgi\n\n# the virtualenv (full path)\n#home = /home/alanjui/worksapce/django/mysite/.venv\n#home = %(chdir)/.venv\n#home = /home/alanjui/.pyenv/versions/3.8.5/envs/mysite.ccctw.local\nhome = /home/alanjui/.pyenv/versions/$(domain)\n\n# process-related settings\n# master\nmaster = true\n\n# maximum number of worker processes\nprocesses = 10\n\n# the socket (use the full path to be safe\n# socket = /run/uwsgi/%(project).sock\n# socket = /home/alanjui/workspace/django/mysite/run/mysite.ccc.tw.local.sock\nsocket = /run/uwsgi/%(domain).sock\n\n# ... with appropriate permissions - may be needed\n#chmod-socket = 664\nchmod-socket = 666\n\n# clear environment on exit\nvacuum = true\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br")])]),n("ol",{attrs:{start:"7"}},[n("li",[s._v("使用 uwsgi 介面設定檔，啟動 uwsgi 介面程式。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("uwsgi --ini config/uwsgi_mysite.ini\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("(mysite.ccc.tw.local) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$ uwsgi --ini config/mysite_uwsgi.ini\n[uWSGI] getting INI configuration from config/mysite_uwsgi.ini\n*** Starting uWSGI 2.0.19.1 (64bit) on [Sat Apr  3 01:51:54 2021] ***\ncompiled with version: 9.3.0 on 02 April 2021 17:30:08\nos: Linux-5.8.0-48-generic #54~20.04.1-Ubuntu SMP Sat Mar 20 13:40:25 UTC 2021\nnodename: VB02-Ubuntu-2004\nmachine: x86_64\nclock source: unix\npcre jit disabled\ndetected number of CPU cores: 2\ncurrent working directory: /home/alanjui/workspace/django/mysite\ndetected binary path: /home/alanjui/.pyenv/versions/3.8.5/envs/mysite.ccc.tw.local/bin/uwsgi\nchdir() to /home/alanjui/workspace/django/mysite\nyour processes number limit is 15511\nyour memory page size is 409 bytes\ndetected max file descriptor number: 1024\nlock engine: pthread robust mutexes\nthunder lock: disabled (you can enable it with --thunder-lock)\nuwsgi socket 0 bound to UNIX address /home/alanjui/workspace/django/mysite/run/mysite.ccc.tw.local.sock fd 3\nPython version: 3.8.5 (default, Apr  3 2021, 00:06:18)  [GCC 9.3.0]\nPEP 405 virtualenv detected: /home/alanjui/.pyenv/versions/mysite.ccc.tw.local\nSet PythonHome to /home/alanjui/.pyenv/versions/mysite.ccc.tw.local\n*** Python threads support is disabled. You can enable it with --enable-threads ***\nPython main interpreter initialized at 0x5612b7a9bab0\nyour server socket listen backlog is limited to 100 connections\nyour mercy for graceful operations on workers is 60 seconds\nmapped 802120 bytes (783 KB) for 10 cores\n*** Operational MODE: preforking ***\nWSGI app 0 (mountpoint='') ready in 0 seconds on interpreter 0x5612b7a9bab0 pid: 54009 (default app)\n*** uWSGI is running in multiple interpreter mode ***\nspawned uWSGI master process (pid: 54009)\nspawned uWSGI worker 1 (pid: 54052, cores: 1)\nspawned uWSGI worker 2 (pid: 54053, cores: 1)\nspawned uWSGI worker 3 (pid: 54054, cores: 1)\nspawned uWSGI worker 4 (pid: 54055, cores: 1)\nspawned uWSGI worker 5 (pid: 54056, cores: 1)\nspawned uWSGI worker 6 (pid: 54057, cores: 1)\nspawned uWSGI worker 7 (pid: 54058, cores: 1)\nspawned uWSGI worker 8 (pid: 54059, cores: 1)\nspawned uWSGI worker 9 (pid: 54060, cores: 1)\nspawned uWSGI worker 10 (pid: 54061, cores: 1)\n[pid: 54058|app: 0|req: 1/1] 192.168.66.21 () {44 vars in 828 bytes} [Fri Apr  2 17:52:01 2021] GET / => generated 16351 bytes in 16 msecs (HTTP/1.1 200) 5 headers in 153 bytes (1 switches on core 0)\nNot Found: /static/admin/css/fonts.css\n[pid: 54058|app: 0|req: 2/2] 192.168.66.21 () {42 vars in 740 bytes} [Fri Apr  2 17:52:01 2021] GET /static/admin/css/fonts.css => generated 2026 bytes in 8 msecs (HTTP/1.1 404) 5 headers in 159 bytes (1 switches on core 0)\n^CSIGINT/SIGQUIT received...killing workers...\nworker 1 buried after 1 seconds\nworker 2 buried after 1 seconds\nworker 3 buried after 1 seconds\nworker 4 buried after 1 seconds\nworker 5 buried after 1 seconds\nworker 6 buried after 1 seconds\nworker 7 buried after 1 seconds\nworker 8 buried after 1 seconds\nworker 9 buried after 1 seconds\nworker 10 buried after 1 seconds\ngoodbye to uWSGI.\nVACUUM: unix socket /home/alanjui/workspace/django/mysite/run/mysite.ccc.tw.local.sock removed.\n(mysite.ccc.tw.local) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$6\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br")])]),n("ol",{attrs:{start:"8"}},[n("li",[s._v("驗證能存取 static 靜態檔案")])]),s._v(" "),n("p",[s._v("在 Web 瀏覽器，瀏覽網址： http://mysite.ccc.tw.local/static/admin/img/search.svg\n，確認「網頁」能見到「放大鏡圖示」。")]),s._v(" "),n("ol",{attrs:{start:"9"}},[n("li",[s._v("驗證能存取 media 靜態檔案")])]),s._v(" "),n("p",[s._v("在 Web 瀏覽器，瀏覽網址： http://mysite.ccc.tw.local/media/search.svg\n，確認「網頁」能見到「放大鏡圖示」。")]),s._v(" "),n("ol",{attrs:{start:"10"}},[n("li",[s._v("驗證非存取 static 與 media 的 HTTP Request 會被送往 Django App ，使用者會\n在「網頁」看到如下畫面。")])]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/django/django-app-default-home.png",alt:""}})]),s._v(" "),n("h2",{attrs:{id:"建置-uwsgi-服務"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建置-uwsgi-服務"}},[s._v("#")]),s._v(" 建置 uWSGI 服務")]),s._v(" "),n("p",[s._v("建置作業系統完成開機，便能自動啟動的 uWSGI 服務，以為 HTTP Server（Nginx Service）\n引用的 WSGI (Web Server Gateway Interface) 。")]),s._v(" "),n("p",[s._v("📚 "),n("a",{attrs:{href:"https://docs.djangoproject.com/en/3.1/howto/deployment/wsgi/uwsgi/",target:"_blank",rel:"noopener noreferrer"}},[s._v("How to use Django with uWSGI"),n("OutboundLink")],1)]),s._v(" "),n("h3",{attrs:{id:"停用開發作業虛擬環境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#停用開發作業虛擬環境"}},[s._v("#")]),s._v(" 停用開發作業虛擬環境")]),s._v(" "),n("p",[s._v("停止使用 Django App 在「開發作業」使用的虛擬環境：mysite.ccc.tw.local。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("由於啟用 pyenv-virtualenv 及 pyenv local ，故而 Django App 專案，無法使用下列\n指令，停用虛擬環境。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd ~/workspace/django/mysite\npyenv deactivate\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"安裝作業系統用-uwsgi"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安裝作業系統用-uwsgi"}},[s._v("#")]),s._v(" 安裝作業系統用 uwsgi")]),s._v(" "),n("ol",[n("li",[s._v("安裝作業系統層級使用之 uWSGI 套件。")])]),s._v(" "),n("ul",[n("li",[s._v("Install current stable version")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo /usr/bin/python3.8 -m pip instal uwsgi\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("Install LTS (Long Term Support)")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo /usr/bin/python3.8 -m pip install https://projects.unbit.it/downloads/uwsgi-lts.tar.gz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("使用 pip 指令，驗證作業系統已安裝：uwsgi ，這個 Python 套件。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("/usr/bin/python3.8 -m pip list\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("alanjui@VB02-Ubuntu-2004:~$ /usr/bin/python3.8 -m pip list\n[sudo] alanjui 的密碼：\nPackage                Version\n---------------------- --------------------\napturl                 0.5.2\nasgiref                3.3.1\nastroid                2.4.2\nblinker                1.4\nBrlapi                 0.7.0\ncertifi                2019.11.28\nchardet                3.0.4\nClick                  7.0\ncolorama               0.4.3\n....\nssh-import-id          5.10\nsystemd-python         234\nubuntu-advantage-tools 20.3\nubuntu-drivers-common  0.0.0\nufw                    0.36\nunattended-upgrades    0.1\nurllib3                1.25.8\nuWSGI                  2.0.19.1\nwadllib                1.3.3\nwheel                  0.34.2\nwrapt                  1.12.1\nxkit                   0.0.0\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("透過「安裝目錄路徑」，驗證 uwsgi 已安裝。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ll /usr/local/lib/python3.8/dist-packages/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("alanjui@VB02-Ubuntu-2004:~$ ll /usr/local/lib/python3.8/dist-packages/\n總用量 52\ndrwxrwsr-x 10 root staff  4096  4月  3 22:59 ./\ndrwxrwsr-x  3 root staff  4096  4月 23  2020 ../\ndrwxr-sr-x  3 root staff  4096  3月 28 12:01 asgiref/\ndrwxr-sr-x  2 root staff  4096  3月 28 12:01 asgiref-3.3.1.dist-info/\ndrwxr-sr-x  5 root staff  4096  3月 30 20:55 pip/\ndrwxr-sr-x  2 root staff  4096  3月 30 20:55 pip-21.0.1.dist-info/\ndrwxr-sr-x  2 root staff  4096  4月  3 22:59 __pycache__/\ndrwxr-sr-x  5 root staff  4096  3月 28 12:01 sqlparse/\ndrwxr-sr-x  2 root staff  4096  3月 28 12:01 sqlparse-0.4.1.dist-info/\ndrwxr-sr-x  2 root staff  4096  4月  3 22:59 uWSGI-2.0.19.1.dist-info/\n-rw-r--r--  1 root staff 10392  4月  3 22:59 uwsgidecorators.py\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("h3",{attrs:{id:"建置及啟用-uwsgi-服務"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建置及啟用-uwsgi-服務"}},[s._v("#")]),s._v(" 建置及啟用 uWSGI 服務")]),s._v(" "),n("ol",[n("li",[s._v("建立 uwsgi 使用的 systemd 服務設定檔。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo vim /etc/systemd/system/uwsgi.service\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("🔖 uwsgi.service")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('[Unit]\nDescription=uWSGI Empermor Mode Service\nAfter=syslog.target\n\n[Service]\nExecStartPre=/bin/bash -c "mkdir -p /run/uwsgi; chown www-data:www-data /run/uwsgi"\nExecStart=/usr/local/bin/uwsgi --emperor /etc/uwsgi/apps-enabled --uid www-data --gid www-data\nRestart=always\nKillSignal=SIGQUIT\nType=notify\nStandardError=syslog\nNotifyAccess=all\n\n[Install]\nWantedBy=multi-user.target\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("啟用 uwsgi 的 systemd 服務。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo systemctl enable uwsgi\nsudo systemctl start uwsgi\nsystemctl status uwsgi\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"啟用-django-app-服務"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#啟用-django-app-服務"}},[s._v("#")]),s._v(" 啟用 Django App 服務")]),s._v(" "),n("p",[s._v("透過 uwsgi 服務，將 Django App 當成服務啟用。（意即：當作業系統完成開機後，\nDjango App 即能操作使用。）")]),s._v(" "),n("p",[s._v("以 Emperor Mode 啟用 uWSGI 服務。")]),s._v(" "),n("ol",[n("li",[s._v("建置 Emperor Mode 服務用 vassals 目錄")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo mkdir -p /etc/uwsgi/apps-available\nsudo mkdir -p /etc/uwsgi/apps-enabled\n\nsudo chown -R www-data:www-data /etc/uwsgi\nsudo chmod -R 775 /etc/uwsgi\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("啟用服務設定")])]),s._v(" "),n("p",[s._v("建立 uwsgi 服務設定檔的連結，放至目錄路徑中： /etc/uwsgi/apps-enabled/")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo ln -nfs /home/alanjui/workspace/django/mysite/config/uwsgi_mysite.ini /etc/uwsgi/apps-available\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("以 Emper Mode 啟用 uwsgi 服務")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo systemctl restart uwsgi\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("驗證能存取 static 靜態檔案")])]),s._v(" "),n("p",[s._v("在 Web 瀏覽器，瀏覽網址： http://mysite.ccc.tw.local/static/admin/img/search.svg\n，確認「網頁」能見到「放大鏡圖示」。")]),s._v(" "),n("ol",{attrs:{start:"5"}},[n("li",[s._v("驗證能存取 media 靜態檔案")])]),s._v(" "),n("p",[s._v("在 Web 瀏覽器，瀏覽網址： http://mysite.ccc.tw.local/media/search.svg\n，確認「網頁」能見到「放大鏡圖示」。")]),s._v(" "),n("ol",{attrs:{start:"6"}},[n("li",[s._v("驗證非存取 static 與 media 的 HTTP Request 會被送往 Django App")])]),s._v(" "),n("p",[s._v("在 Web 瀏覽器，瀏覽網址： http://mysite.ccc.tw.local/ ，確認「網頁」能見到\n如下圖之內容。")]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/django/django-app-default-home.png",alt:""}})]),s._v(" "),n("h2",{attrs:{id:"建置多種作業環境機制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建置多種作業環境機制"}},[s._v("#")]),s._v(" 建置多種作業環境機制")]),s._v(" "),n("p",[s._v("為配合 uwsgi 服務之正常運作，Django App 宜有「多環境設定檔」，以便「開發作業」、\n「測試（SIT）作業」、「試行（Staging）作業」與「上線（Production）作業」，各種\n不同作業時期，都能自動切換應有的設定。")]),s._v(" "),n("ul",[n("li",[s._v("開發作業：dev.py")]),s._v(" "),n("li",[s._v("測試作業：test.py")]),s._v(" "),n("li",[s._v("試行作業：staging.py")]),s._v(" "),n("li",[s._v("上線作業：prod.py")])]),s._v(" "),n("h3",{attrs:{id:"設定多種作業環境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#設定多種作業環境"}},[s._v("#")]),s._v(" 設定多種作業環境")]),s._v(" "),n("p",[s._v("設定多種作業環境機制，需配合變更之檔案：")]),s._v(" "),n("ul",[n("li",[s._v("manage.py")]),s._v(" "),n("li",[s._v("wsgi.py")]),s._v(" "),n("li",[s._v("urls.py")])]),s._v(" "),n("p",[s._v("🔖 managy.py")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('\n#!/usr/bin/env python\nimport os\nimport sys\n\nif **name** == "**main**":\nos.environ.setdefault("DJANGO_SETTINGS_MODULE", "web_site.settings.prod")\ntry:\nfrom django.core.management import execute_from_command_line\nexcept ImportError as exc:\nraise ImportError(\n"Couldn\'t import Django. Are you sure it\'s installed and "\n"available on your PYTHONPATH environment variable? Did you "\n"forget to activate a virtual environment?"\n) from exc\nexecute_from_command_line(sys.argv)\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("p",[s._v("🔖 wsgi.py")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('\n"""\nWSGI config for web_site project.\n\nIt exposes the WSGI callable as a module-level variable named `application`.\n\nFor more information on this file, see\nhttps://docs.djangoproject.com/en/2.0/howto/deployment/wsgi/\n"""\n\nimport os\n\nfrom django.core.wsgi import get_wsgi_application\n\n# os.environ.setdefault("DJANGO_SETTINGS_MODULE", "web_site.settings")\n\nos.environ.setdefault(\'DJANGO_SETTINGS_MODULE\', \'web_site.settings.prod\')\n\napplication = get_wsgi_application()\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("p",[s._v("🔖 urls.py")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n\"\"\"web_site URL Configuration\n\nThe `urlpatterns` list routes URLs to views. For more information please see:\nhttps://docs.djangoproject.com/en/2.0/topics/http/urls/\nExamples:\nFunction views\n\n1. Add an import: from my_app import views\n2. Add a URL to urlpatterns: path('', views.home, name='home')\n   Class-based views\n3. Add an import: from other_app.views import Home\n4. Add a URL to urlpatterns: path('', Home.as_view(), name='home')\n   Including another URLconf\n5. Import the include() function: from django.urls import include, path\n6. Add a URL to urlpatterns: path('blog/', include('blog.urls'))\n   \"\"\"\n   from django.contrib import admin\n   from django.urls import path, include\n\nurlpatterns = [\npath('admin/', admin.site.urls),\npath('accounts/', include('accounts.urls')),\npath('accounts/', include('django.contrib.auth.urls')),\npath('books/', include('books.urls')),\npath('posts/', include('posts.urls')),\npath('', include('pages.urls')),\n]\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("h3",{attrs:{id:"建置基礎作業環境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建置基礎作業環境"}},[s._v("#")]),s._v(" 建置基礎作業環境")]),s._v(" "),n("p",[s._v("建置 Django App 基礎作業環境，以為其它各種作業環境\n所引用的「基底」。")]),s._v(" "),n("p",[s._v("🔖 base.py")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n\"\"\"\nDjango settings for web_site project.\n\nGenerated by 'django-admin startproject' using Django 2.0.\n\nFor more information on this file, see\nhttps://docs.djangoproject.com/en/2.0/topics/settings/\n\nFor the full list of settings and their values, see\nhttps://docs.djangoproject.com/en/2.0/ref/settings/\n\"\"\"\n\nimport os\n\n# Build paths inside the project like this: os.path.join(BASE_DIR, ...)\n\nBASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(**file**)))\n\n# Quick-start development settings - unsuitable for production\n\n# See https://docs.djangoproject.com/en/2.0/howto/deployment/checklist/\n\n# SECURITY WARNING: keep the secret key used in production secret!\n\nSECRET*KEY = '7g@&s!bkka+)w70=9=t2+%&r7um*!dg!7^5^yso%on@w&u&7g6'\n\n# SECURITY WARNING: don't run with debug turned on in production!\n\n# DEBUG= True\n\nALLOWED_HOSTS = [\n'app.ccc.tw.local',\n'localhost',\n'127.0.0.1',\n]\n\n# Application definition\n\nINSTALLED_APPS = [\n'django.contrib.admin',\n'django.contrib.auth',\n'django.contrib.contenttypes',\n'django.contrib.sessions',\n'django.contrib.messages',\n'whitenoise.runserver_nostatic',\n'django.contrib.staticfiles',\n\n    # Libs\n    'crispy_forms',\n\n    # My Apps\n    'pages.apps.PagesConfig',\n    'posts.apps.PostsConfig',\n    'books.apps.BooksConfig',\n    'accounts.apps.AccountsConfig',\n\n]\n\nMIDDLEWARE = [\n'django.middleware.security.SecurityMiddleware',\n'whitenoise.middleware.WhiteNoiseMiddleware',\n'django.contrib.sessions.middleware.SessionMiddleware',\n'django.middleware.common.CommonMiddleware',\n'django.middleware.csrf.CsrfViewMiddleware',\n'django.contrib.auth.middleware.AuthenticationMiddleware',\n'django.contrib.messages.middleware.MessageMiddleware',\n'django.middleware.clickjacking.XFrameOptionsMiddleware',\n\n    # My MiddleWare\n\n]\n\nROOT_URLCONF = 'web_site.urls'\n\nTEMPLATES = [\n{\n'BACKEND': 'django.template.backends.django.DjangoTemplates',\n'DIRS': [\nos.path.join(BASE_DIR, 'templates'),\n],\n'APP_DIRS': True,\n'OPTIONS': {\n'context_processors': [\n'django.template.context_processors.debug',\n'django.template.context_processors.request',\n'django.contrib.auth.context_processors.auth',\n'django.contrib.messages.context_processors.messages',\n],\n},\n},\n]\n\nWSGI_APPLICATION = 'web_site.wsgi.application'\n\n# Database\n\n# https://docs.djangoproject.com/en/2.0/ref/settings/#databases\n\nDATABASES = {\n'default': {\n'ENGINE': 'django.db.backends.sqlite3',\n'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),\n}\n}\n\n# Password validation\n\n# https://docs.djangoproject.com/en/2.0/ref/settings/#auth-password-validators\n\nAUTH_PASSWORD_VALIDATORS = [\n{\n'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',\n},\n{\n'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',\n},\n{\n'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',\n},\n{\n'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',\n},\n]\n\n# Internationalization\n\n# https://docs.djangoproject.com/en/2.0/topics/i18n/\n\nLANGUAGE_CODE = 'en-us'\n\nTIME_ZONE = 'UTC'\n\nUSE_I18N = True\n\nUSE_L10N = True\n\nUSE_TZ = True\n\n# Static files (CSS, JavaScript, Images)\n\n# https://docs.djangoproject.com/en/2.0/howto/static-files/\n\nSTATIC_URL = '/static/'\n\n# The absolute path to the directory where collectstatic will collect static files for deployment.\n\nSTATIC_ROOT = BASE_DIR / 'collectstatic'\n\n# Simplified static file serving.\n\n# https://warehouse.python.org/project/whitenoise/\n\n# Document Ref: http://whitenoise.evans.io/en/stable/django.html\n\nSTATICFILES_STORAGEGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage'\n\n# Media Files\n\nMEDIA_URL = '/media/'\nMEDIA_ROOT = BASE_DIR / 'media')\n\n# User Account Management\n\nLOGIN_REDIRECT_URL = 'pages:home'\nLOGOUT_REDIRECT_URL = 'pages:home'\nAUTH_USER_MODEL = 'accounts.CustomUser'\n\n# Form formatting\n\nCRISPY_TEMPLATE_PACK = 'bootstrap4'\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br"),n("span",{staticClass:"line-number"},[s._v("95")]),n("br"),n("span",{staticClass:"line-number"},[s._v("96")]),n("br"),n("span",{staticClass:"line-number"},[s._v("97")]),n("br"),n("span",{staticClass:"line-number"},[s._v("98")]),n("br"),n("span",{staticClass:"line-number"},[s._v("99")]),n("br"),n("span",{staticClass:"line-number"},[s._v("100")]),n("br"),n("span",{staticClass:"line-number"},[s._v("101")]),n("br"),n("span",{staticClass:"line-number"},[s._v("102")]),n("br"),n("span",{staticClass:"line-number"},[s._v("103")]),n("br"),n("span",{staticClass:"line-number"},[s._v("104")]),n("br"),n("span",{staticClass:"line-number"},[s._v("105")]),n("br"),n("span",{staticClass:"line-number"},[s._v("106")]),n("br"),n("span",{staticClass:"line-number"},[s._v("107")]),n("br"),n("span",{staticClass:"line-number"},[s._v("108")]),n("br"),n("span",{staticClass:"line-number"},[s._v("109")]),n("br"),n("span",{staticClass:"line-number"},[s._v("110")]),n("br"),n("span",{staticClass:"line-number"},[s._v("111")]),n("br"),n("span",{staticClass:"line-number"},[s._v("112")]),n("br"),n("span",{staticClass:"line-number"},[s._v("113")]),n("br"),n("span",{staticClass:"line-number"},[s._v("114")]),n("br"),n("span",{staticClass:"line-number"},[s._v("115")]),n("br"),n("span",{staticClass:"line-number"},[s._v("116")]),n("br"),n("span",{staticClass:"line-number"},[s._v("117")]),n("br"),n("span",{staticClass:"line-number"},[s._v("118")]),n("br"),n("span",{staticClass:"line-number"},[s._v("119")]),n("br"),n("span",{staticClass:"line-number"},[s._v("120")]),n("br"),n("span",{staticClass:"line-number"},[s._v("121")]),n("br"),n("span",{staticClass:"line-number"},[s._v("122")]),n("br"),n("span",{staticClass:"line-number"},[s._v("123")]),n("br"),n("span",{staticClass:"line-number"},[s._v("124")]),n("br"),n("span",{staticClass:"line-number"},[s._v("125")]),n("br"),n("span",{staticClass:"line-number"},[s._v("126")]),n("br"),n("span",{staticClass:"line-number"},[s._v("127")]),n("br"),n("span",{staticClass:"line-number"},[s._v("128")]),n("br"),n("span",{staticClass:"line-number"},[s._v("129")]),n("br"),n("span",{staticClass:"line-number"},[s._v("130")]),n("br"),n("span",{staticClass:"line-number"},[s._v("131")]),n("br"),n("span",{staticClass:"line-number"},[s._v("132")]),n("br"),n("span",{staticClass:"line-number"},[s._v("133")]),n("br"),n("span",{staticClass:"line-number"},[s._v("134")]),n("br"),n("span",{staticClass:"line-number"},[s._v("135")]),n("br"),n("span",{staticClass:"line-number"},[s._v("136")]),n("br"),n("span",{staticClass:"line-number"},[s._v("137")]),n("br"),n("span",{staticClass:"line-number"},[s._v("138")]),n("br"),n("span",{staticClass:"line-number"},[s._v("139")]),n("br"),n("span",{staticClass:"line-number"},[s._v("140")]),n("br"),n("span",{staticClass:"line-number"},[s._v("141")]),n("br"),n("span",{staticClass:"line-number"},[s._v("142")]),n("br"),n("span",{staticClass:"line-number"},[s._v("143")]),n("br"),n("span",{staticClass:"line-number"},[s._v("144")]),n("br"),n("span",{staticClass:"line-number"},[s._v("145")]),n("br"),n("span",{staticClass:"line-number"},[s._v("146")]),n("br"),n("span",{staticClass:"line-number"},[s._v("147")]),n("br"),n("span",{staticClass:"line-number"},[s._v("148")]),n("br"),n("span",{staticClass:"line-number"},[s._v("149")]),n("br"),n("span",{staticClass:"line-number"},[s._v("150")]),n("br"),n("span",{staticClass:"line-number"},[s._v("151")]),n("br"),n("span",{staticClass:"line-number"},[s._v("152")]),n("br"),n("span",{staticClass:"line-number"},[s._v("153")]),n("br"),n("span",{staticClass:"line-number"},[s._v("154")]),n("br"),n("span",{staticClass:"line-number"},[s._v("155")]),n("br"),n("span",{staticClass:"line-number"},[s._v("156")]),n("br"),n("span",{staticClass:"line-number"},[s._v("157")]),n("br"),n("span",{staticClass:"line-number"},[s._v("158")]),n("br"),n("span",{staticClass:"line-number"},[s._v("159")]),n("br"),n("span",{staticClass:"line-number"},[s._v("160")]),n("br"),n("span",{staticClass:"line-number"},[s._v("161")]),n("br"),n("span",{staticClass:"line-number"},[s._v("162")]),n("br"),n("span",{staticClass:"line-number"},[s._v("163")]),n("br"),n("span",{staticClass:"line-number"},[s._v("164")]),n("br"),n("span",{staticClass:"line-number"},[s._v("165")]),n("br"),n("span",{staticClass:"line-number"},[s._v("166")]),n("br"),n("span",{staticClass:"line-number"},[s._v("167")]),n("br"),n("span",{staticClass:"line-number"},[s._v("168")]),n("br"),n("span",{staticClass:"line-number"},[s._v("169")]),n("br"),n("span",{staticClass:"line-number"},[s._v("170")]),n("br"),n("span",{staticClass:"line-number"},[s._v("171")]),n("br"),n("span",{staticClass:"line-number"},[s._v("172")]),n("br")])]),n("h3",{attrs:{id:"建置開發作業環境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建置開發作業環境"}},[s._v("#")]),s._v(" 建置開發作業環境")]),s._v(" "),n("p",[s._v("🔖 dev.py")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\nfrom .base import \\*\n\n# SECURITY WARNING: don't run with debug turned on in production!\n\nDEBUG = True\n\n# Quick-start development settings - unsuitable for production\n\n# See https://docs.djangoproject.com/en/2.0/howto/deployment/checklist/\n\nALLOWED_HOSTS = [\n'127.0.0.1',\n'0.0.0.0',\n]\n\n# Database\n\n# https://docs.djangoproject.com/en/2.0/ref/settings/#databases\n\nif 'DATABASE_HOST' in os.environ:\nDATABASES\\['default'\\]['HOST'] = os.getenv('DATABASE_HOST')\nDATABASES\\['default'\\]['ENGINE'] = 'django.db.backends.postgresql_psycopg2'\nDATABASES\\['default'\\]['NAME'] = os.getenv('DATABASE_NAME')\nDATABASES\\['default'\\]['USER'] = os.getenv('DATABASE_USER')\nDATABASES\\['default'\\]['PASSWORD'] = os.getenv('DATABASE_PASSWORD')\n\n    DATABASES = {\n        'default': {\n            'ENGINE': 'django.db.backends.postgresql_psycopg2',\n            'NAME': 'django2_helloworld_db',\n            'USER': 'django2_helloworld',\n            'PASSWORD': 'Passw0rd',\n            'HOST': 'localhost',\n            'PORT': '5432',\n        }\n    }\n\nelse:\nDATABASES = {\n'default': {\n'ENGINE': 'django.db.backends.sqlite3',\n'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),\n}\n}\n\n# Contact Us From\n\nEMAIL_BACKEND = 'django.core.mail.backends.console.EmailBackend'\n\n# BASE_URL required for notification emails\n\nBASE_URL = 'http://localhost:8000'\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br")])]),n("h3",{attrs:{id:"建置測試作業環境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建置測試作業環境"}},[s._v("#")]),s._v(" 建置測試作業環境")]),s._v(" "),n("p",[s._v("🔖 test.py")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"建置試行作業環境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建置試行作業環境"}},[s._v("#")]),s._v(" 建置試行作業環境")]),s._v(" "),n("p",[s._v("🔖 staging.py")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n# from web_site.settings.base import \\*\n\nfrom .base import \\*\n\n# SECURITY WARNING: don't run with debug turned on in production!\n\nDEBUG = False\n\nALLOWED_HOSTS = [\n'127.0.0.1',\n'192.168.66.10',\n'localhost',\n'app.ccc.tw.local',\n]\n\nDATABASES = {\n'default': {\n'ENGINE': 'django.db.backends.postgresql_psycopg2',\n'NAME': 'django2_helloworld_db',\n'USER': 'django2_helloworld',\n'PASSWORD': 'Passw0rd',\n'HOST': 'localhost',\n'PORT': '5432',\n}\n}\n\nDATABASE_URL = 'postgres://django2_helloworld:Passw0rd@localhost:5432/django2_hellowrold_db'\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("h3",{attrs:{id:"建置上線作業環境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建置上線作業環境"}},[s._v("#")]),s._v(" 建置上線作業環境")]),s._v(" "),n("p",[s._v("🔖 prod.py")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n# from web_site.settings.base import \\*\n\nfrom .base import \\*\n\n# SECURITY WARNING: don't run with debug turned on in production!\n\nDEBUG = False\n\nALLOWED_HOSTS = [\n'127.0.0.1',\n'192.168.66.10',\n'localhost',\n'app.ccc.tw',\n]\n\nDATABASES = {\n'default': {\n'ENGINE': 'django.db.backends.postgresql_psycopg2',\n'NAME': 'django2_helloworld_db',\n'USER': 'django2_helloworld',\n'PASSWORD': 'Passw0rd',\n'HOST': 'localhost',\n'PORT': '5432',\n}\n}\n\nDATABASE_URL = 'postgres://django2_helloworld:Passw0rd@localhost:5432/django2_hellowrold_db'\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("h3",{attrs:{id:"建置-heroku-平台作業環境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建置-heroku-平台作業環境"}},[s._v("#")]),s._v(" 建置 Heroku 平台作業環境")]),s._v(" "),n("p",[s._v("🔖 heroku.py")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n# from web_site.settings.base import \\*\n\nfrom .base import \\*\nimport django_heroku\nimport dj_database_url\n\n# Set environment variables (SECRET_KEY and others)\n\nEMAIL_HOST_USER = os.environ.get('EMAIL_HOST_USER')\nEMAIL_HOST_PASSWORD = os.environ.get('EMAIL_HOST_PASSWORD')\n\n# SECURITY WARNING: keep the secret key used in production secret!\n\n# SECRET_KEY = 'CHANGE_ME!!!! (P.S. the SECRET_KEY environment variable will be used, if set, instead).'\n\n# SECRET_KEY = os.environ.get('SECRET_KEY')\n\n# SECURITY WARNING: don't run with debug turned on in production!\n\n# DEBGUG = True\n\nDEBUG = bool(os.environ.get('DJANGO_DEBUG', True))\n\n# # Quick-start development settings - unsuitable for production\n\n# # See https://docs.djangoproject.com/en/2.0/howto/deployment/checklist/\n\nALLOWED_HOSTS = [\n'127.0.0.1',\n'localhost',\n'.herokuapp.com',\n'serene-crag-30137.herokuapp.com',\n]\n\n# Database\n\n# https://docs.djangoproject.com/en/2.0/ref/settings/#databases\n\n# Heroku: Update database configuration from \\$DATABASE_URL\n\ndb_from_env = dj_database_url.config(conn_max_age=500)\nDATABASES['default'].update(db_from_env)\n\ndjango_heroku.settings(locals())\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br")])]),n("h2",{attrs:{id:"問題診斷與狀況排除"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#問題診斷與狀況排除"}},[s._v("#")]),s._v(" 問題診斷與狀況排除")]),s._v(" "),n("h3",{attrs:{id:"解除作業系統預設之-vim"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解除作業系統預設之-vim"}},[s._v("#")]),s._v(" 解除作業系統預設之 vim")]),s._v(" "),n("p",[s._v("如下方式安裝之 VIM 套件，無法安裝「最新版」。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\nsudo apt install vim\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("若欲安裝最新版之 VIM ，可使用 GitHub 之原始碼建置。已安裝之 VIM ，可依以下方法，\n解除原先安裝及清除設定。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\nsudo apt remove vim --purge\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\nalanjui@VB02-Ubuntu-2004:~\\$ sudo apt remove vim --purge\n正在讀取套件清單... 完成\n正在重建相依關係\n正在讀取狀態資料... 完成\n以下套件為自動安裝，並且已經無用：\nvim-runtime\n使用 'sudo apt autoremove' 將之移除。\n下列套件將會被【移除】：\nvim\\*\n升級 0 個，新安裝 0 個，移除 1 個，有 0 個未被升級。\n此操作完成之後，會空出 3,111 kB 的磁碟空間。\n是否繼續進行 [Y/n]？ [Y/n] y\n（讀取資料庫 ... 目前共安裝了 171827 個檔案和目錄。）\n正在移除 vim (2:8.1.2269-1ubuntu5)……\nupdate-alternatives: 在自動模式下以 /usr/bin/vim.tiny 來提供 /usr/bin/vi (vi)\nupdate-alternatives: 在自動模式下以 /usr/bin/vim.tiny 來提供 /usr/bin/view (view)\nupdate-alternatives: 在自動模式下以 /usr/bin/vim.tiny 來提供 /usr/bin/ex (ex)\nupdate-alternatives: 在自動模式下以 /usr/bin/vim.tiny 來提供 /usr/bin/rview (rview)\n（讀取資料庫 ... 目前共安裝了 171818 個檔案和目錄。）\n正在清除 vim (2:8.1.2269-1ubuntu5) 的設定檔……\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("h2",{attrs:{id:"常見操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#常見操作"}},[s._v("#")]),s._v(" 常見操作")]),s._v(" "),n("h3",{attrs:{id:"啟用「虛擬環境」"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#啟用「虛擬環境」"}},[s._v("#")]),s._v(" 啟用「虛擬環境」")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\npyenv [Virtual_Env]\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\nalanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$ pyenv shell venv39\n(venv39) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"啟用與停止虛擬環境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#啟用與停止虛擬環境"}},[s._v("#")]),s._v(" 啟用與停止虛擬環境")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\npyenv active [Virtual_Env]\npyenv deactivate\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\nalanjui@VB02-Ubuntu-2004:~/workspace/django/mysite\\$ pyenv activate venv-3.9.1\npyenv-virtualenv: prompt changing will be removed from future release. configure `export PYENV_VIRTUALENV_DISABLE_PROMPT=1' to simulate the behavior.\n\n(venv-3.9.1) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$ pyenv deactivate\nalanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h3",{attrs:{id:"建立虛擬環境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#建立虛擬環境"}},[s._v("#")]),s._v(" 建立虛擬環境")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\npyenv virtualenv [Version_No][virtual_env]\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\nalanjui@VB02-Ubuntu-2004:~\\$ pyenv virtualenvs\n\nalanjui@VB02-Ubuntu-2004:~\\$ pyenv virtualenv 3.9.1 venv-3.9.1\nLooking in links: /tmp/tmp6e0qe2zi\nRequirement already satisfied: setuptools in /home/alanjui/.pyenv/versions/3.9.1/envs/venv-3.9.1/lib/python3.9/site-packages (49.2.1)\nRequirement already satisfied: pip in /home/alanjui/.pyenv/versions/3.9.1/envs/venv-3.9.1/lib/python3.9/site-packages (20.2.3)\n\nalanjui@VB02-Ubuntu-2004:~\\$ pyenv virtualenvs\n3.9.1/envs/venv-3.9.1 (created from /home/alanjui/.pyenv/versions/3.9.1)\nvenv-3.9.1 (created from /home/alanjui/.pyenv/versions/3.9.1)\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h3",{attrs:{id:"套用目前的-python-建立虛擬環境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#套用目前的-python-建立虛擬環境"}},[s._v("#")]),s._v(" 套用目前的 Python 建立虛擬環境")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\npyenv virtualenv [Virtual_Env]\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\nalanjui@VB02-Ubuntu-2004:~/workspace/django/mysite\\$ pyenv version\n3.9.1 (set by /home/alanjui/.pyenv/version)\n\nalanjui@VB02-Ubuntu-2004:~/workspace/django/mysite\\$ pyenv virtualenv venv39\nLooking in links: /tmp/tmp4fyfh4dr\nRequirement already satisfied: setuptools in /home/alanjui/.pyenv/versions/3.9.1/envs/venv39/lib/python3.9/site-packages (49.2.1)\nRequirement already satisfied: pip in /home/alanjui/.pyenv/versions/3.9.1/envs/venv39/lib/python3.9/site-packages (20.2.3)\n\nalanjui@VB02-Ubuntu-2004:~/workspace/django/mysite\\$ pyenv virtualenvs\n3.9.1/envs/venv39 (created from /home/alanjui/.pyenv/versions/3.9.1)\n3.9.1/envs/venv-3.9.1 (created from /home/alanjui/.pyenv/versions/3.9.1)\nvenv39 (created from /home/alanjui/.pyenv/versions/3.9.1)\nvenv-3.9.1 (created from /home/alanjui/.pyenv/versions/3.9.1)\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h3",{attrs:{id:"查詢有那些虛擬環境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查詢有那些虛擬環境"}},[s._v("#")]),s._v(" 查詢有那些虛擬環境")]),s._v(" "),n("p",[s._v("List existing virtualenvs:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\npyenv virtualenvs\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\nalanjui@VB02-Ubuntu-2004:~/workspace/django/mysite\\$ pyenv virtualenvs\n3.9.1/envs/venv-3.9.1 (created from /home/alanjui/.pyenv/versions/3.9.1)\nvenv-3.9.1 (created from /home/alanjui/.pyenv/versions/3.9.1)\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h3",{attrs:{id:"刪除已建立之虛擬環境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#刪除已建立之虛擬環境"}},[s._v("#")]),s._v(" 刪除已建立之虛擬環境")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\npyenv uninstall [Virtual_Env]\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\nalanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$ pyenv uninstall venv39\npyenv-virtualenv: remove /home/alanjui/.pyenv/versions/3.9.1/envs/venv39? y\nalanjui@VB02-Ubuntu-2004:~/workspace/django/mysite$\n\nalanjui@VB02-Ubuntu-2004:~/workspace/django/mysite\\$ pyenv virtualenvs\n3.9.1/envs/venv-3.9.1 (created from /home/alanjui/.pyenv/versions/3.9.1)\nvenv-3.9.1 (created from /home/alanjui/.pyenv/versions/3.9.1)\n\nalanjui@VB02-Ubuntu-2004:~/workspace/django/mysite\\$ ll ~/.pyenv/versions\n總用量 12\ndrwxrwxr-x 3 alanjui alanjui 4096 4 月 1 13:33 ./\ndrwxrwxr-x 14 alanjui alanjui 4096 3 月 26 20:45 ../\ndrwxr-xr-x 7 alanjui alanjui 4096 3 月 26 20:45 3.9.1/\nlrwxrwxrwx 1 alanjui alanjui 51 3 月 26 20:45 venv-3.9.1 -> /home/alanjui/.pyenv/versions/3.9.1/envs/venv-3.9.1/\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("h3",{attrs:{id:"更新-pip-至最新版"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#更新-pip-至最新版"}},[s._v("#")]),s._v(" 更新 pip 至最新版")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\npython -m pip install --upgrade pip\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n/home/alanjui/.pyenv/versions/3.8.5/envs/mysite.ccc.tw.local/bin/python3.8 -m pip install --upgrade pip\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n(mysite.ccc.tw.local) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite\\$ pip list\nPackage Version\n\n---\n\npip 20.1.1\nsetuptools 47.1.0\nWARNING: You are using pip version 20.1.1; however, version 21.0.1 is available.\nYou should consider upgrading via the '/home/alanjui/.pyenv/versions/3.8.5/envs/mysite.ccc.tw.local/bin/python3.8 -m pip install --upgrade pip' command.\n\n(mysite.ccc.tw.local) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite\\$ /home/alanjui/.pyenv/versions/3.8.5/envs/mysite.ccc.tw.local/bin/python3.8 -m pip install --upgrade pip\nCollecting pip\nUsing cached pip-21.0.1-py3-none-any.whl (1.5 MB)\nInstalling collected packages: pip\nAttempting uninstall: pip\nFound existing installation: pip 20.1.1\nUninstalling pip-20.1.1:\nSuccessfully uninstalled pip-20.1.1\nSuccessfully installed pip-21.0.1\n\n(mysite.ccc.tw.local) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite\\$ pip list\nPackage Version\n\n---\n\npip 21.0.1\nsetuptools 47.1.0\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("h2",{attrs:{id:"問題診斷與狀況排除-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#問題診斷與狀況排除-2"}},[s._v("#")]),s._v(" 問題診斷與狀況排除")]),s._v(" "),n("h3",{attrs:{id:"執行-uwsgi-發生-run-time-error"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#執行-uwsgi-發生-run-time-error"}},[s._v("#")]),s._v(" 執行 uwsgi 發生 run time error")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n!!! no internal routing support, rebuild with pcre support !!!\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n(mysite.ccc.tw.local) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite\\$ uwsgi --ini config/mysite\\*uwsgi.ini\n[uWSGI] getting INI configuration from config/mysite_uwsgi.ini\n\\*\\*\\* Starting uWSGI 2.0.19.1 (64bit) on [Sat Apr 3 01:14:22 2021] \\_\\*\\*\ncompiled with version: 9.3.0 on 28 March 2021 03:24:44\nos: Linux-5.8.0-48-generic #54~20.04.1-Ubuntu SMP Sat Mar 20 13:40:25 UTC 2021\nnodename: VB02-Ubuntu-2004\nmachine: x86_64\nclock source: unix\ndetected number of CPU cores: 2\ncurrent working directory: /home/alanjui/workspace/django/mysite\ndetected binary path: /home/alanjui/.pyenv/versions/3.8.5/envs/mysite.ccc.tw.local/bin/uwsgi\n!!! no internal routing support, rebuild with pcre support !!!\nchdir() to /home/alanjui/worksapce/django/mysite\nchdir(): No such file or directory [core/uwsgi.c line 2625]\nchdir(): No such file or directory [core/uwsgi.c line 1649]\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("p",[s._v("🔨")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n# Uninstall uwsgi\n\npip uninstall uwsgi\nsudo apt remove uwsgi\n\n# install pcre libaries\n\nsudo apt install libpcre3 libpcre3-dev\n\npip install uwsgi -I --no-cache-dir\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n(mysite.ccc.tw.local) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite\\$ pip install uwsgi -I --no-cache-dir\nCollecting uwsgi\nDownloading uWSGI-2.0.19.1.tar.gz (803 kB)\n|████████████████████████████████| 803 kB 1.7 MB/s\nUsing legacy 'setup.py install' for uwsgi, since package 'wheel' is not installed.\nInstalling collected packages: uwsgi\nRunning setup.py install for uwsgi ... done\nSuccessfully installed uwsgi-2.0.19.1\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("📺 使用 pip install uwsgi 安裝，pip 預設用 cache ，參考如下之安裝畫面，可見\nUsing cached uWSGI-2.0.19.1... 字樣。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n(mysite.ccc.tw.local) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite\\$ pip install uwsgi\nCollecting uwsgi\nUsing cached uWSGI-2.0.19.1-cp38-cp38-linux_x86_64.whl\nInstalling collected packages: uwsgi\nSuccessfully installed uwsgi-2.0.19.1\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h3",{attrs:{id:"啟動-uwsgi-發生-uninx-socket-錯誤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#啟動-uwsgi-發生-uninx-socket-錯誤"}},[s._v("#")]),s._v(" 啟動 uwsgi ，發生 uninx socket 錯誤")]),s._v(" "),n("p",[s._v("啟動 uwsgi 介面時，使用 uwsgi 設定檔，無法正常執行，發生如下錯誤：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\nerror removing unix socket, unlink(): Permission denied [core/socket.c line 198]\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n(mysite.ccc.tw.local) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite\\$ uwsgi --ini config/mysite\\*uwsgi.ini\n[uWSGI] getting INI configuration from config/mysite_uwsgi.ini\n\\*\\*\\* Starting uWSGI 2.0.19.1 (64bit) on [Sat Apr 3 11:39:31 2021] \\_\\*\\*\ncompiled with version: 9.3.0 on 02 April 2021 17:30:08\nos: Linux-5.8.0-48-generic #54~20.04.1-Ubuntu SMP Sat Mar 20 13:40:25 UTC 2021\nnodename: VB02-Ubuntu-2004\nmachine: x86_64\nclock source: unix\npcre jit disabled\ndetected number of CPU cores: 2\ncurrent working directory: /home/alanjui/workspace/django/mysite\ndetected binary path: /home/alanjui/.pyenv/versions/3.8.5/envs/mysite.ccc.tw.local/bin/uwsgi\nchdir() to /home/alanjui/workspace/django/mysite\nyour processes number limit is 15511\nyour memory page size is 4096 bytes\ndetected max file descriptor number: 1024\nlock engine: pthread robust mutexes\nthunder lock: disabled (you can enable it with --thunder-lock)\nerror removing unix socket, unlink(): Permission denied [core/socket.c line 198]\nbind(): Address already in use [core/socket.c line 230]\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("p",[s._v("🔍 問題診斷：因為前次執行 uwsgi ，沒能讓 uwsgi 正常終止，致使「目錄」： /run/uwsgi/\n仍留下當時執行的 unix socket 檔： mysite.ccc.tw.local.sock 。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n(mysite.ccc.tw.local) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite\\$ ll /run/uwsgi/\n總用量 0\ndrwxr-xr-x 2 www-data www-data 60 3 月 31 10:42 ./\ndrwxr-xr-x 34 root root 1020 4 月 3 11:28 ../\nsrw-rw-rw- 1 www-data www-data 0 3 月 31 10:42 mysite.ccc.tw.local.sock=\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("🔨 狀況排除：先刪除前次執行遺留下的 unix socket 檔，然後再啟動 uwsgi 。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n(mysite.ccc.tw.local) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite\\$ sudo rm /run/uwsgi/mysite.ccc.tw.local.sock\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"終止使用中的-port"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#終止使用中的-port"}},[s._v("#")]),s._v(" 終止使用中的 Port")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\nfuser -n tcp [Port_No]\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("📺")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n(venv-3.9.1) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite\\$ python manage.py runserver 0.0.0.0:8000\nWatching for file changes with StatReloader\nPerforming system checks...\n\nSystem check identified no issues (0 silenced).\n\nYou have 18 unapplied migration(s). Your project may not work properly until you apply the migrations for app(s): admin, auth, contenttypes, sessions.\nRun 'python manage.py migrate' to apply them.\nApril 01, 2021 - 07:26:08\nDjango version 3.1.7, using settings 'app_config.settings'\nStarting development server at http://0.0.0.0:8000/\nQuit the server with CONTROL-C.\nError: That port is already in use.\n\n(venv-3.9.1) alanjui@VB02-Ubuntu-2004:~/workspace/django/mysite\\$ fuser -n tcp -k 8000\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h2",{attrs:{id:"資料參考"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#資料參考"}},[s._v("#")]),s._v(" 資料參考")]),s._v(" "),n("h3",{attrs:{id:"pyenv-virtualenv-官網資料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pyenv-virtualenv-官網資料"}},[s._v("#")]),s._v(" pyenv-virtualenv 官網資料")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/pyenv/pyenv-virtualenv",target:"_blank",rel:"noopener noreferrer"}},[s._v("pyenv-virtualenv"),n("OutboundLink")],1)]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);