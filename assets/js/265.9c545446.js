(window.webpackJsonp=window.webpackJsonp||[]).push([[265],{554:function(s,a,e){"use strict";e.r(a);var n=e(10),t=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"netplan-設定指引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#netplan-設定指引"}},[s._v("#")]),s._v(" netplan 設定指引")]),s._v(" "),a("h2",{attrs:{id:"摘要"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#摘要"}},[s._v("#")]),s._v(" 摘要")]),s._v(" "),a("p",[s._v("透過指令模式，在 Ubuntu 20.04 設定網路介面，其方式約有兩種：")]),s._v(" "),a("ul",[a("li",[s._v("netplan")]),s._v(" "),a("li",[s._v("Network Manager")])]),s._v(" "),a("p",[s._v("據聞自 Ubuntu 22.04 開始，使用 netplan 方式來設定將成主流。")]),s._v(" "),a("p",[s._v("以下之操作，需在伺服器本機上執行；不能透過 ssh 連線，在 ssh client\n端，進行遠端操作。")]),s._v(" "),a("h2",{attrs:{id:"作業程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#作業程序"}},[s._v("#")]),s._v(" 作業程序")]),s._v(" "),a("h3",{attrs:{id:"_1-查詢作業系統已能辨識到的網路介面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-查詢作業系統已能辨識到的網路介面"}},[s._v("#")]),s._v(" 1. 查詢作業系統已能辨識到的網路介面")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),s._v(" a\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-查詢-netplan-使用的預設目錄中-已有那些設定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-查詢-netplan-使用的預設目錄中-已有那些設定"}},[s._v("#")]),s._v(" 2. 查詢 netplan 使用的預設目錄中，已有那些設定")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ls -al /etc/netplan\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_3-預覽已有之設定檔內容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-預覽已有之設定檔內容"}},[s._v("#")]),s._v(" 3. 預覽已有之設定檔內容")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cat /etc/netplan/*.yaml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_4-建立自己使用的「設定檔」"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-建立自己使用的「設定檔」"}},[s._v("#")]),s._v(" 4. 建立自己使用的「設定檔」")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudoedit /etc/netplan/01-network-manager-all.yaml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("【檔案內容】：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("network:\n  version: 2\n  renderer: NetworkManager\n  ethernets:\n    eno1:\n      dhcp6: no\n      dhcp4: no\n      addresses: [192.168.66.10/24]\n      gateway4: 192.168.66.1\n      nameservers:\n        addresses: [8.8.8.8]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("【Virtual Bridge Configuration】:")]),s._v(" "),a("p",[s._v("00-virtual-bridge.yaml")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("network:\n  version: 2\n  renderer: NetworkManager\n  ethernets:\n    eno1:\n      dhcp4: no\n      dhcp6: no\n  bridges:\n    br0:\n      interfaces: [eno1]\n      addresses:\n        - 192.168.66.10/24\n      nameservers:\n        addresses: [192.168.66.1, 8.8.8.8]\n      routes:\n        - to: default\n          via: 192.168.66.1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h3",{attrs:{id:"_5-測試「設定檔」內容無誤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-測試「設定檔」內容無誤"}},[s._v("#")]),s._v(" 5. 測試「設定檔」內容無誤")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo netplan try\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_6-啟用「設定檔」-用以設定網路介面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-啟用「設定檔」-用以設定網路介面"}},[s._v("#")]),s._v(" 6. 啟用「設定檔」，用以設定網路介面")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo netplan apply\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_7-重啟作業系統的網路服務"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-重啟作業系統的網路服務"}},[s._v("#")]),s._v(" 7. 重啟作業系統的網路服務")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo systemctl restart network-manager\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_8-驗證-ip-位址是否如設定檔所指定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-驗證-ip-位址是否如設定檔所指定"}},[s._v("#")]),s._v(" 8. 驗證 IP 位址是否如設定檔所指定")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ip a\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"參考資料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#參考資料"}},[s._v("#")]),s._v(" 參考資料")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://vitux.com/how-to-configure-networking-with-netplan-on-ubuntu/",target:"_blank",rel:"noopener noreferrer"}},[s._v("How to configure networking with Netplan on Ubuntu"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=t.exports}}]);