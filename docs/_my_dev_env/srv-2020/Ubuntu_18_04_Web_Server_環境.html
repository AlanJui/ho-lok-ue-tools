<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ubuntu 18.04 Web Server 環境 | 《專案文件舘》</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="彙集專案相關文件">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/ho-lok-ue-tools/assets/css/0.styles.3fb4eb42.css" as="style"><link rel="preload" href="/ho-lok-ue-tools/assets/js/app.775b2e5a.js" as="script"><link rel="preload" href="/ho-lok-ue-tools/assets/js/2.e9bdfe5b.js" as="script"><link rel="preload" href="/ho-lok-ue-tools/assets/js/259.02650516.js" as="script"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/10.f716d3ff.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/100.c1f4de65.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/101.e14056d5.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/102.5a78f801.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/103.e198a428.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/104.449b67e1.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/105.825b86d6.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/106.173be714.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/107.03f96c6c.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/108.57957213.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/109.0a4b39eb.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/11.3e9ab894.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/110.28b6eddf.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/111.802a4ef3.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/112.8fb9f4c0.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/113.163f649e.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/114.8da6ef94.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/115.6ccf8b33.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/116.f901450e.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/117.4898b362.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/118.80d06981.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/119.d7c7dead.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/12.4a40a2fa.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/120.1955a557.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/121.1865eac8.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/122.1d79306c.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/123.df62f490.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/124.4a9f1fcb.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/125.d294aced.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/126.0558f46b.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/127.71e4ae03.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/128.cf355591.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/129.29c3a2f4.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/13.c3911464.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/130.21e8b50e.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/131.2a22915e.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/132.23c7e418.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/133.b40de47b.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/134.3b21be27.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/135.e33241e8.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/136.e1fad00a.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/137.4d051254.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/138.f95b7b98.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/139.2b8d3e50.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/14.c9886b34.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/140.1b8e8cd0.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/141.ff03f551.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/142.8de335ef.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/143.21c1dfd2.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/144.6b438904.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/145.dd73b692.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/146.a5721fc9.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/147.be2503d7.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/148.3012abdb.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/149.5172325c.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/15.0cce8ecb.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/150.5304d46a.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/151.7e699c3e.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/152.6fb52d1e.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/153.eaa379eb.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/154.e4a08e57.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/155.2a0dcb32.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/156.e3e555c3.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/157.ef0d4e6a.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/158.0f2b45b2.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/159.e58cd5cc.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/16.fa6f05c6.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/160.b14498b4.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/161.6f58600a.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/162.5088d732.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/163.cdfabcd3.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/164.33af30e6.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/165.82251337.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/166.729d4da0.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/167.5021a127.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/168.82153370.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/169.0aad21a9.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/17.6e726f1c.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/170.57bd13b4.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/171.23ff00be.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/172.364d6e16.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/173.efa01f08.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/174.69d30215.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/175.265d6949.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/176.008e238b.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/177.822a15ec.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/178.d1eee661.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/179.956fe469.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/18.ef4acaed.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/180.bb68de5c.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/181.6ca43cc3.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/182.b784ea03.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/183.cf75a717.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/184.a486267a.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/185.35a0a735.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/186.67964623.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/187.13410beb.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/188.962c6776.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/189.4786f58b.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/19.ee358577.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/190.c4e5a3ad.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/191.ab08e553.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/192.e1b26e5b.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/193.95d606b4.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/194.2931aac2.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/195.66817182.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/196.3841de25.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/197.6d0aa566.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/198.f0525295.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/199.ae76c070.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/20.bc7c4e1d.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/200.c57f2a39.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/201.d63f8f6a.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/202.f9e03aa9.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/203.95ffec51.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/204.3787443f.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/205.27e200a2.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/206.45652af0.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/207.6fcd649c.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/208.3c2a60e9.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/209.feeb4956.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/21.46ede3be.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/210.6401ff88.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/211.cfb8dc53.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/212.3ddf2b32.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/213.647e2ffe.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/214.8e117d35.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/215.d0b0e2bc.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/216.bc2d671c.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/217.6371c831.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/218.ec43176a.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/219.d69f53c2.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/22.ef8c5802.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/220.ca6bdcd4.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/221.e36810e6.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/222.715b43c0.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/223.808a43ec.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/224.e4df9237.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/225.6d08d9a9.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/226.4a72d290.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/227.93c9df65.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/228.89cf25a3.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/229.27539a77.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/23.74ec33ae.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/230.7c6e9ab3.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/231.384f9a9c.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/232.c03f5450.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/233.a50b7053.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/234.e24679d8.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/235.15fc49c0.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/236.03949180.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/237.077ec90b.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/238.84598708.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/239.43007d0a.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/24.dfaf327e.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/240.2df91873.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/241.8c70ef29.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/242.3066009f.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/243.1ff09887.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/244.30430b7f.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/245.8a9f17c6.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/246.473b271a.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/247.edc9641e.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/248.6f7f74e5.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/249.24762885.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/25.50731498.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/250.cc52a908.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/251.87f791a2.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/252.1e285f58.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/253.d783bd23.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/254.bbeda6d8.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/255.1601d594.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/256.644af9ee.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/257.369bfcaf.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/258.95ae1b47.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/26.7308cd5b.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/260.49df9ac8.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/261.7018bbf8.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/262.b7de7d79.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/263.67fff2d7.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/264.b82abc65.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/265.9f4300d1.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/266.868fd3db.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/267.c47ce979.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/268.d0ab9778.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/269.3b3efc3e.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/27.79b71a65.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/270.4f788569.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/271.4fe4a762.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/272.dbf51e85.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/273.cb605436.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/274.0efe455c.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/275.5bc2a05c.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/276.7762b2b9.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/277.4724df32.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/278.7e88e133.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/279.d117afb1.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/28.96c7e30c.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/280.1747c540.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/281.1df8dad8.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/282.fb3b056e.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/283.7238e6a3.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/284.333828fb.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/285.b4db7f5d.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/286.203a528e.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/287.3c26123e.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/288.7b1abc61.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/289.f27ef80f.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/29.0be0ff39.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/290.b888b1dc.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/291.db0ad529.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/292.491ba209.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/293.6222a09d.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/294.ac3715a7.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/295.3717bceb.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/296.88ac43bd.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/297.b2519337.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/298.4094ee4b.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/299.f1b57bd4.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/3.d8645ed1.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/30.6c3af224.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/300.05acfc97.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/301.8b308b88.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/302.649b0f63.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/303.02024141.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/304.0e1196b1.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/305.b1ea83fa.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/306.0a66cafd.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/307.a06f603b.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/308.c5ff11ef.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/309.884aca03.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/31.841f3ded.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/310.06a43026.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/311.7705aadb.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/312.16c67c7e.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/313.3a6cccf5.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/314.bddfc342.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/315.6070a0d9.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/316.445c3681.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/317.6698324c.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/318.83b94f00.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/319.7fb86a94.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/32.283b7a44.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/33.dd6bc432.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/34.88232fa7.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/35.aecd5410.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/36.32967ae8.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/37.7a64c1c3.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/38.4556399d.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/39.5c25123c.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/4.c0ad8e6f.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/40.ded4cc23.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/41.f689f7c8.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/42.25c15d8a.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/43.14f65079.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/44.4b91b24a.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/45.576f776e.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/46.6da1e5cc.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/47.26ec5e48.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/48.57ab0a20.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/49.d4e60513.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/5.1d4824ad.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/50.c8b22d33.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/51.7e722fbd.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/52.a1d9c3ca.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/53.1307bc0b.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/54.b5a24f6d.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/55.cdb5d728.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/56.f2597707.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/57.51fbeade.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/58.1d44d18d.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/59.1e7f06e4.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/6.66e67cb9.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/60.6e5f31d7.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/61.3deb5ffc.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/62.1cf89df2.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/63.0f78d5dd.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/64.cd3cc6fd.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/65.dfba7b5a.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/66.fd2de134.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/67.6a554fd7.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/68.b8b1404c.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/69.80992696.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/7.51ae61fb.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/70.d3126764.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/71.a2e07128.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/72.b5189fa6.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/73.367f0392.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/74.f315c04a.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/75.1aa88d55.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/76.41b88fff.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/77.c6d47945.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/78.f3084837.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/79.8c5a82d4.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/8.cca18fcf.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/80.975fdb87.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/81.efc8d138.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/82.fccf7493.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/83.2978c41b.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/84.81ab4e00.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/85.a3074c64.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/86.6813c6c5.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/87.2693fb7f.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/88.3506e2f0.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/89.7a73b80d.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/9.4a24de8d.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/90.6d7286c6.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/91.65b2c391.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/92.097a6e9a.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/93.aeac5506.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/94.4c8e5a25.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/95.2972011e.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/96.2fdaa548.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/97.be960e26.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/98.39761100.js"><link rel="prefetch" href="/ho-lok-ue-tools/assets/js/99.a045c282.js">
    <link rel="stylesheet" href="/ho-lok-ue-tools/assets/css/0.styles.3fb4eb42.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ho-lok-ue-tools/" class="home-link router-link-active"><!----> <span class="site-name">《專案文件舘》</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ho-lok-ue-tools/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/ho-lok-ue-tools/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ho-lok-ue-tools/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/ho-lok-ue-tools/config/" class="nav-link">
  Config
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>作業指引</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ho-lok-ue-tools/d100_URS/" class="sidebar-link">使用者需求</a></li><li><a href="/ho-lok-ue-tools/d200_SRS/" class="sidebar-link">系統需求</a></li><li><a href="/ho-lok-ue-tools/d300_SDD/" class="sidebar-link">系統設計</a></li><li><a href="/ho-lok-ue-tools/d400_DEV/" class="sidebar-link">開發與測試</a></li><li><a href="/ho-lok-ue-tools/d500_OP/" class="sidebar-link">系統維運</a></li><li><a href="/ho-lok-ue-tools/d900_REF/" class="sidebar-link">參考資料</a></li><li><a href="/ho-lok-ue-tools/guide/" class="sidebar-link">作業指引</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>電腦硬體</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>開發環境</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>常用工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>參考資料</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ubuntu-18-04-web-server-環境"><a href="#ubuntu-18-04-web-server-環境" class="header-anchor">#</a> Ubuntu 18.04 Web Server 環境</h1> <ul><li>使用者帳號與群組建立</li> <li>Python環境安裝與設定</li> <li>DB服務（Postgres）安裝與設定</li> <li>網站安裝與設定</li> <li>uWSGI服務安裝與設定</li> <li>nginx服務安裝與設定</li></ul> <h1 id="使用者帳號與群組建立"><a href="#使用者帳號與群組建立" class="header-anchor">#</a> 使用者帳號與群組建立</h1> <p>以下說明在作業系統環境，應建立之使用者帳號及群組。</p> <h2 id="設定使用者與群組"><a href="#設定使用者與群組" class="header-anchor">#</a> 設定使用者與群組</h2> <p><strong>加入使用者帳號</strong></p> <div class="language- extra-class"><pre><code>$ sudo adduser juzhengzhong
$ usermod -aG sudo juzhengzhong
</code></pre></div><p><strong>先登出再使用 juzhengzhong 使用者帳號登入</strong></p> <p><strong>將登入時使用的使用者帳號加入 www-data 群組</strong></p> <div class="language- extra-class"><pre><code>$ sudo usermod -aG www-data $USER
</code></pre></div><p><strong>驗證設定成功：</strong></p> <p>先登出，再登入才能執行下列驗證指令。</p> <div class="language- extra-class"><pre><code>$ groups


$ groups
juzhengzhong root adm sudo www-data sambashare docker
$ id
uid=1003(juzhengzhong) gid=1004(juzhengzhong) 群組=1004(juzhengzhong),0(root),4(adm),27(sudo),33(www-data),126(sambashare),999(docker)
</code></pre></div><hr> <h1 id="python環境安裝與設定"><a href="#python環境安裝與設定" class="header-anchor">#</a> Python環境安裝與設定</h1> <p><strong>更新作業系統套件庫。</strong></p> <div class="language- extra-class"><pre><code>sudo apt-get update
sudo apt-get upgrade
</code></pre></div><p><strong>檢查作業系統預先安裝之 python 3 是否存在，且能正常運作。</strong></p> <div class="language- extra-class"><pre><code># check if installed
python3.6 --version
==&gt; Python 3.6.5
</code></pre></div><p><strong>在作業系統安裝 pip3 套件。</strong></p> <div class="language- extra-class"><pre><code>$ sudo apt install python3-pip
# Check if installed successfully
$ pip3 --version
pip 9.0.1 from /usr/lib/python3/dist-packages (python 3.6)
</code></pre></div><p><strong>安裝  python 3 之 virtualenv 套件。</strong></p> <div class="language- extra-class"><pre><code>$ sudo -H pip3 install virtualenv


$ sudo -H pip3 install virtualenv
Requirement already satisfied: virtualenv in /usr/local/lib/python3.6/dist-packages
</code></pre></div><p><strong>安裝  python 3 之 pipenv 套件。</strong></p> <div class="language- extra-class"><pre><code>$ sudo -H pip3 install pipenv


$ sudo -H pip3 install pipenv
Collecting pipenv
  Downloading https://files.pythonhosted.org/packages/13/b4/3ffa55f77161cff9a5220f162670f7c5eb00df52e00939e203f601b0f579/pipenv-2018.11.26-py3-none-any.whl (5.2MB)
    100% |████████████████████████████████| 5.2MB 53kB/s
Collecting virtualenv-clone&gt;=0.2.5 (from pipenv)
  Downloading https://files.pythonhosted.org/packages/e3/d9/d9c56deb483c4d3289a00b12046e41428be64e8236fa210111a1f57cc42d/virtualenv_clone-0.5.1-py2.py3-none-any.whl
Requirement already satisfied: setuptools&gt;=36.2.1 in /usr/lib/python3/dist-packages (from pipenv)
Requirement already satisfied: certifi in /usr/lib/python3/dist-packages (from pipenv)
Requirement already satisfied: pip&gt;=9.0.1 in /usr/lib/python3/dist-packages (from pipenv)
Requirement already satisfied: virtualenv in /usr/local/lib/python3.6/dist-packages (from pipenv)
Installing collected packages: virtualenv-clone, pipenv
Successfully installed pipenv-2018.11.26 virtualenv-clone-0.5.1
</code></pre></div><hr> <h1 id="db服務-postgres-安裝與設定"><a href="#db服務-postgres-安裝與設定" class="header-anchor">#</a> DB服務（Postgres）安裝與設定</h1> <h2 id="安裝-postgres-套件"><a href="#安裝-postgres-套件" class="header-anchor">#</a> 安裝 Postgres 套件</h2> <p><strong>安裝指令：</strong></p> <div class="language- extra-class"><pre><code>$ sudo apt install postgresql postgresql-contrib
</code></pre></div><p><strong>摘要：</strong></p> <p>程式： /var/lib/postgresql/11/main/</p> <p>重新啟動 Postgres Database Server：  /usr/lib/postgresql/11/bin/pg_ctl -D /var/lib/postgresql/11/main -l logfile start</p> <p>Ver Cluster Port Status Owner    Data directory              Log file
11  main    5432 down   postgres /var/lib/postgresql/11/main /var/log/postgresql/postgresql-11-main.log
update-alternatives: using /usr/share/postgresql/11/man/man1/postmaster.1.gz to provide /usr/share/man/man1/postmaster.1.gz (postmaster.1.gz) in auto mode</p> <p><strong>驗證安裝</strong></p> <div class="language- extra-class"><pre><code>$ sudo -u postgres psql -c &quot;SELECT version();&quot;
</code></pre></div><h2 id="操作-psql"><a href="#操作-psql" class="header-anchor">#</a> 操作 psql</h2> <p><strong>方法一：不切換使用者帳號操作法</strong></p> <div class="language- extra-class"><pre><code>juzhengzhong@SRV-01:~$ sudo -u postgres psql
psql (11.2 (Ubuntu 11.2-1.pgdg18.04+1))
Type &quot;help&quot; for help.

postgres=# \q
juzhengzhong@SRV-01:~$
</code></pre></div><p><strong>方法二：先切換成 postgres 帳號操作法</strong></p> <div class="language- extra-class"><pre><code>juzhengzhong@SRV-01:~$ sudo su - postgres
postgres@SRV-01:~$ psql
psql (11.2 (Ubuntu 11.2-1.pgdg18.04+1))
Type &quot;help&quot; for help.

postgres=# \q
postgres@SRV-01:~$ exit
登出
juzhengzhong@SRV-01:~$1
</code></pre></div><h2 id="建立-role-與-database-授權"><a href="#建立-role-與-database-授權" class="header-anchor">#</a> 建立 Role 與 Database 授權</h2> <p><strong>建立資料庫系統之使用者帳號</strong></p> <div class="language- extra-class"><pre><code>$ sudo su - postgres -c &quot;createuser django2_helloworld&quot;
</code></pre></div><p><strong>建立資料庫</strong></p> <div class="language- extra-class"><pre><code>$ sudo su - postgres -c &quot;createdb django2_helloworld_db&quot;
</code></pre></div><p><strong>設定資料庫使用者與其操作權限</strong></p> <div class="language- extra-class"><pre><code>$ sudo -u postgres psql
psql (11.2 (Ubuntu 11.2-1.pgdg18.04+1))
Type &quot;help&quot; for help.

postgres=# grant all privileges on database django2_helloworld_db to django2_helloworld;
GRANT
postgres=# alter role django2_helloworld with password 'Passw0rd';
ALTER ROLE
postgres=# \q
$
</code></pre></div><p><strong>刪除資料庫使用者</strong></p> <div class="language- extra-class"><pre><code>$ sudo su - postgres -c &quot;dropuser django2_helloworld&quot;
</code></pre></div><hr> <h1 id="設定網站-web-sites"><a href="#設定網站-web-sites" class="header-anchor">#</a> 設定網站（Web Sites）</h1> <h2 id="安裝及設定-django-網站"><a href="#安裝及設定-django-網站" class="header-anchor">#</a> 安裝及設定 Django 網站</h2> <p><strong>安裝網站所需檔案</strong></p> <p>將 Django 網站所有檔案，放入如下路徑處：</p> <div class="language- extra-class"><pre><code>$ mkdir -p ~/workspace/django &amp;&amp; cd $_
$ git clone &lt;RepoPath&gt;
</code></pre></div><p><strong>設定檔案擁有者及其權限</strong></p> <div class="language- extra-class"><pre><code>$ sudo chown -R $USER:www-data django2_helloworld/
$ sudo chmod -R 775 django2_helloworld/
</code></pre></div><p><strong>安裝 Python 套件</strong></p> <div class="language- extra-class"><pre><code>$ cd django2_helloworld
$ python3 --version
$ pipenv --python 3.7.2
$ pipenv install -r requirements.txt
$ pipenv shell
</code></pre></div><p><s><strong>設定 django 運作環境</strong></s></p> <div class="language- line-numbers-mode"><pre class="language-text"><code></code></pre> <div class="line-numbers-wrapper"></div></div><div class="language- extra-class"><pre><code>$ export django2_helloworld=&quot;staging&quot;
</code></pre></div><p><strong>設定 django 資料庫</strong></p> <div class="language- extra-class"><pre><code>$ ./manage.py migrate
$ ./manage.py createsuperuser    # juzhengzhong: juzhengzhong@gmail.com
</code></pre></div><p>【註】： 建置開發環境使用的 SQLite 資料庫</p> <div class="language- extra-class"><pre><code> $ DJANGO_SETTINGS_MODULE=web_site.settings.dev ./manage.py migrate 
 $ DJANGO_SETTINGS_MODULE=web_site.settings.dev ./manage.py createsuperuser 
</code></pre></div><p><strong>設定 static 檔案</strong></p> <div class="language- extra-class"><pre><code>$ ./manage.py collectstatic
</code></pre></div><hr> <h1 id="uwsgi-服務安裝與設定"><a href="#uwsgi-服務安裝與設定" class="header-anchor">#</a> uwsgi 服務安裝與設定</h1> <p>為使 uwsgi service 能正常運作，Django 2 App 的「多環境設定」務必應有如下之配合：</p> <p><strong>managy.py</strong></p> <div class="language- extra-class"><pre><code>#!/usr/bin/env python
import os
import sys

if __name__ == &quot;__main__&quot;:
    os.environ.setdefault(&quot;DJANGO_SETTINGS_MODULE&quot;, &quot;web_site.settings.prod&quot;)
    try:
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        raise ImportError(
            &quot;Couldn't import Django. Are you sure it's installed and &quot;
            &quot;available on your PYTHONPATH environment variable? Did you &quot;
            &quot;forget to activate a virtual environment?&quot;
        ) from exc
    execute_from_command_line(sys.argv)
</code></pre></div><p><strong>wsgi.py</strong></p> <div class="language- extra-class"><pre><code>&quot;&quot;&quot;
WSGI config for web_site project.

It exposes the WSGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/2.0/howto/deployment/wsgi/
&quot;&quot;&quot;

import os

from django.core.wsgi import get_wsgi_application

# os.environ.setdefault(&quot;DJANGO_SETTINGS_MODULE&quot;, &quot;web_site.settings&quot;)
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'web_site.settings.prod')

application = get_wsgi_application()
</code></pre></div><p><strong>base.py</strong></p> <div class="language- extra-class"><pre><code>&quot;&quot;&quot;
Django settings for web_site project.

Generated by 'django-admin startproject' using Django 2.0.

For more information on this file, see
https://docs.djangoproject.com/en/2.0/topics/settings/

For the full list of settings and their values, see
https://docs.djangoproject.com/en/2.0/ref/settings/
&quot;&quot;&quot;

import os

# Build paths inside the project like this: os.path.join(BASE_DIR, ...)
BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))

# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/2.0/howto/deployment/checklist/

# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = '7g@&amp;s!bkka+)w70=9=t2+%&amp;r7um_!dg!7^5^yso%on@w&amp;u&amp;7g6'

# SECURITY WARNING: don't run with debug turned on in production!
# DEBUG= True

ALLOWED_HOSTS = [
    '127.0.0.1',
    'localhost',
]

# Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'whitenoise.runserver_nostatic',
    'django.contrib.staticfiles',

    # Libs
    'crispy_forms',

    # My Apps
    'pages.apps.PagesConfig',
    'posts.apps.PostsConfig',
    'books.apps.BooksConfig',
    'accounts.apps.AccountsConfig',
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'whitenoise.middleware.WhiteNoiseMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',

    # My MiddleWare
]

ROOT_URLCONF = 'web_site.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [
            os.path.join(BASE_DIR, 'templates'),
        ],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'web_site.wsgi.application'

# Database
# https://docs.djangoproject.com/en/2.0/ref/settings/#databases

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),
    }
}


# Password validation
# https://docs.djangoproject.com/en/2.0/ref/settings/#auth-password-validators

AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]


# Internationalization
# https://docs.djangoproject.com/en/2.0/topics/i18n/

LANGUAGE_CODE = 'en-us'

TIME_ZONE = 'UTC'

USE_I18N = True

USE_L10N = True

USE_TZ = True


# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/2.0/howto/static-files/

STATIC_URL = '/static/'

# location where you will store your static files
STATICFILES_DIRS = [
    os.path.join(BASE_DIR, &quot;../static&quot;),
]

# The absolute path to the directory where collectstatic will collect static files for deployment.
STATIC_ROOT = os.path.join(BASE_DIR, '../staticfiles')

# Simplified static file serving.
# https://warehouse.python.org/project/whitenoise/
# Document Ref: http://whitenoise.evans.io/en/stable/django.html
STATICFILES_STORAGEGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage'

# Media Files
MEDIA_ROOT = os.path.join(BASE_DIR, '../media')
MEDIA_URL = '/media/'

# User Account Management
LOGIN_REDIRECT_URL = 'pages:home'
LOGOUT_REDIRECT_URL = 'pages:home'
AUTH_USER_MODEL = 'accounts.CustomUser'

# Form formatting
CRISPY_TEMPLATE_PACK = 'bootstrap4'
</code></pre></div><p><strong>dev.py</strong></p> <div class="language- extra-class"><pre><code>from .base import *

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = True

# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/2.0/howto/deployment/checklist/

ALLOWED_HOSTS = [
    '127.0.0.1',
    '0.0.0.0',
]

# Database
# https://docs.djangoproject.com/en/2.0/ref/settings/#databases

if 'DATABASE_HOST' in os.environ:
    DATABASES\['default'\]['HOST'] = os.getenv('DATABASE_HOST')
    DATABASES\['default'\]['ENGINE'] = 'django.db.backends.postgresql_psycopg2'
    DATABASES\['default'\]['NAME'] = os.getenv('DATABASE_NAME')
    DATABASES\['default'\]['USER'] = os.getenv('DATABASE_USER')
    DATABASES\['default'\]['PASSWORD'] = os.getenv('DATABASE_PASSWORD')

    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.postgresql_psycopg2',
            'NAME': 'django2_helloworld_db',
            'USER': 'django2_helloworld',
            'PASSWORD': 'Passw0rd',
            'HOST': 'localhost',
            'PORT': '5432',
        }
    }
else:
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.sqlite3',
            'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),
        }
    }


# Contact Us From
EMAIL_BACKEND = 'django.core.mail.backends.console.EmailBackend'

# BASE_URL required for notification emails
BASE_URL = 'http://localhost:8000'
</code></pre></div><p><strong>prod.py</strong></p> <div class="language- extra-class"><pre><code># from web_site.settings.base import *
from .base import *

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = False

ALLOWED_HOSTS = [
    '127.0.0.1',
    '192.168.66.10',
    'localhost',
    'www.ccc99.tw',
]

DATABASES = {
   'default': {
       'ENGINE': 'django.db.backends.postgresql_psycopg2',
       'NAME': 'django2_helloworld_db',
       'USER': 'django2_helloworld',
       'PASSWORD': 'Passw0rd',
       'HOST': 'localhost',
       'PORT': '5432',
   }
}

DATABASE_URL = 'postgres://django2_helloworld:Passw0rd@localhost:5432/django2_hellowrold_db'
</code></pre></div><p><strong>heroku.py</strong></p> <div class="language- extra-class"><pre><code># from web_site.settings.base import *
from .base import *
import django_heroku
import dj_database_url

# Set environment variables (SECRET_KEY and others)
EMAIL_HOST_USER = os.environ.get('EMAIL_HOST_USER')
EMAIL_HOST_PASSWORD = os.environ.get('EMAIL_HOST_PASSWORD')

# SECURITY WARNING: keep the secret key used in production secret!
# SECRET_KEY = 'CHANGE_ME!!!! (P.S. the SECRET_KEY environment variable will be used, if set, instead).'
# SECRET_KEY = os.environ.get('SECRET_KEY')

# SECURITY WARNING: don't run with debug turned on in production!
# DEBGUG = True
DEBUG = bool(os.environ.get('DJANGO_DEBUG', True))

# # Quick-start development settings - unsuitable for production
# # See https://docs.djangoproject.com/en/2.0/howto/deployment/checklist/

ALLOWED_HOSTS = [
    '127.0.0.1',
    'localhost',
    '.herokuapp.com',
    'serene-crag-30137.herokuapp.com',
]

# Database
# https://docs.djangoproject.com/en/2.0/ref/settings/#databases

# Heroku: Update database configuration from $DATABASE_URL
db_from_env = dj_database_url.config(conn_max_age=500)
DATABASES['default'].update(db_from_env)

django_heroku.settings(locals())
</code></pre></div><p><strong>urls.py</strong></p> <div class="language- extra-class"><pre><code>&quot;&quot;&quot;web_site URL Configuration

The `urlpatterns` list routes URLs to views. For more information please see:
    https://docs.djangoproject.com/en/2.0/topics/http/urls/
Examples:
Function views
    1. Add an import:  from my_app import views
    2. Add a URL to urlpatterns:  path('', views.home, name='home')
Class-based views
    1. Add an import:  from other_app.views import Home
    2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')
Including another URLconf
    1. Import the include() function: from django.urls import include, path
    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))
&quot;&quot;&quot;
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('accounts/', include('accounts.urls')),
    path('accounts/', include('django.contrib.auth.urls')),
    path('books/', include('books.urls')),
    path('posts/', include('posts.urls')),
    path('', include('pages.urls')),
]
</code></pre></div><h2 id="安裝-uwsgi-套件"><a href="#安裝-uwsgi-套件" class="header-anchor">#</a> 安裝 uwsgi 套件</h2> <ol><li><p><strong>以 Global 方式安裝 uwsgi</strong></p> <p>$ sudo -H pip3 install uwsgi</p> <p>$ sudo -H pip3 install uwsgi
Collecting uwsgi
Downloading https://files.pythonhosted.org/packages/e7/1e/3dcca007f974fe4eb369bf1b8629d5e342bb3055e2001b2e5340aaefae7a/uwsgi-2.0.18.tar.gz (801kB)
100% |████████████████████████████████| 808kB 1.8MB/s
Building wheels for collected packages: uwsgi
Running setup.py bdist_wheel for uwsgi ... done
Stored in directory: /root/.cache/pip/wheels/2d/0c/b0/f3ba1bbce35c3766c9dac8c3d15d5431cac57e7a8c4111c268
Successfully built uwsgi
Installing collected packages: uwsgi
Successfully installed uwsgi-2.0.18
$ uwsgi --version
2.0.18</p></li> <li><p><strong>驗證 uwsgi 已能正常運作</strong></p> <p>$ cd ~/workspace/django/django2_helloworld
$ pipenv install -r requirements.txt  # 產生 .venv
$ uwsgi --http 0.0.0.0:8000 --home ~/workspace/django/django2_helloworld/.venv/ --chdir ~/workspace/django/django2_helloworld  --wsgi-file ~/workspace/django/django2_helloworld/web_site/wsgi.py</p> <p>$ uwsgi --http 0.0.0.0:8000 --home ~/workspace/django/django2_helloworld/.venv/ --chdir ~/workspace/django/django2_helloworld  --wsgi-file ~/workspace/django/django2_helloworld/web_site/wsgi.py
*** Starting uWSGI 2.0.18 (64bit) on [Mon Apr  1 21:07:21 2019] ***
compiled with version: 7.3.0 on 01 April 2019 12:42:54
os: Linux-4.15.0-46-generic #49-Ubuntu SMP Wed Feb 6 09:33:07 UTC 2019
nodename: SRV-01
machine: x86_64
clock source: unix
pcre jit disabled
detected number of CPU cores: 8
current working directory: /home/juzhengzhong/workspace/django/django2_helloworld
detected binary path: /usr/local/bin/uwsgi
chdir() to /home/juzhengzhong/workspace/django/django2_helloworld
*** WARNING: you are running uWSGI without its master process manager ***
your processes number limit is 63633
your memory page size is 4096 bytes
detected max file descriptor number: 1024
lock engine: pthread robust mutexes
thunder lock: disabled (you can enable it with --thunder-lock)
uWSGI http bound on 0.0.0.0:8000 fd 4
spawned uWSGI http 1 (pid: 29795)
uwsgi socket 0 bound to TCP address 127.0.0.1:34649 (port auto-assigned) fd 3
Python version: 3.6.7 (default, Oct 22 2018, 11:32:17)  [GCC 8.2.0]
Set PythonHome to /home/juzhengzhong/workspace/django/django2_helloworld/.venv/
*** Python threads support is disabled. You can enable it with --enable-threads ***
Python main interpreter initialized at 0x55987cc93030
your server socket listen backlog is limited to 100 connections
your mercy for graceful operations on workers is 60 seconds
mapped 72920 bytes (71 KB) for 1 cores
*** Operational MODE: single process ***
/home/juzhengzhong/workspace/django/django2_helloworld/.venv/lib/python3.6/site-packages/psycopg2/<strong>init</strong>.py:144: UserWarning: The psycopg2 wheel package will be renamed from release 2.8; in order to keep installing from binary please use &quot;pip install psycopg2-binary&quot; instead. For details see: <a href="http://initd.org/psycopg/docs/install.html#binary-install-from-pypi" target="_blank" rel="noopener noreferrer">http://initd.org/psycopg/docs/install.html#binary-install-from-pypi<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
&quot;&quot;&quot;)
WSGI app 0 (mountpoint='') ready in 0 seconds on interpreter 0x55987cc93030 pid: 29794 (default app)
*** uWSGI is running in multiple interpreter mode ***
spawned uWSGI worker 1 (and the only) (pid: 29794, cores: 1)
[pid: 29794|app: 0|req: 1/1] 192.168.66.10 () {38 vars in 797 bytes} [Mon Apr  1 13:07:50 2019] GET / =&gt; generated 3450 bytes in 76 msecs (HTTP/1.1 200) 4 headers in 124 bytes (1 switches on core 0)
[pid: 29794|app: 0|req: 2/2] 192.168.66.10 () {38 vars in 780 bytes} [Mon Apr  1 13:07:50 2019] GET /static/fontawesome/fontawesome-all.css =&gt; generated 112 bytes in 2 msecs (HTTP/1.1 404) 3 headers in 101 bytes (1 switches on core 0)
[pid: 29794|app: 0|req: 3/3] 192.168.66.10 () {38 vars in 742 bytes} [Mon Apr  1 13:07:50 2019] GET /static/css/base.css =&gt; generated 93 bytes in 1 msecs (HTTP/1.1 404) 3 headers in 100 bytes (1 switches on core 0)
[pid: 29794|app: 0|req: 4/4] 192.168.66.10 () {40 vars in 851 bytes} [Mon Apr  1 13:07:53 2019] GET /posts/ =&gt; generated 3799 bytes in 15 msecs (HTTP/1.1 200) 4 headers in 124 bytes (1 switches on core 0)
[pid: 29794|app: 0|req: 5/5] 192.168.66.10 () {38 vars in 786 bytes} [Mon Apr  1 13:07:53 2019] GET /static/fontawesome/fontawesome-all.css =&gt; generated 112 bytes in 2 msecs (HTTP/1.1 404) 3 headers in 101 bytes (1 switches on core 0)
[pid: 29794|app: 0|req: 6/6] 192.168.66.10 () {38 vars in 748 bytes} [Mon Apr  1 13:07:53 2019] GET /static/css/base.css =&gt; generated 93 bytes in 1 msecs (HTTP/1.1 404) 3 headers in 100 bytes (1 switches on core 0)</p></li></ol> <h2 id="設定-uwsgi-執行環境"><a href="#設定-uwsgi-執行環境" class="header-anchor">#</a> 設定 uwsgi 執行環境</h2> <p>注意：以下之作業之前，需先以 juzhengzhong 使用者帳號登入。</p> <ol><li><p><strong>建立 uwsgi 目錄</strong></p> <p>$ mkdir -p ~/uwsgi/sites</p></li> <li><p><strong>建立 ini 執行設定檔</strong></p> <p>$ cd ~/uwsgi/sites
$ nano django2_helloworld_uwsgi.ini</p></li></ol> <p>django2_helloworld_uwsgi.ini :</p> <div class="language- extra-class"><pre><code>[uwsgi]
home = /home/juzhengzhong/workspace/django/django2_helloworld/.venv/
chdir = /home/juzhengzhong/workspace/django/django2_helloworld
wsgi-file = /home/juzhengzhong/workspace/django/django2_helloworld/web_site/wsgi.py
http = 0.0.0.0:8000
</code></pre></div><ol start="3"><li><p><strong>驗證 ini 檔已能正常執行</strong></p> <p>$ uwsgi --ini /home/juzhengzhong/uwsgi/sites/django2_helloworld_uwsgi.ini</p></li></ol> <h2 id="建立-uwsgi-service"><a href="#建立-uwsgi-service" class="header-anchor">#</a> 建立 uwsgi service</h2> <ol><li><p><strong>建立 uwsgi service</strong></p> <p>$ sudo nano /etc/systemd/system/uwsgi.service</p></li></ol> <p>uwsgi.service:</p> <div class="language- extra-class"><pre><code>[Unit]
Description=uWSGI Emperor service
[Service]
ExecStartPre=/bin/bash -c 'mkdir -p /run/uwsgi; chown juzhengzhong:www-data /run/uwsgi'
ExecStart=/usr/local/bin/uwsgi --emperor /home/juzhengzhong/uwsgi/sites
Restart=always
KillSignal=SIGQUIT
Type=notify
NotifyAccess=all
[Install]
WantedBy=multi-user.target
</code></pre></div><p>【註】： uwsgi 與 nginx 之溝通，將透過 unix socket 檔案，該檔案名稱為：<strong>django_helloworld.sock</strong> ，置於目錄路徑： <strong>/home/juzhengzhong/uwsgi/</strong> 處。</p> <ol start="2"><li>啟用 uwsgi service
$ sudo systemctl enable uwsgi</li></ol> <h2 id="設定-nginx-網站與-uwsgi-溝通之設定檔"><a href="#設定-nginx-網站與-uwsgi-溝通之設定檔" class="header-anchor">#</a> <strong>設定 nginx 網站與 uwsgi 溝通之設定檔</strong></h2> <p>建立設定檔</p> <div class="language- extra-class"><pre><code>$ sudo nano /home/juzhengzhong/uwsgi/sites/django2_helloworld_uwsgi.ini
</code></pre></div><p>django2_helloworld_uwsgi.ini</p> <div class="language- extra-class"><pre><code>[uwsgi]

# Initial
#home = /home/juzhengzhong/workspace/django/django2_helloworld/.venv/
#chdir = /home/juzhengzhong/workspace/django/django2_helloworld
#wsgi-file = /home/juzhengzhong/workspace/django/django2_helloworld/web_site/wsgi.py
#http = 0.0.0.0:8000

# defines directives here
uid             = juzhengzhong
gid             = www-data
user            = juzhengzhong
user_path       = /home/%(user)
base            = %(user_path)/workspace/django
project         = django2_helloworld
site            = web_site

# =======================
# Django-related settings
# =======================

# the project base directory (full path) : /app/django2_helloworld
chdir           = %(base)/%(project)

# Django's wsgi file : web_site.wsgi:application
wsgi-file       = %(chdir)/%(site)/wsgi.py

# Python Home
home            = %(chdir)/.venv

# ========================
# process-related settings
# ========================

# master
#master          = true
# maximum number of worker processes
#processes       = 4
#threads         = 2

# the socket (use the full path to be safe)
socket          = %(user_path)/uwsgi/%(project).sock

# ... with appropriate permissions - may be needed
chown-socket    = %(uid):%(gid)

chmod-socket    = 660

# clear environment on exit
vacuum          = true

#disable-loggine  = false
#log             = file
#logto           = /var/log/uwsgi/%(project)
</code></pre></div><p><strong>uwsgi service 正常啟動</strong></p> <div class="language- extra-class"><pre><code>$ sudo service uwsgi status
● uwsgi.service - uWSGI Emperor service
   Loaded: loaded (/etc/systemd/system/uwsgi.service; enabled; vendor preset: enabled)
   Active: active (running) since Fri 2019-04-05 11:40:34 CST; 2s ago
  Process: 24321 ExecStartPre=/bin/bash -c mkdir -p /run/uwsgi; chown juzhengzhong:www-data /run/uwsgi (code=exited, status=0/SUCCESS)
 Main PID: 24329 (uwsgi)
   Status: &quot;The Emperor is governing 1 vassals&quot;
    Tasks: 3 (limit: 4915)
   CGroup: /system.slice/uwsgi.service
           ├─24329 /usr/local/bin/uwsgi --emperor /home/juzhengzhong/uwsgi/sites
           ├─24336 /usr/local/bin/uwsgi --ini django2_helloworld_uwsgi.ini
           └─24344 /usr/local/bin/uwsgi --ini django2_helloworld_uwsgi.ini

 4月 05 11:40:34 SRV-01 uwsgi[24329]: your server socket listen backlog is limited to 100 connections
 4月 05 11:40:34 SRV-01 uwsgi[24329]: your mercy for graceful operations on workers is 60 seconds
 4月 05 11:40:34 SRV-01 uwsgi[24329]: mapped 145840 bytes (142 KB) for 1 cores
 4月 05 11:40:34 SRV-01 uwsgi[24329]: *** Operational MODE: single process ***
 4月 05 11:40:36 SRV-01 uwsgi[24329]: WSGI app 0 (mountpoint='') ready in 2 seconds on interpreter 0x5590c6bea9d0 pid: 24336 (default app)
 4月 05 11:40:36 SRV-01 uwsgi[24329]: *** uWSGI is running in multiple interpreter mode ***
 4月 05 11:40:36 SRV-01 uwsgi[24329]: spawned uWSGI master process (pid: 24336)
 4月 05 11:40:36 SRV-01 uwsgi[24329]: Fri Apr  5 11:40:36 2019 - [emperor] vassal django2_helloworld_uwsgi.ini has been spawned
 4月 05 11:40:36 SRV-01 uwsgi[24329]: spawned uWSGI worker 1 (pid: 24344, cores: 1)
 4月 05 11:40:36 SRV-01 uwsgi[24329]: Fri Apr  5 11:40:36 2019 - [emperor] vassal django2_helloworld_uwsgi.ini is ready to accept requests
</code></pre></div><p><strong>uwsgi service stop</strong></p> <div class="language- extra-class"><pre><code>$ sudo service uwsgi status
● uwsgi.service - uWSGI Emperor service
   Loaded: loaded (/etc/systemd/system/uwsgi.service; enabled; vendor preset: enabled)
   Active: inactive (dead) since Fri 2019-04-05 11:48:27 CST; 2s ago
  Process: 24642 ExecStart=/usr/local/bin/uwsgi --emperor /home/juzhengzhong/uwsgi/sites (code=exited, status=0/SUCCESS)
  Process: 24632 ExecStartPre=/bin/bash -c mkdir -p /run/uwsgi; chown juzhengzhong:www-data /run/uwsgi (code=exited, status=0/SUCCESS)
 Main PID: 24642 (code=exited, status=0/SUCCESS)
   Status: &quot;The Emperor is buried.&quot;

 4月 05 11:48:24 SRV-01 uwsgi[24642]: Fri Apr  5 11:48:24 2019 - [emperor] stop the uwsgi instance django2_helloworld_uwsgi.ini
 4月 05 11:48:24 SRV-01 uwsgi[24642]: SIGINT/SIGQUIT received...killing workers...
 4月 05 11:48:24 SRV-01 uwsgi[24642]: Fri Apr  5 03:48:24 2019 - received message 0 from emperor
 4月 05 11:48:24 SRV-01 systemd[1]: Stopping uWSGI Emperor service...
 4月 05 11:48:25 SRV-01 uwsgi[24642]: worker 1 buried after 1 seconds
 4月 05 11:48:25 SRV-01 uwsgi[24642]: goodbye to uWSGI.
 4月 05 11:48:25 SRV-01 uwsgi[24642]: VACUUM: unix socket /home/juzhengzhong/uwsgi/django2_helloworld.sock removed.
 4月 05 11:48:26 SRV-01 uwsgi[24642]: Fri Apr  5 11:48:26 2019 - [emperor] removed uwsgi instance django2_helloworld_uwsgi.ini
 4月 05 11:48:27 SRV-01 uwsgi[24642]: Fri Apr  5 11:48:27 2019 - The Emperor is buried.
 4月 05 11:48:27 SRV-01 systemd[1]: Stopped uWSGI Emperor service.
</code></pre></div><h1 id="nginx服務安裝與設定"><a href="#nginx服務安裝與設定" class="header-anchor">#</a> Nginx服務安裝與設定</h1> <p>參考文件： https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-18-04</p> <h2 id="安裝-nginx-套件"><a href="#安裝-nginx-套件" class="header-anchor">#</a> <strong>安裝 nginx 套件</strong></h2> <p><strong>執行 nginx 安裝指令</strong></p> <div class="language- extra-class"><pre><code>$ sudo apt update
$ sudo apt install nginx
</code></pre></div><h2 id="設定-nginx-環境"><a href="#設定-nginx-環境" class="header-anchor">#</a> <strong>設定 nginx 環境</strong></h2> <p><strong>設定系統服務層級之 nginx 執行環境</strong></p> <ol><li><strong>變更設定檔。</strong>
$ sudo nano /etc/nginx/nginx.conf</li></ol> <p>nginx.conf 設定結果：</p> <div class="language- extra-class"><pre><code>user www-data;
worker_processes auto;
pid /run/nginx.pid;
include /etc/nginx/modules-enabled/*.conf;

events {
        worker_connections 768;
        # multi_accept on;
}

http {

        ##
        # Basic Settings
        ##

        sendfile on;
        tcp_nopush on;
        tcp_nodelay on;
        keepalive_timeout 65;
        types_hash_max_size 2048;
        # server_tokens off;

        server_names_hash_bucket_size 64;
        # server_name_in_redirect off;

        include /etc/nginx/mime.types;
        default_type application/octet-stream;

        ##
        # SSL Settings
        ##

        ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE
        ssl_prefer_server_ciphers on;

        ##
        # Logging Settings
        ##

        access_log /var/log/nginx/access.log;
        error_log /var/log/nginx/error.log;

        ##
        # Gzip Settings
        ##

        gzip on;
        gzip_disable &quot;msie6&quot;;

        # gzip_vary on;
        # gzip_proxied any;
        # gzip_comp_level 6;
        # gzip_buffers 16 8k;
        # gzip_http_version 1.1;
        # gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

        ##
        # Virtual Host Configs
        ##

        include /etc/nginx/conf.d/*.conf;
        include /etc/nginx/sites-enabled/*;
}


#mail {
#        # See sample authentication script at:
#        # http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript
# 
#        # auth_http localhost/auth.php;
#        # pop3_capabilities &quot;TOP&quot; &quot;USER&quot;;
#        # imap_capabilities &quot;IMAP4rev1&quot; &quot;UIDPLUS&quot;;
# 
#        server {
#                listen     localhost:110;
#                protocol   pop3;
#                proxy      on;
#        }
# 
#        server {
#                listen     localhost:143;
#                protocol   imap;
#                proxy      on;
#        }
#}
</code></pre></div><ol start="2"><li><p><strong>驗證設定檔內容無誤</strong></p> <p>sudo nginx -t</p> <p>$ sudo nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful</p></li></ol> <p>【參考】：<strong>nginx Service 管理指令</strong></p> <div class="language- extra-class"><pre><code>sudo service nginx status
sudo service nginx stop
sudo service nginx start
</code></pre></div><p><strong>設定網站層級之 nginx 設定</strong></p> <ol><li><p>變更<strong>網站 nginx 設定檔</strong></p> <p>$ sudo nano /etc/nginx/sites-available/django2_helloworld.conf</p></li></ol> <p>django2_helloworld.conf:</p> <div class="language- extra-class"><pre><code># configuration of the server
server {
    # the port your site will be served on
    listen          80;
    # the domain name it will serve for
    #server_name     .example.com; # substitute your machine's Ip address or FQDN
    #server_name     127.0.0.1;
    #server_name     192.168.66.10;
    server_name     www.ccc99.tw;
    charset         utf8-8;

    # max upload size
    client_max_body_size 75M;  # adjust to taste

     location = /favicon.ico {
        access_log      off;
        log_not_found   off;
    }

    # Django media
    location /media {
        alias   /home/juzhengzhong/workspace/django/django2_helloworld/media;  
    }

    # Django static
    location /static {
        alias   /home/juzhengzhong/workspace/django/django2_helloworld/staticfiles;
    }

    # Finally, send all non-media requests to the Django s2.erver
    location / {
        include         uwsgi_params; # should be located in /etc/nginx/
        uwsgi_pass      unix:/home/juzhengzhong/uwsgi/django2_helloworld.sock;
    }
}
</code></pre></div><ol start="2"><li><p><strong>啟用網站所需之 nginx 設定檔</strong>
$ sudo ln -s /etc/nginx/sites-available/django2_helloworld.conf /etc/nginx/sites-enabled/
$ sudo rm /etc/nginx/sites-enabled/default</p></li> <li><p><strong>重新啟動 nginx service</strong>
$ sudo service uwsgi restart
$ sudo service uwsgi status
$ sudo service nginx restart
$ sudo service nginx status</p></li></ol> <hr> <h1 id="https"><a href="#https" class="header-anchor">#</a> HTTPS</h1> <div class="language- extra-class"><pre><code>$ sudo add-apt-repository ppa:certbot/certbot
$ sudo apt update
$ sudo apt upgrade
$ sudo apt install python-certbot-nginx
s sudo cerbot --nginx -d ccc99.tw -d www.ccc99.tw



$ sudo cerbot --nginx -d ccc99.tw -d www.ccc99.tw
sudo: cerbot: command not found
juzhengzhong@SRV-01:~$ sudo certbot --nginx -d ccc99.tw -d www.ccc99.tw
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Plugins selected: Authenticator nginx, Installer nginx
Enter email address (used for urgent renewal and security notices) (Enter 'c' to
cancel): alanjui.1960@gmail.com

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Please read the Terms of Service at
https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf. You must
agree in order to register with the ACME server at
https://acme-v02.api.letsencrypt.org/directory
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
(A)gree/(C)ancel: a

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Would you be willing to share your email address with the Electronic Frontier
Foundation, a founding partner of the Let's Encrypt project and the non-profit
organization that develops Certbot? We'd like to send you email about our work
encrypting the web, EFF news, campaigns, and ways to support digital freedom.
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
(Y)es/(N)o: n
Obtaining a new certificate
Performing the following challenges:
http-01 challenge for ccc99.tw
http-01 challenge for www.ccc99.tw
Waiting for verification...
Cleaning up challenges
Deploying Certificate to VirtualHost /etc/nginx/sites-enabled/django2_helloworld.conf
Deploying Certificate to VirtualHost /etc/nginx/sites-enabled/django2_helloworld.conf

Please choose whether or not to redirect HTTP traffic to HTTPS, removing HTTP access.
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
1: No redirect - Make no further changes to the webserver configuration.
2: Redirect - Make all requests redirect to secure HTTPS access. Choose this for
new sites, or if you're confident your site works on HTTPS. You can undo this
change by editing your web server's configuration.
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Select the appropriate number [1-2] then [enter] (press 'c' to cancel): 2
Redirecting all traffic on port 80 to ssl in /etc/nginx/sites-enabled/django2_helloworld.conf
Redirecting all traffic on port 80 to ssl in /etc/nginx/sites-enabled/django2_helloworld.conf

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Congratulations! You have successfully enabled https://ccc99.tw and
https://www.ccc99.tw

You should test your configuration at:
https://www.ssllabs.com/ssltest/analyze.html?d=ccc99.tw
https://www.ssllabs.com/ssltest/analyze.html?d=www.ccc99.tw
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

IMPORTANT NOTES:
 - Congratulations! Your certificate and chain have been saved at:
   /etc/letsencrypt/live/ccc99.tw/fullchain.pem
   Your key file has been saved at:
   /etc/letsencrypt/live/ccc99.tw/privkey.pem
   Your cert will expire on 2019-07-01. To obtain a new or tweaked
   version of this certificate in the future, simply run certbot again
   with the &quot;certonly&quot; option. To non-interactively renew *all* of
   your certificates, run &quot;certbot renew&quot;
 - Your account credentials have been saved in your Certbot
   configuration directory at /etc/letsencrypt. You should make a
   secure backup of this folder now. This configuration directory will
   also contain certificates and private keys obtained by Certbot so
   making regular backups of this folder is ideal.
 - If you like Certbot, please consider supporting our work by:

   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate
   Donating to EFF:                    https://eff.org/donate-le




# configuration of the server
server {
    # the port your site will be served on
    # the domain name it will serve for
    #server_name     .example.com; # substitute your machine's Ip address or FQDN
    #server_name     192.168.66.10;
    server_name     ccc99.tw www.ccc99.tw;
    charset         utf8-8;

    # max upload size
    client_max_body_size 75M;  # adjust to taste

    location = /favicon.ico {
        access_log      off;
        log_not_found   off;
    }

    # Django media
    location /media {
        #root    /home/juzhengzhong/workspace/django2_helloworld;
        alias   /home/juzhengzhong/workspace/django2_helloworld/media;  # your Django project's media files - amend as required
    }

    location /static {
        alias   /home/juzhengzhong/workspace/django2_helloworld/web_site/staticfiles;
    }

    # Finally, send all non-media requests to the Django server
    location / {
        include         uwsgi_params; # should be located in /etc/nginx/
        uwsgi_pass      unix:/home/juzhengzhong/uwsgi/django2_helloworld.sock;
    }

    listen 443 ssl; # managed by Certbot
    ssl_certificate /etc/letsencrypt/live/ccc99.tw/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/ccc99.tw/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot
}

server {
    if ($host = www.ccc99.tw) {
        return 301 https://$host$request_uri;
    } # managed by Certbot


    if ($host = ccc99.tw) {
        return 301 https://$host$request_uri;
    } # managed by Certbot


    listen          80;
    server_name     ccc99.tw www.ccc99.tw;
    return 404; # managed by Certbot
}
</code></pre></div><p><strong>SSL Server Setting</strong>
https://www.ssllabs.com/ssltest/index.html</p> <hr> <h1 id="疑難排解"><a href="#疑難排解" class="header-anchor">#</a> 疑難排解</h1> <p><strong>無法安裝 psycopg2 v2.8.x</strong></p> <div class="language- extra-class"><pre><code>sudo apt install python-psycopg2
sudo apt install libpq-dev
pipenv install psycopg2==2.8.1
</code></pre></div><hr> <h1 id="參考文件"><a href="#參考文件" class="header-anchor">#</a> 參考文件</h1> <p><strong>Django Settings</strong>
https://docs.djangoproject.com/en/2.1/topics/settings/</p> <p>https://medium.com/@panzelva/deploying-django-website-to-vps-with-uwsgi-and-nginx-on-ubuntu-18-04-db9b387ad19d</p> <p>How To Install Python 3 and Set Up a Programming Environment on Ubuntu 18.04 [Quickstart]
https://www.digitalocean.com/community/tutorials/how-to-install-python-3-and-set-up-a-programming-environment-on-ubuntu-18-04-quickstart</p> <p><strong>多重環境</strong></p> <p>https://stackoverflow.com/questions/10664244/django-how-to-manage-development-and-production-settings</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/ho-lok-ue-tools/assets/js/app.775b2e5a.js" defer></script><script src="/ho-lok-ue-tools/assets/js/2.e9bdfe5b.js" defer></script><script src="/ho-lok-ue-tools/assets/js/259.02650516.js" defer></script>
  </body>
</html>
