# 功能複雜度判別準則

所有的**功能複雜度判別準則**，可歸類分以下八大類：

- **初始化**
- **操作介面**
- **驗證比對**
- **流程控制**
- **演算邏輯**
- **資料表更新**
- **螢幕輸出**
- **報表製作**

將所有**功能複雜度判別準則**，依據上述八大類別展開，則功能複雜度判別準則的樹狀結構關係如下：


- **初始化**
    - 【SI】狀態預設
    - 【SD】資料預設
    - 【SC】條件預設


- **操作介面**
    - 【IS】單向介面
    - 【IT】提示介面
    - 【II】互動介面
    - 【ID】動態介面


- **驗證比對**
    - 【DE】資料比對
    - 【DL】運算比對
    - 【DC】邏輯比對


- **流程控制**
    - 【FS】單一流程
    - 【FB】分支流程
    - 【FR】循環流程


- **演算邏輯**
    - 【FI】直接演算
    - 【FD】整理演算
    - 【FA】模型演算


- **資料表更新**
    - 【UD】直接更新
    - 【UI】合併更新
    - 【US】同步更新


- **螢幕輸出**
    - 【QS】文字編排
    - 【QC】資料瀏覽
    - 【QT】圖表物件


- **報表製作**
    - 【RS】文字輸出
    - 【RM】輸出套表
    - 【RK】圖形報表


----------



# 初始化


## 【SI】狀態預設：只有變數的一些宣告或設定初始值

畫面呈現前的 OnInit 階段，需要在 View 物件中進行初始值設定。


## 【SD】資料預設：有取得資料過程與運算，設定系統初始

畫面呈現前的 OnInit 階段，需要透過 Service 物件，自資料庫讀取資料。


## 【SC】條件預設：包含上述一些預設作業，且針對各種條件預做初始與設定

在畫面呈現之前，系統需要先自資料庫取出資料，並針對資料的運用，進行初始條件設定。

如：待辦事項清單（To Do List）功能，在畫面顯示之前，系統需依「使用者帳號」，先自資料庫取出該使用者帳號所屬之「待辦事項」。

然後，為令使用者能區分各個「待辦事項」，屬：**已完成/未完成**何種（已完成事項，用刪除線標示），所以，程式對每個待辦事項做是否已完成的「初始值設定」，用以控管**待辦事項**在畫面的顯示，是否該有刪除線標示。


![](https://d2mxuefqeaa7sj.cloudfront.net/s_8F83B54A0DC16DCB87CF9ECBC587C8B6935287D4EEC7044876E702B725FEED62_1550808419181_image.png)



----------


# 操作介面


## 【IS】單向介面：只有輸入資訊畫面，以取得使用者資訊與進行簡易運算

畫面其中有表單（Form），透過**表單**輸入的資料，系統不做資料的**驗證**。


![網頁中有用到 <form>](https://i.stack.imgur.com/rKyZ1.png)




## 【IT】提示介面：有輸入資訊畫面，程式做檢查及運算與提出提示畫面

**〔欄位需提示驗證失敗的原因〕**

畫面有表單，輸入的資料，若遇無法通過系統驗證的狀況時，系統會在表單的【欄位】，提示驗證無法通過的原因。


![表單資料無法通過驗證時，會在欄位提示驗證不過的原因](https://cdn.baymard.com/research/media_files/attachments/20171/original/research-media-file-df365441c389949fc9dbf39ed204de5f.jpg)



**〔操作介面的圖象系統會提供操作提示〕**

將滑鼠指標指向某「UI操作介面」時，系統需顯現「**操作提示**」。

![](https://d2mxuefqeaa7sj.cloudfront.net/s_8F83B54A0DC16DCB87CF9ECBC587C8B6935287D4EEC7044876E702B725FEED62_1550806757422_image.png)



## 【II】互動介面：資料輸入過程有互動過程，有提示與要求輸入及判斷運算

畫面的設計有需有「狀態列（Status Bar / Status Line）」，用以作為系統回報結果予使用者的介面。如：表單輸入的資料，若無法通過驗證，系統透過此狀態列回報：「輸入無法通過驗證」的提示；但若是輸入資料通過驗證，同時也順利儲存，系統也會透過此狀態列回報：「資料已儲存」之處理結果提示。

![如畫面中的粉紅色區域，即為「狀態列」的設計，可用此與使用者溝通功能操作的結果](http://paginaswebpublicidad.com/images/23697/signup_error_messages_3rd_edition.png)



## 【ID】動態介面：資料輸入有互動與依照輸入條件動態產生畫面

此類畫面因強調**高互動性**，所以當表單的欄位完成輸入後，系統就會立即接手做驗證；或是進行數學運算；前述之系統處理作業完成後，尚需將結果立即更新畫面。

**〔在表單完成欄位的輸入後，系統會針對欄位的資料進行立即處理作業〕**

強調互動性設計的「註冊表單」，會在使用者完成「使用者帳號（User Name）」輸入後，便立即檢查「使用者帳號」是否有重複的問題，不會等到使用者按**註冊鈕**後，再進行：「使用者帳號未重複」的驗證作業。

![強調互動性的表單，會在欄位完成輸入後，便立即進行資料驗證作業。](https://phppot.com/wp-content/uploads/2014/11/php-user-registration-form.png)


**〔表單欄位有輸入，系統就得立即處理及反應結果於畫面〕**

如下圖之民宿出租網站，點擊「入住日期」欄後，系統立即自資料庫讀取「訂房狀態」。對於出租，無法再預訂的房子，會在「月曆」下拉式選單標示出來。

待輸入「退房日期」欄後，系統又會立即依據預設的「房客：1人」，顯示：「付款明細」資料。

當用者更改「房客」欄的人數輸入後，系統立即根據新輸入的「房客」人數更新「付款明細」資料。


![](https://d2mxuefqeaa7sj.cloudfront.net/s_35373CDD71D157C54E50F9BDB3227173A89CDB7473C86EED5B6509B706D9D810_1551228175608_image.png)

https://goo.gl/VpWqvj


**〔下拉式選單的項目需動態變更〕**

如下圖所示，需要輸入**地址**的表單，在**鄉鎮（市）區**欄的下拉式選單，其可選擇項目，會因**縣市**欄下拉式選單的選擇而不同。

如：**縣市**下拉式選單選擇了「台北市」，所以**鄉鎮（市）區**下拉式選單能挑：「中正區、大同區、…」；
**縣市**下拉式選單選擇了「新北市」，則**鄉鎮（市）區**下拉式選單只能挑：「萬里區、金山區、…」

![](https://d2mxuefqeaa7sj.cloudfront.net/s_8F83B54A0DC16DCB87CF9ECBC587C8B6935287D4EEC7044876E702B725FEED62_1550818237484_image.png)


**〔登入的表單採用雙因子認證設計〕**

為符合「資訊安全」要求的**雙因子認證**，使用者在登入系統時，除了需要使用者輸入**使用者帳號**、**密碼**進行使用者身份認證外，系統還會另行透過**簡訊／手機App／郵件**，發送一組數字密碼予使用者，待使用者依要求，在特定裝置（可能是電腦畫面、或是手機App）完成密碼輸入，及通過驗證後，系統的登入作業才算完成。

![雙因子認證（Two-factor Authentication）](https://d2mxuefqeaa7sj.cloudfront.net/s_8F83B54A0DC16DCB87CF9ECBC587C8B6935287D4EEC7044876E702B725FEED62_1550817904086_file.jpeg)



**〔畫面的顯示項目可由使用者客製設定〕**

採 Personal Information Management 設計概念編碼的程式，會將畫面切分成多個小單元，每個小單元在畫面是否該顯示，將之做成設定選項，可由使用者自行決定是否要顯示。換句話說：使用者可以客製自己想要的畫面；同樣的畫面，會因使用者帳號不同，每個人的設定不同，畫面該顯示的欄位亦會跟著不同。

![WordPress 的後台，提供 Screen Options 功能，讓使用者可自行客製自己後台畫面的版面（Screen Layout）](https://i1.wp.com/john.do/wp-content/uploads/2011/01/wordpress-admin-screen-options.png)




----------


# 驗證比對


## 【DC】邏輯比對：資料以一些邏輯做運算與比對

在畫面上輸入資料後，需要對一組預先設定的邏輯進行比對，以確定資料的正確性。

**〔舉例一〕**

例如，使用者把設備維護安排在2/28進行，系統不能單純因該日為國定假日，就拒絕使用者將排程定於此日，因為有些設備的維護工作，只適合在假日進行。

**〔舉例二〕**

例如：為了強調資訊安全，許多系統在儲存「使用者帳號」資料時，會將使用者的密碼先用 MD5 演算法，將使用者輸入的密碼進行「亂碼化」，然後再寫入資料庫儲存。

所以，系統在處理「系統登入（Login）」功能，欲判斷使用者輸入的**密碼**與資料庫中儲存的密碼是否相同時，不能真接將表單輸入的密碼，與資料庫中儲存的密碼做比對。

而是要將表單輸入的密碼，將透過 MD5 演算法將之亂碼化，最後，再取這已亂碼化的結果值，與資料庫中的密碼進行比對，藉此方式來判斷使用者輸入的密碼是否正確。



----------


# 流程控制


## 【FS】單一流程：單一個流程的控制，同步的控制程序

系統得依**輸入**，先進行條件的邏輯判斷，然後再控制程式碼的執行流程（ IF … ELSE … ）。**單一流程**指程式碼的流程途徑，只能做二擇一的單一選擇。


![](https://d2mxuefqeaa7sj.cloudfront.net/s_8F83B54A0DC16DCB87CF9ECBC587C8B6935287D4EEC7044876E702B725FEED62_1550925045246_image.png)


例如：「線上購物網」在進行**結帳作業**時，若使用者選擇的付款方式為：**貨到付款**，系統便可進入**出貨作業**流程；反之，若使用者選擇了：一次付清、分期付款、ATM轉帳、即時轉帳⋯⋯等這些非貨到付款的支付方式，則系統會進入**付款作業**流程，同時並會控制程式的流程，在使用者未完成付款之前，結帳作業流程無法進入到下一階段的**出貨作業**流程。


![](https://d2mxuefqeaa7sj.cloudfront.net/s_8F83B54A0DC16DCB87CF9ECBC587C8B6935287D4EEC7044876E702B725FEED62_1550847150699_image.png)





## 【FB】分支流程：多個流程的控制管理，非同步的控制程序

**〔舉例一〕**

同樣以WORKFLOW的概念討論，一個驗證比對的判斷後，系統有多條路徑可以選，如同我們在寫程式的SWITCH或CASE指令的處理。

類似**單一流程**的概念，但程式的流程途徑有兩種以上可供選擇。


![](https://d2mxuefqeaa7sj.cloudfront.net/s_8F83B54A0DC16DCB87CF9ECBC587C8B6935287D4EEC7044876E702B725FEED62_1550925995678_image.png)


如下所示之「線上購物網」，該商家對於送貨提供了三種方式。購物網系統在使用者完成**訂購作業**之後，依使用者所挑選的**配送方式**，進行不同的**送貨作業**處理。

![購物網會因配送方式的選擇不同，送貨作業的處理流程亦跟著不同。](https://d2mxuefqeaa7sj.cloudfront.net/s_8F83B54A0DC16DCB87CF9ECBC587C8B6935287D4EEC7044876E702B725FEED62_1550823371187_image.png)


**〔舉例二〕**

程式採用「非阻塞（Non-blocking）」 概念編碼，以 Async 方式處理程式的流程。



## 【FR】循環流程：多個流程的控制具有複雜迴圈管理，程序為非同步的迴圈管理

**〔舉例一〕**

同樣以WORKFLOW的概念討論，一個驗證比對的判斷後，系統除了有多條路徑可以選，還會加上條件退回或循環的迴圈處理，也就是在IF THEN ELSE、SWITCH和CASE外，還加上IF i=1 to n或do loop的處理。

對於程式的執行流程，外圍需要使用迴圈來控制程式何時終止（如：FOR LOOP, DO WHILE, DO UNTIL）。而在迴圈內層的程式流程，則需要透過**條件判斷式**來控制其流程途徑走向。



![](https://d2mxuefqeaa7sj.cloudfront.net/s_8F83B54A0DC16DCB87CF9ECBC587C8B6935287D4EEC7044876E702B725FEED62_1550927348309_image.png)



**〔舉例二〕**

使用多執行緒程式編碼，其處理作法，概念類似：硬體 I/O 裝置與 CPU 協同運作的「中斷處理」。


----------


# 演算邏輯


## 【FI】直接演算：直接取出資料或簡單處理做演算，為直覺性演算

對於輸入的資料，或是自資料庫取出的資料，系統需先進行：加、減、乘、除的運算，然後再做後續處理。



## 【FD】整理演算：資料需要先行整理，再做演算

系統接收到輸入的資料之後，需要先進行「資料整理」作業，如：驗證資料有效性、檢查資料的型態無誤、將資料做排序，待資料整理作業完成後，接著系統再進行：加、減、乘、除運算。

⋯⋯或

處理輸入的資料，需要透過演算法進行處理，如：輸入的密碼得透過 MD5 演算法進行加密。



## 【FA】模型演算：資料整理與演算複雜，或是建立某種模型做演算

資料的處理，不是單純的加減乘除運算便可求得結果，尚需設計出**數學模型**演算法，才能得出**結果**。如下例所示，欲取得 Y 值，得輸入 X 與 Z 值，供數學模型的算式運算，才能導出結果值。

Y = 15.2 + 2.87 * X 平方 + 8.29 * Z平方

也就說：處理這類型的程式，在着手進行編碼前，需要先設計數學模型，才能用來處理輸入的資料。


----------


# 資料表更新


## 【UD】直接更新：將演算結果直接存入資料表

將資料寫入資料庫，需要透過 SQL 語法，才能進行儲存工作。

[【參考範例】](http://www.entityframeworktutorial.net/crud-operation-in-connected-scenario-entity-framework.aspx)：使用 Entity Framework 在資料庫中新增一筆資料，完全不需使用 SQL 語法 

    using (var context = new SchoolDBEntities())
    {
        var std = new Student()
        {
            FirstName = "Bill",
            LastName = "Gates"
        };
        context.Students.Add(std);
    
        context.SaveChanges();
    }


## 【UJ】合併更新：將演算結果與現有資料表資料做處理後存入資料表

系統在使用者輸入資料後，需要對資料先做處理後，才能寫到資料庫。例如，使用者在庫存系統上輸入商品資料，其中有一部份是在倉庫裡面(數量A)，有一部份是已經採購且驗收(數量B)，但是還沒有入庫，這個時候的庫存數量如果是包含驗收後的商品，則系統需要把A和B相加後才能儲存，也可能是分別儲存A和B後，再產生庫存數量C。

系統收到使用者輸入的資料後，得先做資料的演算處理，然後再將資料寫入資料庫。


## 【US】同步更新：除可能包含上述更新，且需要與資料表資訊執行同步後更新

這裡是資料同步處理，例如病人到X光室拍攝X光片，一拍完馬上把資料更新到資料庫，讓醫師力及可以使用。另外一個例子是網路上的電子商務，使用者訂購後，雖然還沒有出貨，必需要立即標示商品已經銷售。

例如：使用者透過銀行的ATM提款5,000元，銀行的ATM系統，不僅會在**ATM系統**使用的資料表記錄此筆提款交易5,000元；亦會同步更新使用者在**銀行系統**的資料表，自其帳戶的存款扣除5,000元。



----------


# 螢幕輸出


## 【QS】文字編排：將要顯示之資訊，逐資料項編排位置顯示，較類似單筆資料的編輯安排

自資料庫取出，需在畫面顯示的多筆資料，不以「表格（Table）」樣式條列，而需採「清單（List）」樣式逐個呈現。

![文字編排【範例一】](https://d2mxuefqeaa7sj.cloudfront.net/s_8F83B54A0DC16DCB87CF9ECBC587C8B6935287D4EEC7044876E702B725FEED62_1550928147433_image.png)



![文字編排【範例二】](https://d2mxuefqeaa7sj.cloudfront.net/s_8F83B54A0DC16DCB87CF9ECBC587C8B6935287D4EEC7044876E702B725FEED62_1550928874761_image.png)



## 【QC】資料瀏覽：將多筆要顯示資訊以瀏覽方式顯示

欲顯示於畫面的資料因量大，所以，畫面需附帶「瀏覽用操作介面」，以利使用者可以進行如：「下一頁、上一頁、跳至某頁、排序、搜尋、篩選、⋯⋯」等操作。


![顯示大量資料的畫面，需要提供：換頁、搜尋、點選等操作介面](https://dhtmlx.com/blog/wp-content/uploads/2016/04/js-data-grid-1.png)



![顯示大量資料的畫面，需要提供：排序、篩選、展開／折疊等操作介面](https://static.infragistics.com/marketing/Website/products/wpf/control-images/grids-lists/data-grid/wpf-data-grid-enhanced-filtering-l.png?v=201802140900)


