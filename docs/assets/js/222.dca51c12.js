(window.webpackJsonp=window.webpackJsonp||[]).push([[222],{504:function(e,t,o){"use strict";o.r(t);var r=o(10),n=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"dotnet指令集"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dotnet指令集"}},[e._v("#")]),e._v(" dotnet指令集")]),e._v(" "),t("h1",{attrs:{id:"專案設定"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#專案設定"}},[e._v("#")]),e._v(" 專案設定")]),e._v(" "),t("h2",{attrs:{id:"在-project-csproj-安裝-cli-tools-、ef-core-及-sql-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在-project-csproj-安裝-cli-tools-、ef-core-及-sql-server"}},[e._v("#")]),e._v(" 在 [Project].csproj 安裝  CLI Tools 、EF Core 及 SQL Server :")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('<Project Sdk="Microsoft.NET.Sdk.Web">\n\n  <PropertyGroup>\n    <TargetFramework>netcoreapp1.1.2</TargetFramework>\n  </PropertyGroup>\n\n  <ItemGroup>\n    <DotNetCliToolReference Include="Microsoft.DotNet.Watcher.Tools" Version="1.0.1"/>\n    <DotNetCliToolReference Include="Microsoft.EntityFrameworkCore.Tools.DotNet" Version="1.0.1"/>\n    <DotNetCliToolReference Include="Microsoft.VisualStudio.Web.CodeGeneration.Tools" Version="1.0.1"/>\n  </ItemGroup>\n\n</Project>  \n\n\n$ dotnet add package Microsoft.EntityFrameworkCore.SqlServer\n$ dotnet add package Microsoft.EntityFrameworkCore.SqlServer.Design\n$ dotnet add package Microsoft.EntityFrameworkCore.Design\n$ dotnet add package Microsoft.VisualStudio.Web.CodeGeneration.Design\n\n$ dotnet restore \n\n\n\ndotnet add package Microsoft.EntityFrameworkCore.SqlServer\ndotnet add package Microsoft.EntityFrameworkCore.SqlServer.Design\ndotnet add package Microsoft.EntityFrameworkCore.Design\ndotnet add package Microsoft.VisualStudio.Web.CodeGeneration.Design\n')])])]),t("p",[t("strong",[e._v("AppDbContext.cs")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("using System;\nusing Microsoft.EntityFrameworkCore;\n\nnamespace <Project>.Models\n{\n  public class AppDbContext : DbContext\n  {\n\n    public AppDbContext(DbContextOptions options) : base(options)\n    {\n    }\n  }\n}\n")])])]),t("h2",{attrs:{id:"startup-cs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#startup-cs"}},[e._v("#")]),e._v(" startup.cs")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('using Microsoft.EntityFrameworkCore;\nusing [Project].Models;\n\n......\n\npublic void ConfigureServices(IServiceCollection services)\n{\n    // Add framework services.\n    services.AddMvc();\n    \n    services.AddDbContext<AppDbContext>(options => \n        options.UseSqlServer(Configuration.GetConnectionString("Default")));\n}\n')])])]),t("h1",{attrs:{id:"指令使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指令使用"}},[e._v("#")]),e._v(" 指令使用")]),e._v(" "),t("p",[t("strong",[e._v("安裝 NuGet 套件")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("$ dotnet add package <Package>\n")])])]),t("p",[t("strong",[e._v("透過Model產生DB")])]),e._v(" "),t("ol",[t("li",[t("p",[e._v("ef migrations\n$ dotnet ef migrations add InitialCreate")])]),e._v(" "),t("li",[t("p",[e._v("ef database update\n$ dotnet ef database update")]),e._v(" "),t("Project",{attrs:{Sdk:"Microsoft.NET.Sdk.Web"}},[t("PropertyGroup",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" <TargetFramework>netcoreapp1.1.2</TargetFramework>\n")])])])]),e._v(" "),t("ItemGroup",[t("DotNetCliToolReference",{attrs:{Include:"Microsoft.DotNet.Watcher.Tools",Version:"1.0.1"}}),e._v(" "),t("DotNetCliToolReference",{attrs:{Include:"Microsoft.EntityFrameworkCore.Tools.DotNet",Version:"1.0.1"}}),e._v(" "),t("DotNetCliToolReference",{attrs:{Include:"Microsoft.VisualStudio.Web.CodeGeneration.Tools",Version:"1.0.1"}})],1),e._v(" "),t("ItemGroup",[t("PackageReference",{attrs:{Include:"Microsoft.AspNetCore",Version:"1.1.2"}}),e._v(" "),t("PackageReference",{attrs:{Include:"Microsoft.AspNetCore.Mvc",Version:"1.1.3"}}),e._v(" "),t("PackageReference",{attrs:{Include:"Microsoft.AspNetCore.StaticFiles",Version:"1.1.2"}}),e._v(" "),t("PackageReference",{attrs:{Include:"Microsoft.EntityFrameworkCore",Version:"1.1.2"}}),e._v(" "),t("PackageReference",{attrs:{Include:"Microsoft.EntityFrameworkCore.Design",Version:"1.1.2"}}),e._v(" "),t("PackageReference",{attrs:{Include:"Microsoft.EntityFrameworkCore.SqlServer",Version:"1.1.2"}}),e._v(" "),t("PackageReference",{attrs:{Include:"Microsoft.Extensions.Logging.Debug",Version:"1.1.2"}}),e._v(" "),t("PackageReference",{attrs:{Include:"Microsoft.VisualStudio.Web.BrowserLink",Version:"1.1.2"}})],1)],1)],1)]),e._v(" "),t("p",[t("strong",[e._v("透過 DB 產生 Model 類別")])]),e._v(" "),t("p",[e._v("使用 dbcontext scaffold 產生 Model 類別")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('$ dotnet ef dbcontext scaffold "Server=localhost; Database=MyDatabase; user id=sa; password=Passw0rd" Microsoft.EntityFrameworkCore.SqlServer --output-dir Models\n')])])]),t("p",[t("strong",[e._v("建立 API Controller")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("$ dotnet aspnet-codegenerator controller -name BlogsController -m Blog -dc AppDbContext -api -outDir Controllers\n")])])]),t("p",[t("strong",[e._v("自動產生 Controller 類別及其CRUD Action")])]),e._v(" "),t("h2",{attrs:{id:"scaffold-the-blogcontroller"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#scaffold-the-blogcontroller"}},[e._v("#")]),e._v(" Scaffold the BlogController")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("$ dotnet aspnet-codegenerator controller -name BlogsController -m Blog -dc ApplicationDbContext --relativeFolderPath Controllers --useDefaultLayout --referenceScriptLibraries\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);