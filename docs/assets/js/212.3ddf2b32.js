(window.webpackJsonp=window.webpackJsonp||[]).push([[212],{501:function(e,t,n){"use strict";n.r(t);var r=n(10),a=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"vs2017-ef-core筆記"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vs2017-ef-core筆記"}},[e._v("#")]),e._v(" VS2017 EF Core筆記")]),e._v(" "),t("h1",{attrs:{id:"_1-自動產生model類別"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-自動產生model類別"}},[e._v("#")]),e._v(" 1. 自動產生Model類別")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("安裝套件\nInstall-Package Microsoft.EntityFrameworkCore\nInstall-Package Microsoft.EntityFrameworkCore.Tools")]),e._v(" "),t("p",[e._v("Install-Package Microsoft.EntityFrameworkCore.SqlServer\nInstall-Package Microsoft.EntityFrameworkCore.SqlServer.Design")])]),e._v(" "),t("li",[t("p",[e._v("在 "),t("code",[e._v("Package Manager Console")]),e._v(" 執行下列指令")]),e._v(" "),t("p",[e._v('Scaffold-DbContext "Server=localhost;Database=Northwind;Trusted_Connection=True;" Microsoft.EntityFrameworkCore.SqlServer -OutputDir Models')]),e._v(" "),t("p",[e._v('Scaffold-DbContext "Server=DEV-01\\SQLEXPRESS;Database=Northwind;Trusted_Connection=True;" Microsoft.EntityFrameworkCore.SqlServer -OutputDir Models')]),e._v(" "),t("p",[e._v('PM> Scaffold-DbContext "Server=DEV-01\\SQLEXPRESS;Database=Northwind;Trusted_Connection=True;" Microsoft.EntityFrameworkCore.SqlServer -OutputDir Models\nFor column diagram_id. Unable to find parent table [dbo].[sysdiagrams]. Skipping column.\nFor column principal_id. Unable to find parent table [dbo].[sysdiagrams]. Skipping column.\nFor column version. Unable to find parent table [dbo].[sysdiagrams]. Skipping column.\nFor column name. Unable to find parent table [dbo].[sysdiagrams]. Skipping column.\nFor column definition. Unable to find parent table [dbo].[sysdiagrams]. Skipping column.\nFor index PK__sysdiagrams__48CFD27E. Unable to find parent table [dbo].[sysdiagrams]. Skipping index.\nFor index UK_principal_name. Unable to find parent table [dbo].[sysdiagrams]. Skipping index.\nFor index UK_principal_name. Unable to find parent table [dbo].[sysdiagrams]. Skipping index.')]),e._v(" "),t("p",[e._v('Scaffold-DbContext "Server=DEV-01\\SQLEXPRESS;Database=Northwind;User id=sa; pwd=P@ssword;" Microsoft.EntityFrameworkCore.SqlServer -OutputDir Models')]),e._v(" "),t("p",[e._v('Scaffold-DbContext "Server=127.0.0.1;Database=Northwind;User id=sa; pwd=P@ssword;" Microsoft.EntityFrameworkCore.SqlServer -OutputDir Models')])])]),e._v(" "),t("p",[e._v("3.檢查Model資料夾")]),e._v(" "),t("p",[e._v("4.針對 NorthwindContext 類別，進行修改")]),e._v(" "),t("ul",[t("li",[e._v("刪去OnConfiguring Method")]),e._v(" "),t("li",[e._v("新增建構Method\npublic NorthwindContext(DbContextOptions"),t("NorthwindContext",[e._v(" options)\n: base(options)\n{ }")])],1)]),e._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[e._v("修改 Startup 類別")])]),e._v(" "),t("p",[e._v("新增使用套件：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("using myWebApp.Models;\nusing Microsoft.EntityFrameworkCore;\n")])])]),t("p",[e._v("appsettings.json")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('{\n  "ConnectionStrings": {\n      "DefaultConnection": "Server=127.0.0.1; Database=Northwind; Trusted_Connection=True;"\n  }, \n  ......\n}\n\n\n\n{\n  "ConnectionStrings": {\n      "DefaultConnection": "Server=127.0.0.1; Database=Northwind; user id=sa; password=Passw0rd;"\n  }, \n  ......\n}\n\n\n\npublic void ConfigureServices(IServiceCollection services)\n{\n    // Add framework services.\n    services.AddMvc();\n    services.AddDbContext<NorthwindContext>(options => \n                options.UseSqlServer(Configuration.GetConnectionString("DefaultConnection")));\n}\n')])])]),t("h1",{attrs:{id:"_2-自動產生controller類別"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-自動產生controller類別"}},[e._v("#")]),e._v(" 2.自動產生Controller類別")]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"無法使用瀏覽器瀏覽"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#無法使用瀏覽器瀏覽"}},[e._v("#")]),e._v(" 無法使用瀏覽器瀏覽")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("Bad Request - Invalid Hostname\nHTTP Error 400. The request hostname is invalid.\n")])])]),t("p",[e._v("PowerShell with Admin")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" netsh http add urlacl url=http://*:5000/ user=Everyone\n")])])]),t("hr"),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("netsh http add urlacl url=http://192.168.66.11:5566/ user=\\Everyone\n\n\nd:\ncd D:\\Workspace\\AspNetCore2\\WebAPI-001\nrd .vs /s /q\n")])])]),t("p",[e._v("變更ＤＢ名稱")]),e._v(" "),t("h2",{attrs:{id:"使用-transact-sql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-transact-sql"}},[e._v("#")]),e._v(" 使用 Transact-SQL")]),e._v(" "),t("p",[e._v("若要重新命名資料庫")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("連接到 Database Engine。")])]),e._v(" "),t("li",[t("p",[e._v("在標準列中，按一下 "),t("strong",[e._v("[新增查詢]")]),e._v("。")])]),e._v(" "),t("li",[t("p",[e._v("將下列範例複製並貼入查詢視窗中，然後按一下 "),t("strong",[e._v("[執行]")]),e._v("。 這個範例會將 "),t("code",[e._v("AdventureWorks2012")]),e._v(" 資料庫的名稱變更為 "),t("code",[e._v("Northwind")]),e._v("。")]),e._v(" "),t("p",[e._v("USE master;"),t("br"),e._v("\nGO"),t("br"),e._v("\nALTER DATABASE NORTHWND"),t("br"),e._v("\nModify Name = Northwind;"),t("br"),e._v("\nGO")])])]),e._v(" "),t("h2",{attrs:{id:"使用-sql-server-management-studio"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-sql-server-management-studio"}},[e._v("#")]),e._v(" 使用 SQL Server Management Studio")]),e._v(" "),t("p",[e._v("若要重新命名資料庫")]),e._v(" "),t("ol",[t("li",[e._v("在 **[物件總管]**中，連接到 SQL Server Database Engine的執行個體，然後展開該執行個體。")]),e._v(" "),t("li",[e._v("確定沒有人使用此資料庫，然後"),t("a",{attrs:{href:"https://docs.microsoft.com/zh-tw/sql/relational-databases/databases/set-a-database-to-single-user-mode",target:"_blank",rel:"noopener noreferrer"}},[e._v("將資料庫設定為單一使用者模式"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("li",[e._v("展開 [資料庫]，以滑鼠右鍵按一下要重新命名的資料庫，然後按一下 [重新命名]。")]),e._v(" "),t("li",[e._v("輸入新的資料庫名稱，然後按一下 "),t("strong",[e._v("[確定]")]),e._v("。")])]),e._v(" "),t("p",[e._v("(1)")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("USE master;\nGO\nALTER DATABASE NORTHWND\nSET SINGLE_USER\nWITH ROLLBACK IMMEDIATE;\nGO\nALTER DATABASE NORTHWND\nSET READ_ONLY;\nGO\n")])])]),t("p",[e._v("(2)")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("ALTER DATABASE Northwind\nSET MULTI_USER;\nGO\n")])])])])}),[],!1,null,null,null);t.default=a.exports}}]);