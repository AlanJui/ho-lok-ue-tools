(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{459:function(a,l,e){"use strict";e.r(l);var s=e(10),n=Object(s.a)({},(function(){var a=this,l=a._self._c;return l("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[l("h1",{attrs:{id:"lua-開發環境作業指引"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#lua-開發環境作業指引"}},[a._v("#")]),a._v(" Lua 開發環境作業指引")]),a._v(" "),l("p",[a._v("macOS")]),a._v(" "),l("h2",{attrs:{id:"install-module-with-specific-version"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#install-module-with-specific-version"}},[a._v("#")]),a._v(" Install module with specific version")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[a._v("luarocks install --lua-version=5.3 <module-name>\n")])])]),l("p",[a._v("For example, to install the "),l("code",[a._v("**lua-http**")]),a._v(" module for Lua\n5.3, you can run:")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[a._v(" luarocks install --lua-version=5.3 lua-http\n")])])]),l("h2",{attrs:{id:"install-requirement-for-shell-environment"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#install-requirement-for-shell-environment"}},[a._v("#")]),a._v(" install requirement for shell environment")]),a._v(" "),l("p",[l("strong",[a._v("1.")])]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[a._v("brew install openssl\n")])])]),l("p",[l("strong",[a._v("2.")])]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[a._v("#--------------------------------------------------------------------\n# OpenSSL 3\n#--------------------------------------------------------------------\nexport OPENSSL_DIR=/usr/local/opt/openssl\nexport CRYPTO_DIR=/usr/local/opt/openssl\n")])])]),l("p",[l("strong",[a._v("3.")])]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[a._v("exec $SHELL\n")])])]),l("h2",{attrs:{id:"install-lua-http"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#install-lua-http"}},[a._v("#")]),a._v(" Install lua-http")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[a._v("luarocks install http CRYPTO_DIR=/usr/local/opt/openssl@3 CRYPTO_INCDIR=/usr/local/opt/openssl@3/include OPENSSL_DIR=/usr/local/opt/openssl@3/ OPENSSL_INCDIR=/usr/local/opt/openssl@3/include\n")])])]),l("p",[a._v("To install the "),l("code",[a._v("**lua-http**")]),a._v(" module with Lua 5.1\ninterpreter used by Neovim, you can use the following\ncommand:")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[a._v("$ luarocks install --tree ~/.config/nvim/lua/rocks http CRYPTO_DIR=/usr/local/opt/openssl OPENSSL_DIR=/usr/local/opt/openssl\n\nInstalling https://luarocks.org/http-0.4-0.all.rock\n\nhttp 0.4-0 depends on lua >= 5.1 (5.4-1 provided by VM)\nhttp 0.4-0 depends on compat53 >= 0.3 (0.8-1 installed)\nhttp 0.4-0 depends on bit32 (5.3.5.1-1 installed)\nhttp 0.4-0 depends on cqueues >= 20161214 (20200726.54-0 installed)\nhttp 0.4-0 depends on luaossl >= 20161208 (20220711-0 installed)\nhttp 0.4-0 depends on basexx >= 0.2.0 (0.4.1-1 installed)\nhttp 0.4-0 depends on lpeg (1.0.2-1 installed)\nhttp 0.4-0 depends on lpeg_patterns >= 0.5 (0.5-0 installed)\nhttp 0.4-0 depends on binaryheap >= 0.3 (0.4-1 installed)\nhttp 0.4-0 depends on fifo (0.2-0 installed)\nhttp 0.4-0 is now installed in /Users/alanjui/.config/nvim/lua/rocks (license: MIT)\n")])])]),l("p",[a._v("This will install the "),l("code",[a._v("**http**")]),a._v(" module in a local\n"),l("code",[a._v("**rocks**")]),a._v(" directory under "),l("code",[a._v("**~/.config/nvim/lua/**")]),a._v(". The\n"),l("code",[a._v("**--tree**")]),a._v(" option specifies the directory where the module\nwill be installed.")]),a._v(" "),l("hr"),a._v(" "),l("p",[a._v("Note that you will need to add the local installation\ndirectory to the "),l("code",[a._v("**package.path**")]),a._v(" and "),l("code",[a._v("**package.cpath**")]),a._v("\nvariables in your Neovim Lua scripts to use the locally\ninstalled modules:")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[a._v('-- Add local LuaRocks installation directory to package path\npackage.path = package.path .. ";~/.config/nvim/lua/?.lua"\npackage.cpath = package.cpath .. ";~/.config/nvim/lua/rocks/?.so"\n\n\n/usr/local/share/lua/5.4/?.lua;?.lua;/Users/alanjui/.cache/nvim/packer_hererocks/2.1.0-beta3/share/lua/5.1/?.lua\n;/Users/alanjui/.cache/nvim/packer_hererocks/2.1.0-beta3/share/lua/5.1/?/init.lua;/Users/alanjui/.cache/nvim/pac\nker_hererocks/2.1.0-beta3/lib/luarocks/rocks-5.1/?.lua;/Users/alanjui/.cache/nvim/packer_hererocks/2.1.0-beta3/l\nib/luarocks/rocks-5.1/?/init.lua\n')])])]),l("h2",{attrs:{id:"install-lua-cjson"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#install-lua-cjson"}},[a._v("#")]),a._v(" Install lua-cjson")]),a._v(" "),l("div",{staticClass:"language- extra-class"},[l("pre",[l("code",[a._v("❯ luarocks install lua-cjson\nInstalling https://luarocks.org/lua-cjson-2.1.0.10-1.src.rock\n\nlua-cjson 2.1.0.10-1 depends on lua >= 5.1 (5.4-1 provided by VM)\nenv MACOSX_DEPLOYMENT_TARGET=11.0 gcc -O2 -fPIC -I/usr/local/opt/lua/include/lua5.4 -c lua_cjson.c -o lua_cjson.o\nenv MACOSX_DEPLOYMENT_TARGET=11.0 gcc -O2 -fPIC -I/usr/local/opt/lua/include/lua5.4 -c strbuf.c -o strbuf.o\nenv MACOSX_DEPLOYMENT_TARGET=11.0 gcc -O2 -fPIC -I/usr/local/opt/lua/include/lua5.4 -c fpconv.c -o fpconv.o\nenv MACOSX_DEPLOYMENT_TARGET=11.0 gcc -L/usr/local/opt/openssl@1.1/lib -bundle -undefined dynamic_lookup -all_load -o cjson.so lua_cjson.o strbuf.o fpconv.o\nlua-cjson 2.1.0.10-1 is now installed in /usr/local (license: MIT)\n")])])])])}),[],!1,null,null,null);l.default=n.exports}}]);