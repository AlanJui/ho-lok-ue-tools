(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{243:function(s,n,a){s.exports=a.p+"assets/img/nginx-uwsgi-django-2.5015ce36.jpeg"},244:function(s,n,a){s.exports=a.p+"assets/img/django-app-dirs.db92d636.png"},551:function(s,n,a){"use strict";a.r(n);var e=a(10),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"æ‡‰ç”¨ç³»çµ±å»ºç½®ä½œæ¥­æŒ‡å¼•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ‡‰ç”¨ç³»çµ±å»ºç½®ä½œæ¥­æŒ‡å¼•"}},[s._v("#")]),s._v(" æ‡‰ç”¨ç³»çµ±å»ºç½®ä½œæ¥­æŒ‡å¼•")]),s._v(" "),n("h2",{attrs:{id:"æ‘˜è¦"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ‘˜è¦"}},[s._v("#")]),s._v(" æ‘˜è¦")]),s._v(" "),n("p",[s._v("èªªæ˜ï¼šå¦‚ä½•åœ¨ Ubuntu ä½œæ¥­ç³»çµ±ï¼Œå»ºç½® Django æ‡‰ç”¨ç³»çµ±æ–¼åŸ·è¡Œæ™‚æœŸ\nï¼Œæ‰€éœ€ä½¿ç”¨ä¹‹é‹ä½œå¹³å°ã€‚")]),s._v(" "),n("h3",{attrs:{id:"django-æ‡‰ç”¨ç³»çµ±ä½œæ¥­å¹³å°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#django-æ‡‰ç”¨ç³»çµ±ä½œæ¥­å¹³å°"}},[s._v("#")]),s._v(" Django æ‡‰ç”¨ç³»çµ±ä½œæ¥­å¹³å°")]),s._v(" "),n("ul",[n("li",[s._v("HTTP ä¼ºæœå™¨ï¼š Nginx")]),s._v(" "),n("li",[s._v("uWSGI ä»‹é¢ï¼š å°‡ Nginx æ”¶åˆ°ä¹‹ HTTP Request è½‰æˆ unix socket\nï¼Œä¸¦å‚³é€äºˆ Django æ‡‰ç”¨ç³»çµ±")]),s._v(" "),n("li",[s._v("Django Appï¼š Django æ‡‰ç”¨ç³»çµ±")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(243),alt:""}})]),s._v(" "),n("h3",{attrs:{id:"django-æ‡‰ç”¨ç³»çµ±ç›®éŒ„çµæ§‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#django-æ‡‰ç”¨ç³»çµ±ç›®éŒ„çµæ§‹"}},[s._v("#")]),s._v(" Django æ‡‰ç”¨ç³»çµ±ç›®éŒ„çµæ§‹")]),s._v(" "),n("p",[n("img",{attrs:{src:a(244),alt:""}})]),s._v(" "),n("h2",{attrs:{id:"ä½œæ¥­ç¨‹åº"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä½œæ¥­ç¨‹åº"}},[s._v("#")]),s._v(" ä½œæ¥­ç¨‹åº")]),s._v(" "),n("h3",{attrs:{id:"_1-å®‰è£-nginx-ä½œç‚º-http-server"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-å®‰è£-nginx-ä½œç‚º-http-server"}},[s._v("#")]),s._v(" ï¼ˆ1ï¼‰å®‰è£ nginx ä½œç‚º HTTP Server")]),s._v(" "),n("ol",[n("li",[s._v("å®‰è£ nginx å¥—ä»¶ã€‚")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo apt install nginx -y\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("é©—è­‰ nginx æœå‹™å·²å®Œæˆå®‰è£ï¼Œä¸”è¢«æ­£å¸¸å•Ÿå‹•ã€‚")])]),s._v(" "),n("p",[s._v("æª¢é©—æœå‹™å·²è¢«å•Ÿå‹•ï¼Œä¸”èƒ½éš¨ä½œæ¥­ç³»çµ±é–‹æ©Ÿï¼Œè‡ªè¡Œå•Ÿå‹•ï¼›")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("systemctl status nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("ğŸ“º")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("alanjui@VB02-Ubuntu-2004:~$ systemctl status nginx\nâ— nginx.service - A high performance web server and a reverse proxy server\n     Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)\n     Active: active (running) since Fri 2021-03-26 14:30:00 CST; 1min 10s ago\n       Docs: man:nginx(8)\n   Main PID: 67493 (nginx)\n      Tasks: 3 (limit: 4653)\n     Memory: 4.8M\n     CGroup: /system.slice/nginx.service\n             â”œâ”€67493 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;\n             â”œâ”€67494 nginx: worker process\n             â””â”€67495 nginx: worker process\n\n 3æœˆ 26 14:30:00 VB02-Ubuntu-2004 systemd[1]: Starting A high performance web server and a reverse proxy ser>\n 3æœˆ 26 14:30:00 VB02-Ubuntu-2004 systemd[1]: Started A high performance web server and a reverse proxy serv>\nlines 1-14/14 (END)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("æª¢é©— Web Client ç«¯ï¼Œå·²èƒ½é€£ä¸Šç”± nginx æœå‹™å»ºæ§‹è€Œæˆä¹‹ HTTP\nServer ã€‚")])]),s._v(" "),n("p",[s._v("ä½¿ç”¨ Web ç€è¦½å™¨ï¼Œç€è¦½å¦‚ä¸‹ç¶²å€ï¼Œè‹¥èƒ½æ­£å¸¸é–±è®€ã€Œç¶²é ã€å…§å®¹ï¼Œå‰‡\nè¡¨ HTTP Server å·²èƒ½ æ­£å¸¸é‹ä½œã€‚")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("http://[IP_Address]\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_2-å»ºç½®ä½¿ç”¨ä¹‹-host-name-èˆ‡-ip"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-å»ºç½®ä½¿ç”¨ä¹‹-host-name-èˆ‡-ip"}},[s._v("#")]),s._v(" ï¼ˆ2ï¼‰å»ºç½®ä½¿ç”¨ä¹‹ Host Name èˆ‡ IP")]),s._v(" "),n("p",[s._v("åœ¨ Host æ¸…å–®ï¼ˆæª”æ¡ˆï¼š/etc/hostsï¼‰ï¼Œå»ºç½® Django æ‡‰ç”¨ç³»çµ±ä¹‹\nHost Name åŠä½¿ ç”¨ä¹‹ IP ã€‚")]),s._v(" "),n("ol",[n("li",[s._v("ç·¨è¼¯ Host æ¸…å–®ã€‚")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudoedit /etc/hosts\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("æ·»åŠ ä¸€ç­† Host èˆ‡ IP å°æ˜ ç´€éŒ„ã€‚")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("127.0.0.1       localhost\n127.0.0.1       SRV-2020\n192.168.66.10   app.ccc.tw.local\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"_3-å»ºç½®æ‡‰ç”¨ç³»çµ±ç¶²ç«™"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-å»ºç½®æ‡‰ç”¨ç³»çµ±ç¶²ç«™"}},[s._v("#")]),s._v(" ï¼ˆ3ï¼‰å»ºç½®æ‡‰ç”¨ç³»çµ±ç¶²ç«™")]),s._v(" "),n("p",[s._v("nginx æä¾›çš„ã€Œè™›æ“¬ç¶²ç«™ã€åŠŸèƒ½ï¼Œå¯ä»¤ä¸€å° HTTP ä¼ºæœå™¨ï¼Œå»ºç½®åŠåŸ·\nè¡Œå¤šå€‹ç¶²ç«™ã€‚ æ¯å€‹ Django æ‡‰ç”¨ç³»çµ±ï¼Œå‡æœƒæœ‰ï¼š .css æ¨£å¼æª”ã€\n.html ç¶²é æ¨¡ç‰ˆæª”ã€.png/.jpg åœ–æª”... ç­‰éœæ…‹æª”æ¡ˆï¼Œè€ƒæ…®åˆ°æ‡‰ç”¨ç³»\nçµ±ä¹‹åŸ·è¡Œæ•ˆèƒ½ï¼Œç•¶ Web Client å‚³ä¾†ä¹‹ HTTP Request ï¼Œè‹¥è™•ç†çš„çµ\næœåªéœ€å›é€ã€Œéœæ…‹æª”æ¡ˆã€ï¼Œä¾› Web Client ä¸‹è¼‰ï¼Œå‰‡æ­¤ä½œæ¥­ ä¹‹åŸ·è¡Œ\nç”±å°ˆè·çš„ HTTP æœå‹™ä¾†åŸ·è¡Œï¼Œæœƒæœ‰è¼ƒä½³ä¹‹æ•ˆèƒ½è¡¨ç¾ï¼Œæ•…è€Œäº¤ç”± nginx\næ“”ç¶± è² è²¬ã€‚")]),s._v(" "),n("p",[s._v("ä»¥ä¸‹ä¹‹æ“ä½œï¼Œå°‡èªªæ˜ï¼šç•¶ nginx æœå‹™å·²æ–¼ä¼ºæœå™¨å®Œæˆå®‰è£å¾Œï¼Œè©²å¦‚\nä½•ä½œæ¥­ï¼Œå®Œæˆ Django æ‡‰ç”¨ç³»çµ±ä¹‹ HTTP ç¶²ç«™ã€‚")]),s._v(" "),n("ol",[n("li",[s._v("å»ºç½®ã€Œç¶²ç«™ç›®éŒ„ã€ã€‚")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('sudo su\nmkdir /var/www/app.ccc.tw.local && cd $_\necho "app.ccc.tw.local Web Site" > index.html\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("å¥—ç”¨ defaut è™›æ“¬ç¶²ç«™è¨­å®šæª”ï¼Œå»ºç½® Django æ‡‰ç”¨ç³»çµ±ç¶²ç«™ã€‚")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd /etc/nginx/sites-available\ncp default app.ccc.tw.local\nvim  app.ccc.tw.local\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("ğŸ”– app.ccc.tw.local:")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("server {\n    listen 80;\n\n    server_name app.ccc.tw.local;\n\n    root /var/www/app.ccc.tw.local;\n    index index.html;\n\n    location / {\n        try_files $uri $uri/ =404;\n    }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("åœç”¨ Default è™›æ“¬ç¶²ç«™")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd  ../sites-enabled\nunlink default\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[s._v("å•Ÿç”¨ Django æ‡‰ç”¨ç³»çµ±ç¶²ç«™")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ln -s /etc/nginx/sites-available/app.ccc.tw.local /etc/nginx/sites-enabled\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"5"}},[n("li",[s._v("æª¢é©— Django æ‡‰ç”¨ç³»çµ±ç¶²ç«™ä¹‹è¨­å®šç„¡èª¤ï¼Œç¢ºä¿ç¶²ç«™ä¸æœƒå› è¨­å®šæœ‰\néŒ¯ï¼Œä»¥è‡´ç„¡æ³•å•Ÿå‹•ã€‚")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("nginx -t\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"6"}},[n("li",[s._v("é‡å•Ÿ nginx æœå‹™ï¼Œä»¥ä¾¿æ–°é€²å»ºç½®ä¹‹ Django æ‡‰ç”¨ç³»çµ±ç¶²ç«™ï¼Œå·²èƒ½\næ­£å¸¸é‹ä½œã€‚")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("systemctl restart nginx\nsystemclt status nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ol",{attrs:{start:"7"}},[n("li",[s._v("é©—è­‰ Django æ‡‰ç”¨ç³»çµ±ç¶²ç«™å·²èƒ½æ­£å¸¸é‹ä½œã€‚")])]),s._v(" "),n("p",[s._v("ä½¿ç”¨ Web ç€è¦½å™¨ï¼Œç€è¦½ç¶²å€ï¼š "),n("a",{attrs:{href:"http://app.ccc.tw.local/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://app.ccc.tw.local/"),n("OutboundLink")],1),s._v(" ã€‚é€\néã€Œæª¢è¦–ã€ï¼Œè§€å¯Ÿç¶²é  é¡¯ç¤ºå…§å®¹çš„çµæœï¼Œä»¥æ­¤æ–¹å¼é©—è­‰ Django æ‡‰\nç”¨ç³»çµ±ç¶²ç«™ï¼Œå·²å®Œæˆè¨­å®šï¼Œå¯æ­£å¸¸é‹ä½œã€‚")]),s._v(" "),n("p",[s._v("ã€ç¶²é æ‡‰é¡¯ç¤ºä¹‹å…§å®¹ã€‘ï¼š")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("app.ccc.tw.local Web Site\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_4-è¨­å®šç®¡ç†è€…å¸³è™Ÿ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-è¨­å®šç®¡ç†è€…å¸³è™Ÿ"}},[s._v("#")]),s._v(" ï¼ˆ4ï¼‰è¨­å®šç®¡ç†è€…å¸³è™Ÿ")]),s._v(" "),n("p",[s._v("åœ¨ä½œæ¥­ç³»çµ±ï¼Œå»ºç«‹ Django æ‡‰ç”¨ç³»çµ±ç®¡ç†å“¡ï¼Œå…¶ã€Œä½¿ç”¨è€…å¸³è™Ÿã€åŠæ­¸\nå±¬ä¹‹ã€Œç¾¤çµ„ã€ã€‚")]),s._v(" "),n("ol",[n("li",[s._v("æ–°å¢ç®¡ç†è€…ç”¨ä½¿ç”¨è€…å¸³è™Ÿï¼Œä¸¦è¨­ç‚º sudo ç¾¤çµ„ã€‚")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo adduser web-admin\nusermod -aG sudo web-admin\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("å°‡ç®¡ç†è€…å¸³è™ŸåŠ å…¥ www-data ç¾¤çµ„å…ˆç™»å‡ºï¼Œå†ä»¥ã€Œç®¡ç†è€…å¸³è™Ÿã€ç™»å…¥\nã€‚")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo usermod -aG www-data $USER\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("é©—è­‰è¨­å®šæˆåŠŸï¼š")])]),s._v(" "),n("p",[s._v("å…ˆç™»å‡ºï¼Œå†ç™»å…¥ã€‚ç„¶å¾ŒåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼Œé©—è­‰ç®¡ç†è€…å¸³è™Ÿå±¬\nï¼šsudoã€www-data ç¾¤çµ„ã€‚")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("groups\nid\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("ğŸ“º")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("web-admin@VB02-Ubuntu-2004:~$ cat /etc/group | grep www-data\nwww-data:x:33:\n\nweb-admin@VB02-Ubuntu-2004:~$ groups\nweb-admin adm cdrom sudo dip www-data plugdev lpadmin lxd sambashare\n\nweb-admin@VB02-Ubuntu-2004:~$ id\nä½¿ç”¨è€…id=1000(web-admin) idç¾¤çµ„=1000(web-admin) çµ„=1000(web-admin),4(adm),24(cdrom),27(sudo),30(dip),33(www-data),46(plugdev),120(lpadmin),131(lxd),132(sambashare)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"å•Ÿç”¨-https-é€šä¿¡å”å®š"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å•Ÿç”¨-https-é€šä¿¡å”å®š"}},[s._v("#")]),s._v(" å•Ÿç”¨ HTTPS é€šä¿¡å”å®š")]),s._v(" "),n("h3",{attrs:{id:"_1-å®‰è£ã€Œæ†‘è­‰ç”¨å¥—ä»¶ã€"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-å®‰è£ã€Œæ†‘è­‰ç”¨å¥—ä»¶ã€"}},[s._v("#")]),s._v(" ï¼ˆ1ï¼‰å®‰è£ã€Œæ†‘è­‰ç”¨å¥—ä»¶ã€")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ sudo add-apt-repository ppa:certbot/certbot\n$ sudo apt update\n$ sudo apt upgrade\n$ sudo apt install python-certbot-nginx\ns sudo cerbot --nginx -d ccc99.tw -d www.ccc99.tw\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("ğŸ“º")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ sudo cerbot --nginx -d ccc99.tw -d www.ccc99.tw\nsudo: cerbot: command not found\njuzhengzhong@SRV-01:~$ sudo certbot --nginx -d ccc99.tw -d www.ccc99.tw\nSaving debug log to /var/log/letsencrypt/letsencrypt.log\nPlugins selected: Authenticator nginx, Installer nginx\nEnter email address (used for urgent renewal and security notices) (Enter 'c' to\ncancel): alanjui.1960@gmail.com\n\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nPlease read the Terms of Service at\nhttps://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf. You must\nagree in order to register with the ACME server at\nhttps://acme-v02.api.letsencrypt.org/directory\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n(A)gree/(C)ancel: a\n\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nWould you be willing to share your email address with the Electronic Frontier\nFoundation, a founding partner of the Let's Encrypt project and the non-profit\norganization that develops Certbot? We'd like to send you email about our work\nencrypting the web, EFF news, campaigns, and ways to support digital freedom.\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n(Y)es/(N)o: n\nObtaining a new certificate\nPerforming the following challenges:\nhttp-01 challenge for ccc99.tw\nhttp-01 challenge for www.ccc99.tw\nWaiting for verification...\nCleaning up challenges\nDeploying Certificate to VirtualHost /etc/nginx/sites-enabled/django2_helloworld.conf\nDeploying Certificate to VirtualHost /etc/nginx/sites-enabled/django2_helloworld.conf\n\nPlease choose whether or not to redirect HTTP traffic to HTTPS, removing HTTP access.\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n1: No redirect - Make no further changes to the webserver configuration.\n2: Redirect - Make all requests redirect to secure HTTPS access. Choose this for\nnew sites, or if you're confident your site works on HTTPS. You can undo this\nchange by editing your web server's configuration.\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nSelect the appropriate number [1-2] then [enter] (press 'c' to cancel): 2\nRedirecting all traffic on port 80 to ssl in /etc/nginx/sites-enabled/django2_helloworld.conf\nRedirecting all traffic on port 80 to ssl in /etc/nginx/sites-enabled/django2_helloworld.conf\n\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nCongratulations! You have successfully enabled https://ccc99.tw and\nhttps://www.ccc99.tw\n\nYou should test your configuration at:\nhttps://www.ssllabs.com/ssltest/analyze.html?d=ccc99.tw\nhttps://www.ssllabs.com/ssltest/analyze.html?d=www.ccc99.tw\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\nIMPORTANT NOTES:\n - Congratulations! Your certificate and chain have been saved at:\n   /etc/letsencrypt/live/ccc99.tw/fullchain.pem\n   Your key file has been saved at:\n   /etc/letsencrypt/live/ccc99.tw/privkey.pem\n   Your cert will expire on 2019-07-01. To obtain a new or tweaked\n   version of this certificate in the future, simply run certbot again\n   with the \"certonly\" option. To non-interactively renew *all* of\n   your certificates, run \"certbot renew\"\n - Your account credentials have been saved in your Certbot\n   configuration directory at /etc/letsencrypt. You should make a\n   secure backup of this folder now. This configuration directory will\n   also contain certificates and private keys obtained by Certbot so\n   making regular backups of this folder is ideal.\n - If you like Certbot, please consider supporting our work by:\n\n   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate\n   Donating to EFF:                    https://eff.org/donate-le\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br")])]),n("h3",{attrs:{id:"_2-è™›æ“¬ç¶²ç«™å•Ÿç”¨-https-é€šä¿¡å”å®š"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-è™›æ“¬ç¶²ç«™å•Ÿç”¨-https-é€šä¿¡å”å®š"}},[s._v("#")]),s._v(" ï¼ˆ2ï¼‰è™›æ“¬ç¶²ç«™å•Ÿç”¨ HTTPS é€šä¿¡å”å®š")]),s._v(" "),n("p",[s._v("è¨­å®š nginx è™›æ“¬ç¶²ç«™ï¼Œä½¿ä¹‹èˆ‡ã€Œæ†‘è­‰ã€çµåˆï¼Œä»¥ä¾¿å•Ÿç”¨ HTTPS é€šä¿¡\nå”å®šã€‚")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("{\n    # configuration of the server\n    server {\n        # the port your site will be served on\n        # the domain name it will serve for\n        #server_name     .example.com; # substitute your machine's Ip address or FQDN\n        #server_name     192.168.66.10;\n        server_name     ccc99.tw www.ccc99.tw;\n        charset         utf8-8;\n\n        # max upload size\n        client_max_body_size 75M;  # adjust to taste\n\n        location = /favicon.ico {\n            access_log      off;\n            log_not_found   off;\n        }\n\n        # Django media\n        location /media {\n            # your Django project's media files - amend as required\n            #root   /home/juzhengzhong/workspace/django2_helloworld;\n            alias   /home/juzhengzhong/workspace/django2_helloworld/media;\n        }\n\n        location /static {\n            alias   /home/juzhengzhong/workspace/django2_helloworld/web_site/staticfiles;\n        }\n\n        # Finally, send all non-media requests to the Django server\n        location / {\n            include     uwsgi_params; # should be located in /etc/nginx/\n            uwsgi_pass  unix:/home/juzhengzhong/uwsgi/django2_helloworld.sock;\n        }\n\n        listen 443 ssl; # managed by Certbot\n        ssl_certificate /etc/letsencrypt/live/ccc99.tw/fullchain.pem; # managed by Certbot\n        ssl_certificate_key /etc/letsencrypt/live/ccc99.tw/privkey.pem; # managed by Certbot\n        include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot\n        ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot\n    }\n\n    server {\n        if ($host = www.ccc99.tw) {\n            return 301 https://$host$request_uri;\n        } # managed by Certbot\n\n\n        if ($host = ccc99.tw) {\n            return 301 https://$host$request_uri;\n        } # managed by Certbot\n\n\n        listen          80;\n        server_name     ccc99.tw www.ccc99.tw;\n        return 404; # managed by Certbot\n    }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br")])]),n("h3",{attrs:{id:"_3-æ¸¬è©¦-https-å·²èƒ½æ­£å¸¸é‹ä½œ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ¸¬è©¦-https-å·²èƒ½æ­£å¸¸é‹ä½œ"}},[s._v("#")]),s._v(" ï¼ˆ3ï¼‰æ¸¬è©¦ HTTPS å·²èƒ½æ­£å¸¸é‹ä½œ")]),s._v(" "),n("p",[s._v("é€é SSL Server Test (opens new window)ç¶²ç«™ï¼Œæ¸¬è©¦ è¨­å®šçµæœæ­£\nç¢ºç„¡èª¤ï¼ŒWeb Server å·²å•Ÿç”¨äº† HTTPS é€šä¿¡å”å®šã€‚")]),s._v(" "),n("h2",{attrs:{id:"å¸¸è¦‹ä½œæ¥­"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸è¦‹ä½œæ¥­"}},[s._v("#")]),s._v(" å¸¸è¦‹ä½œæ¥­")]),s._v(" "),n("h3",{attrs:{id:"å¸¸ç”¨æœå‹™ç®¡ç†æŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸ç”¨æœå‹™ç®¡ç†æŒ‡ä»¤"}},[s._v("#")]),s._v(" å¸¸ç”¨æœå‹™ç®¡ç†æŒ‡ä»¤")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo service nginx status\nsudo service nginx stop\nsudo service nginx start\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"é©—è­‰è¨­å®šæª”èªæ³•æ­£ç¢º"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é©—è­‰è¨­å®šæª”èªæ³•æ­£ç¢º"}},[s._v("#")]),s._v(" é©—è­‰è¨­å®šæª”èªæ³•æ­£ç¢º")]),s._v(" "),n("p",[s._v("å»ºç«‹æˆ–è®Šæ›´ nginx.conf ã€è™›æ“¬ç¶²ç«™è¨­å®šæª”å¾Œï¼Œå¯ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤é©—è­‰\næœ‰ç„¡ã€Œè¨­å®šèªæ³•ã€çš„ éŒ¯èª¤ã€‚")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo nginx -t\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("ğŸ“º")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ sudo nginx -t\nnginx: the configuration file /etc/nginx/nginx.conf syntax is ok\nnginx: configuration file /etc/nginx/nginx.conf test is successful\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"å•é¡Œè¨ºæ–·èˆ‡ç‹€æ³æ’é™¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å•é¡Œè¨ºæ–·èˆ‡ç‹€æ³æ’é™¤"}},[s._v("#")]),s._v(" å•é¡Œè¨ºæ–·èˆ‡ç‹€æ³æ’é™¤")]),s._v(" "),n("p",[s._v("N/A")]),s._v(" "),n("h2",{attrs:{id:"åƒè€ƒè³‡æ–™"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åƒè€ƒè³‡æ–™"}},[s._v("#")]),s._v(" åƒè€ƒè³‡æ–™")]),s._v(" "),n("p",[s._v("å¦‚ä½•é‹ç”¨ Nginx ã€uWSGI æœå‹™ï¼Œæ­å»º Django æ‡‰ç”¨ç³»çµ±ä¹‹åƒè€ƒè³‡æ–™\nã€‚")]),s._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"https://uwsgi-docs.readthedocs.io/en/latest/tutorials/Django_and_nginx.html?fbclid=IwAR2NF6La2CNVljdTPr79dg4zy9S91e0pkyHqp8zTkj0DihpLrGoL04-lyzc",target:"_blank",rel:"noopener noreferrer"}},[s._v("Setting up Django and your web server with uWSGI and nginx"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://www.digitalocean.com/community/tutorials/how-to-set-up-uwsgi-and-nginx-to-serve-python-apps-on-centos-7",target:"_blank",rel:"noopener noreferrer"}},[s._v("How To Set Up uWSGI and Nginx to Serve Python Apps on CentOS 7"),n("OutboundLink")],1)])])]),s._v(" "),n("p",[s._v("å¦‚ä½•é‹ç”¨ä½œæ¥­ç³»çµ±æ‰€æä¾›ä¹‹åŠŸèƒ½ï¼Œä»¤ Django æ‡‰ç”¨ç³»çµ±å¯æ–¼ã€Œé–‹æ©Ÿä½œ\næ¥­ã€å®Œæˆå¾Œï¼Œä¾¿èƒ½è‡ªå‹•å•Ÿå‹•ï¼Œé–‹å§‹æä¾›æœå‹™ã€‚")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://linuxhint.com/use-etc-rc-local-boot/",target:"_blank",rel:"noopener noreferrer"}},[s._v("How to use /etc/rc.local at boot"),n("OutboundLink")],1)])]),s._v(" "),n("p",[s._v("å¦‚ä½•åœ¨å€åŸŸç¶²è·¯ï¼Œå¿«é€Ÿå»ºç½® DNS æœå‹™ï¼Œä»¤ Web Client å¯é€é FQDN\nï¼ˆé IP ä¹‹ Host Nameï¼‰ï¼Œä½¿ç”¨ Django æ‡‰ç”¨ç³»çµ±æ‰€æä¾›ä¹‹æœå‹™ã€‚")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://computingforgeeks.com/install-and-configure-dnsmasq-on-ubuntu/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Install and Configure Dnsmasq on Ubuntu 22.04|20.04|18.04"),n("OutboundLink")],1)])]),s._v(" "),n("h3",{attrs:{id:"è¨­å®š-nginx-ä½œæ¥­ç’°å¢ƒ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è¨­å®š-nginx-ä½œæ¥­ç’°å¢ƒ"}},[s._v("#")]),s._v(" è¨­å®š Nginx ä½œæ¥­ç’°å¢ƒ")]),s._v(" "),n("p",[s._v("è¨­å®š Nginx åœ¨ä½œæ¥­ç³»çµ±çš„åŸ·è¡Œç’°å¢ƒã€‚")]),s._v(" "),n("p",[s._v("ç·¨è¼¯è¨­å®šæª”ã€‚")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo nano /etc/nginx/nginx.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("nginx.conf è¨­å®šï¼š")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('user www-data;\nworker_processes auto;\npid /run/nginx.pid;\ninclude /etc/nginx/modules-enabled/*.conf;\n\nevents {\n    worker_connections 768;\n    # multi_accept on;\n}\n\nhttp {\n    ##\n    # Basic Settings\n    ##\n\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout 65;\n    types_hash_max_size 2048;\n    # server_tokens off;\n\n    server_names_hash_bucket_size 64;\n    # server_name_in_redirect off;\n\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    ##\n    # SSL Settings\n    ##\n\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE\n    ssl_prefer_server_ciphers on;\n\n    ##\n    # Logging Settings\n    ##\n\n    access_log /var/log/nginx/access.log;\n    error_log /var/log/nginx/error.log;\n\n    ##\n    # Gzip Settings\n    ##\n\n    gzip on;\n    gzip_disable "msie6";\n\n    # gzip_vary on;\n    # gzip_proxied any;\n    # gzip_comp_level 6;\n    # gzip_buffers 16 8k;\n    # gzip_http_version 1.1;\n    # gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\n\n    ##\n    # Virtual Host Configs\n    ##\n\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br")])]),n("p",[s._v("é©—è­‰è¨­å®šæª”å…§å®¹ç„¡èª¤")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo nginx -t\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h1",{attrs:{id:"app1-ccc-tw-local-ä¹‹-nginx-è¨­å®šæª”"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#app1-ccc-tw-local-ä¹‹-nginx-è¨­å®šæª”"}},[s._v("#")]),s._v(" app1.ccc.tw.local ä¹‹ nginx è¨­å®šæª”")]),s._v(" "),n("p",[s._v("/etc/nginx/sites-available/app1.ccc.tw.local")]),s._v(" "),n("h1",{attrs:{id:"åœ¨-ubuntu-18-04-å®‰è£-nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åœ¨-ubuntu-18-04-å®‰è£-nginx"}},[s._v("#")]),s._v(" åœ¨ Ubuntu 18.04 å®‰è£ Nginx")]),s._v(" "),n("p",[s._v("How to Install Nginx on Ubuntu 18.04(opens new window)")]),s._v(" "),n("p",[s._v("/etc/nginx/sites-available/app1.ccc.tw.local")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("upstream django {\n # server 127.0.0.1:8001;\n    server unix:///home/alanjui/workspace/apps/django-v4/mysite.sock;\n}\n\nserver {\n listen 8000;\n\n server_name  app1.ccc.tw.local;\n charset  utf-8;\n\n # max upload size\n client_max_body_size 75M;\n\n # Django media\n location /media {\n  alias /home/alanjui/workspace/apps/django-v4/media;\n }\n\n location /static {\n  alias /home/alanjui/workspace/apps/django-v4/static_collected;\n }\n\n location / {\n  uwsgi_pass django;\n  include  /home/alanjui/workspace/apps/django-v4/uwsgi_params;\n }\n\n # root   /var/www/app1.ccc.tw.local;\n # index   index.html;\n # access_log   /var/log/nginx/app1-ccc-tw-local.log;\n # error_log    /var/log/nginx/app1-ccc-tw-local-error.log;\n\n # location / {\n #  try_files $uri $uri/ =404;\n # }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br")])]),n("p",[s._v("/home/alanjui/workspace/apps/django-v4/mysite_uwsgi.ini")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[uwsgi]\n\n# Django-related settings\n# the base directory\nchdir               = /home/alanjui/workspace/apps/django-v4\n# Django's wsgi file\nmodule              = mysite.wsgi\n# the virtualenv\nhome                = /home/alanjui/.pyenv/versions/3.10.0/envs/django-4.0/\n\n# process-related settings\n# master\nmaster              = true\n# maximum number of worker processes\nprocesses           = 10\n# the socket\nsocket              = /home/alanjui/workspace/apps/django-v4/mysite.sock\n# ... with appropriate permissions\nchmod-socket        = 666\n# clear environment on exit\nvacuum              = true\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[s._v("/etc/systemd/system/app1.service")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[Unit]\nDescription=uWSGI instance to serve app1.ccc.tw.local\n\n[Service]\nExecStartPre=-/usr/bin/bash -c 'mkdir -p /run/uwsgi; chown www-data:www-data /run/uwsgi'\nExecStart=/usr/bin/bash -c 'cd /home/alanjui/workspace/apps/django-v4; \\\n/home/alanjui/.pyenv/bin/pyenv activate django-v4; \\\n/home/alanjui/.pyenv/versions/django-4.0/bin/uwsgi --ini mysite_uwsgi.ini'\n\n[Install]\nWantedBy=multi-user.target\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);