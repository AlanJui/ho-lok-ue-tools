(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{245:function(n,r,t){n.exports=t.p+"assets/img/client-nginx-uwsgi-django.f0854045.png"},597:function(n,r,t){"use strict";t.r(r);var e=t(10),i=Object(e.a)({},(function(){var n=this,r=n._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[r("h1",{attrs:{id:"系統維運作業指引"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#系統維運作業指引"}},[n._v("#")]),n._v(" 系統維運作業指引")]),n._v(" "),r("h2",{attrs:{id:"文件摘要"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#文件摘要"}},[n._v("#")]),n._v(" 文件摘要")]),n._v(" "),r("p",[n._v("本操作手冊旨在指導電腦機房操作員，如何在實體電腦（伺服器）上\n安裝及維護一個基於 Django 平台的應用系統。")]),n._v(" "),r("p",[n._v("文件主要架構：")]),n._v(" "),r("ul",[r("li",[r("p",[n._v("文件摘要：說明應用系統的用途與主要功能；")])]),n._v(" "),r("li",[r("p",[n._v("執行環境：說明應用系統使用的「技術」，如 ：軟體以何種電腦\n語言開發、軟體須於何種「平台（Framework）」執行；")])]),n._v(" "),r("li",[r("p",[n._v("建置作業：指引機房管理員，拿到第一版的應用系統時，如何執行\n首次的「建置作業」，完成應用系統應用有的安裝及設定工作；")])]),n._v(" "),r("li",[r("p",[n._v("更新作業：指引機房管理員，當應用系統遇有更新時（可能時機：\n新增功能、修正軟體錯誤），如何執行新版軟體的更新作業。")])])]),n._v(" "),r("h2",{attrs:{id:"執行環境"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#執行環境"}},[n._v("#")]),n._v(" 執行環境")]),n._v(" "),r("h3",{attrs:{id:"伺服器服務架構"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#伺服器服務架構"}},[n._v("#")]),n._v(" 伺服器服務架構")]),n._v(" "),r("p",[n._v("本應用系統屬於「網路服務（Web Application）」類型，軟體使用\nPython 電腦語言開發，須於 Django 平台（Framework）之上執行。")]),n._v(" "),r("p",[n._v("基於：執行效能及安全性之考量，應用系統之執行環境，尚需搭配\nNginx HTTP Server 和 uWSGI Server 以提供穩定的網路服務。")]),n._v(" "),r("p",[r("img",{attrs:{src:t(245),alt:""}})]),n._v(" "),r("h3",{attrs:{id:"應用系統通訊作業流程"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#應用系統通訊作業流程"}},[n._v("#")]),n._v(" 應用系統通訊作業流程")]),n._v(" "),r("p",[n._v("基於上述之伺服器服務架構，以下透過使用者（亦稱：Web Client）\n的操作，其與應用系統間之互動程序，說明伺服器的各個服務，如何\n協同運作：")]),n._v(" "),r("ol",[r("li",[r("p",[n._v("Web Client 發送 HTTP Request；")])]),n._v(" "),r("li",[r("p",[n._v("HTTP 服務收到 HTTP Request 後，屬「靜態檔案」 (Static\nFiles) 之請求，負責提供相關檔案予 Web Client 下載；或是將\nHTTP Request 打包成：「檔案類型」 之 Unix Socket ，然後轉\n交 APP 服務 (uWSGI) 處理；")])]),n._v(" "),r("li",[r("p",[n._v("APP 服務自檔案讀取 Unix Socket 內容，並轉發予 Django 應用\n系統處理此發自 Web Client 端之 HTTP Request。")])])]),n._v(" "),r("mermaid"),n._v(" "),r("div",{staticClass:"mermaid"},[n._v("sequenceDiagram\n    participant User\n    participant Browser\n    participant System\n\n    User->>Browser: 輸入URI 網址："),r("br"),n._v("/article_pronunciation/input/\n    Browser->>System: 發送系統功能指令 (HTTP GET Request)\n    System->>Browser: 回傳表單網頁 (HTTP Response)\n    Browser->>User: 依據 HTTP Response 顯示網頁\n    User->>Browser: 在網頁中的表單輸入漢字並按提交鈕\n    Browser->>System: 發送 HTTP POST Request（表單中輸入的漢字）\n    System->>System: 處理輸入的漢字，將之標註讀音\n    Note over System: 為文章中的每個漢字標註福建話音標。\n    System->>Browser: 重導 URI 網址："),r("br"),n._v("/article_pronunciation/pronunciation/\n    Browser->>User: 顯示標註讀音的漢字\n    Note over User,Browser: 文章中的每個漢字都標註有它的讀音。")]),r("h3",{attrs:{id:"運行作業環境規格"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#運行作業環境規格"}},[n._v("#")]),n._v(" 運行作業環境規格")]),n._v(" "),r("p",[n._v("以下是應用系統運行所需的技術和環境要求：")]),n._v(" "),r("ul",[r("li",[n._v("開發語言：Python")]),n._v(" "),r("li",[n._v("平台（Framework）：Django")]),n._v(" "),r("li",[n._v("HTTP Server：Nginx")]),n._v(" "),r("li",[n._v("WSGI Server：Gunicorn")])]),n._v(" "),r("p",[n._v("對於 Python 在應用及管理的要求如下：")]),n._v(" "),r("ul",[r("li",[n._v("直譯器版本：3.10.6")]),n._v(" "),r("li",[n._v("直譯器版本管理工具：pyenv")]),n._v(" "),r("li",[n._v("套件（Package）管理工具：Poetry")]),n._v(" "),r("li",[n._v("虛擬環境（VirtualEnv）管理工具：Python 內建的 venv 套件")]),n._v(" "),r("li",[n._v("虛擬環境使用之目錄：位於 Django 專案根目錄下，目錄名為\n.venv。")])]),n._v(" "),r("p",[n._v("應用系統之安裝、更新，務必檢查，確認工作之執行，遵循以上要求\n完成。在伺服器執行建置、更新作業時，務必遵循本指引相關作業章\n節，依照作業程序逐步執行，以確保應用系統能正確運行。")]),n._v(" "),r("h2",{attrs:{id:"建置作業"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#建置作業"}},[n._v("#")]),n._v(" "),r("RouterLink",{attrs:{to:"/d500_OP/Build_Server.html"}},[n._v("建置作業")])],1),n._v(" "),r("ol",[r("li",[r("p",[n._v("確保已安裝 Python 和 Django：應用系統需運行在 Python 環境\n下，請確保已在伺服器上安裝 Python (版本 3.6 或以上) 以及\n相應的 Django (版本 2.2 或以上)。若尚未安裝，請依照\nPython 官方網站和 Django 官方網站的說明進行安裝。")])]),n._v(" "),r("li",[r("p",[n._v("取得應用系統原始碼：從版本控制系統（如 Git）中取得應用系\n統的原始碼，並將其放置在伺服器上的適當目錄中。")])]),n._v(" "),r("li",[r("p",[n._v("設定環境變數：根據應用系統的需求，設定相應的環境變數，如\n資料庫連接資訊、應用系統的執行模式等。")])]),n._v(" "),r("li",[r("p",[n._v("安裝相依套件：在伺服器上執行 pip install -r\nrequirements.txt 命令，以安裝應用系統所需的相依套件。")])]),n._v(" "),r("li",[r("p",[n._v("初始化資料庫：執行 python manage.py migrate 命令，以初始\n化資料庫並建立相應的資料表結構。")])]),n._v(" "),r("li",[r("p",[n._v("啟動應用系統：執行 python manage.py runserver 命令，啟動\n應用系統。若需將應用系統綁定至特定 IP 和埠號，可在命令後\n加上相應參數，如 python manage.py runserver\n192.168.1.100:8000。")])]),n._v(" "),r("li",[r("p",[n._v("安裝並設定 Nginx：應用系統使用 Nginx 作為 HTTP 伺服器，以\n強化靜態檔案處理能力，並提供使用者更快速的下載體驗。請依\n照 Nginx 官方網站的說明進行安裝。安裝完成後，請修改 Nginx\n的設定檔，將靜態檔案路徑設定為應用系統的靜態檔案目錄，並\n將 HTTP 請求代理至 Gunicorn 伺服器。")])]),n._v(" "),r("li",[r("p",[n._v("安裝並設定 Gunicorn：應用系統使用 Gunicorn 作為 WSGI HTTP\n伺服器，用以將 Nginx 收到的 HTTP 請求轉交給 Django 應用系\n統進行後續處理。請執行 pip install gunicorn 命令以安裝\nGunicorn，然後編寫一個 Gunicorn 設定檔，指定應用系統的\nWSGI 模組及運行參數。")])]),n._v(" "),r("li",[r("p",[n._v("啟動 Nginx 和 Gunicorn：分別使用適當的命令啟動 Nginx 和\nGunicorn。例如，對於 Gunicorn，您可以使用類似於以下的命令\n：gunicorn -c gunicorn.conf.py\nyour_project.wsgi:application。對於 Nginx，您可以使用類似\n於 sudo service nginx start 的命令啟動。")])])]),n._v(" "),r("h2",{attrs:{id:"更新作業"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#更新作業"}},[n._v("#")]),n._v(" 更新作業")]),n._v(" "),r("ol",[r("li",[r("p",[n._v("停止應用系統：在伺服器上執行 Ctrl + C 命令，停止正在運行\n的應用系統。")])]),n._v(" "),r("li",[r("p",[n._v("獲取更新後的原始碼：從版本控制系統（如 Git）中獲取更新後\n的應用系統原始碼，並覆蓋伺服器上的")])]),n._v(" "),r("li",[r("p",[n._v("更新相依套件：如有必要，請執行 pip install -r\nrequirements.txt 命令，以更新應用系統所需的相依套件。")])]),n._v(" "),r("li",[r("p",[n._v("更新資料庫結構：如有資料庫結構變動，請執行 python\nmanage.py migrate 命令，以更新資料庫結構。")])]),n._v(" "),r("li",[r("p",[n._v("重新啟動應用系統：分別重啟 Nginx 和 Gunicorn 伺服器，使更\n新後的應用系統生效。例如，對於 Gunicorn，您可以使用類似於\n以下的命令：gunicorn -c gunicorn.conf.py\nyour_project.wsgi:application。對於 Nginx，您可以使用類似\n於 sudo service nginx restart 的命令重啟。")])])])],1)}),[],!1,null,null,null);r.default=i.exports}}]);