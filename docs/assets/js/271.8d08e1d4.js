(window.webpackJsonp=window.webpackJsonp||[]).push([[271],{560:function(s,a,t){"use strict";t.r(a);var e=t(10),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"以-nginx-建置-vuepress-文件伺服器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#以-nginx-建置-vuepress-文件伺服器"}},[s._v("#")]),s._v(" 以 Nginx 建置 VuePress 文件伺服器")]),s._v(" "),a("h2",{attrs:{id:"摘要"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#摘要"}},[s._v("#")]),s._v(" 摘要")]),s._v(" "),a("p",[s._v("使用 VuePress 所建置之「文檔瀏覽系統」，其作業平台之底層\n需要使用 HTTP 伺服器，以便用戶端可透過 Web 瀏覽器，使用\nVuePress 文件伺服器。")]),s._v(" "),a("p",[s._v("本指引文件將說明，如何透過 Nginx 及其所具備的「虛擬網站」\n功能，用以建置 VuePress 文件伺服器。")]),s._v(" "),a("h2",{attrs:{id:"前置作業"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前置作業"}},[s._v("#")]),s._v(" 前置作業")]),s._v(" "),a("ul",[a("li",[s._v("完成 Node.js 及 yarn 安裝作業；")]),s._v(" "),a("li",[s._v("依據"),a("RouterLink",{attrs:{to:"/_my_dev_env/srv-2020/nginx-guildeline-s01.html"}},[s._v("以 Nginx 建置 HTTP 伺服器作業指引")]),s._v("，\n完成 Nginx 的安裝及設定。")],1)]),s._v(" "),a("h2",{attrs:{id:"自-vuepress-組建靜態網頁"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自-vuepress-組建靜態網頁"}},[s._v("#")]),s._v(" 自 VuePress 組建靜態網頁")]),s._v(" "),a("h3",{attrs:{id:"_1-自-github-下載-vuepress-原始碼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-自-github-下載-vuepress-原始碼"}},[s._v("#")]),s._v(" (1) 自 GitHub 下載 VuePress 原始碼")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd ~/workspace/docs\ngit clone git@github.com:AlanJui/alanjui.github.io.git\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_2-自-vuepress-組建-html-網頁檔"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-自-vuepress-組建-html-網頁檔"}},[s._v("#")]),s._v(" (2) 自 VuePress 組建 HTML 網頁檔")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd alanjui.github.io\nyarn install\nyarn build\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"_3-建置虛擬網站使用目錄"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-建置虛擬網站使用目錄"}},[s._v("#")]),s._v(" (3) 建置虛擬網站使用目錄")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo ln -nfs /home/alanjui/workspace/docs/alanjui.github.io/docs/.vuepress/dist\n/var/www/blog.ccc.tw.local\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"建置-vuepress-專用之虛擬網站"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#建置-vuepress-專用之虛擬網站"}},[s._v("#")]),s._v(" 建置 VuePress 專用之虛擬網站")]),s._v(" "),a("h3",{attrs:{id:"_1-建立-host-名稱"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-建立-host-名稱"}},[s._v("#")]),s._v(" (1) 建立 Host 名稱")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudoedit /etc/hosts\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("/etc/hosts:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("192.168.66.10   blog.ccc.tw.local\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-建立-nginx-虛擬網站設定檔"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-建立-nginx-虛擬網站設定檔"}},[s._v("#")]),s._v(" (2) 建立 nginx 虛擬網站設定檔")]),s._v(" "),a("ol",[a("li",[s._v("編輯 nginx 虛擬網站設定檔。")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/nginx/site-available\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" default blog.ccc.tw.local\nsudoedit blog.ccc.tw.local\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("/etc/nginx/sites-available/blog.ccc.tw.local:")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    listen "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    server_name blog.ccc.tw.local"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    root /var/www/blog.ccc.tw.local"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    index index.html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        access_log  /var/log/nginx/blog_ccc_tw_local_access.log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        error_log   /var/log/nginx/blog_ccc_tw_local_error.log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    location / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        try_files "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$uri")]),s._v("/ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("404")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("檢測設定檔，確認內容無誤。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo nginx -t\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_3-啟用-nginx-虛擬網站"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-啟用-nginx-虛擬網站"}},[s._v("#")]),s._v(" (3) 啟用 nginx 虛擬網站")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo ln -fns /etc/nginx/sites-available/blog.ccc.tw.local\n/etc/nginx/sites-enable\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_4-重啟-nginx-服務"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-重啟-nginx-服務"}},[s._v("#")]),s._v(" (4) 重啟 nginx 服務")]),s._v(" "),a("ol",[a("li",[s._v("重新啟動 nginx 服務，令新建置之「虛擬網站」開始運作。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo systemctl restart nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("檢視重啟後，nginx 已能正常作業。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo systemctl status nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_5-檢視網頁內容-驗證-vuepress-伺服器已能正常運作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-檢視網頁內容-驗證-vuepress-伺服器已能正常運作"}},[s._v("#")]),s._v(" (5) 檢視網頁內容，驗證 VuePress 伺服器已能正常運作")]),s._v(" "),a("p",[s._v("在 Web 瀏覽器，輸入以下網址。然後檢視網頁內容，借此方式\n用以驗證 VuePress 伺服器已能正常運作：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("http://blog.ccc.tw.local/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);