(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{415:function(e,n,a){"use strict";a.r(n);var t=a(10),s=Object(t.a)({},(function(){var e=this,n=e._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"執行-apt-get-update-卻發生空間不足問題"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#執行-apt-get-update-卻發生空間不足問題"}},[e._v("#")]),e._v(" # 執行 apt-get update ，卻發生空間不足問題")]),e._v(" "),n("p",[e._v("執行 apt-get update ，因系統發出「空間不足」的錯誤訊息，以致無法執行。")]),e._v(" "),n("h1",{attrs:{id:"問題描述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#問題描述"}},[e._v("#")]),e._v(" 問題描述")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v("$ sudo apt-get update\n")])])]),n("p",[e._v("執行上述 apt-get 指令，欲進行更新，卻出現空間不足的錯誤訊息。")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://d2mxuefqeaa7sj.cloudfront.net/s_E1625B603B3A300EF65D6F3991F85293934011F227CCD5322C8669175E368CCC_1474937411145_2016-09-27+08-30-13+.png",alt:""}})]),e._v(" "),n("h2",{attrs:{id:"解決方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解決方法"}},[e._v("#")]),e._v(" 解決方法")]),e._v(" "),n("ol",[n("li",[n("p",[e._v("使用「文字編輯器」，將路徑處之檔案內容清空： /var/lib/dpkg/status")])]),e._v(" "),n("li",[n("p",[e._v("再次執行指令。")]),e._v(" "),n("p",[e._v("$ sudo apt-get update")])])]),e._v(" "),n("hr"),e._v(" "),n("p",[n("img",{attrs:{src:"https://d2mxuefqeaa7sj.cloudfront.net/s_E1625B603B3A300EF65D6F3991F85293934011F227CCD5322C8669175E368CCC_1474937499235_file.png",alt:""}})]),e._v(" "),n("hr"),e._v(" "),n("h1",{attrs:{id:"var-cache-apt-archives-沒有足夠的的未使用空間"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#var-cache-apt-archives-沒有足夠的的未使用空間"}},[e._v("#")]),e._v(" /var/cache/apt/archives/ 沒有足夠的的未使用空間")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://d2mxuefqeaa7sj.cloudfront.net/s_E1625B603B3A300EF65D6F3991F85293934011F227CCD5322C8669175E368CCC_1474942284265_file.png",alt:""}})]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("急救 /var")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v('$ sudo umount /dev/sda6\n\n$ sudo e2fsck -f /dev/sda6\n\n$ sudo resize2fs /dev/sda6 10G\n\n\n\n\nalanjui at srv-01 in [~]   \n22:52:57 $ sudo dd if=/dev/zero of=/srv/loopdev bs=1M count=4096\n[sudo] password for alanjui: \n輸入 4096+0 個紀錄\n輸出 4096+0 個紀錄\n4294967296 bytes (4.3 GB, 4.0 GiB) copied, 13.9595 s, 308 MB/s\n\nalanjui at srv-01 in [~]   \n22:53:25 $ ll /srv\n總計 4.1G\n-rw-r--r-- 1 root root 4.0G  9月 27 22:53 loopdev\n\nalanjui at srv-01 in [~]   \n22:53:33 $ ll -h /srv/loopdev\n-rw-r--r-- 1 root root 4.0G  9月 27 22:53 /srv/loopdev\n\nalanjui at srv-01 in [~]   \n22:57:11 $ sudo mkfs -t ext4 /srv/loopdev \nmke2fs 1.43.1 (08-Jun-2016)\nDiscarding device blocks: done                            \nCreating filesystem with 1048576 4k blocks and 262144 inodes\nFilesystem UUID: 8e40f1f5-8695-4a35-ae1b-7ad5cdda9fef\nSuperblock backups stored on blocks: \n        32768, 98304, 163840, 229376, 294912, 819200, 884736\n\nAllocating group tables: done                            \nWriting inode tables: done                            \nCreating journal (32768 blocks): done\nWriting superblocks and filesystem accounting information: done \n\n\nalanjui at srv-01 in [~]   \n23:00:02 $ sudo mkfs.ext4 /srv/loopdev \nmke2fs 1.43.1 (08-Jun-2016)\n/srv/loopdev contains a ext4 file system\n        created on Tue Sep 27 23:00:02 2016\nProceed anyway? (y,n) y\nDiscarding device blocks: done                            \nCreating filesystem with 1048576 4k blocks and 262144 inodes\nFilesystem UUID: 429682c9-9334-49a9-9726-c3447ca28614\nSuperblock backups stored on blocks: \n        32768, 98304, 163840, 229376, 294912, 819200, 884736\n\nAllocating group tables: done                            \nWriting inode tables: done                            \nCreating journal (32768 blocks): done\nWriting superblocks and filesystem accounting information: done \n\n\nalanjui at srv-01 in [~]   \n23:01:38 $ blkid /srv/loopdev \n/srv/loopdev: UUID="429682c9-9334-49a9-9726-c3447ca28614" TYPE="ext4"\n\nalanjui at srv-01 in [~]   \n23:03:00 $ \n')])])]),n("h1",{attrs:{id:"parted"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#parted"}},[e._v("#")]),e._v(" Parted")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v("alanjui at srv-01 in [~]   \n10:46:53 $ sudo parted /dev/sda print\n型號：ATA Hitachi HDS72105 (scsi)\n磁碟 /dev/sda：500GB\n磁區大小 (邏輯/物理)：512B/512B\n分割區：msdos\n磁碟旗標：\n\n編號  起始點  結束點  大小    類型      檔案系統        旗標\n 1    1049kB  32.8GB  32.8GB  primary   linux-swap(v1)\n 2    32.8GB  52.8GB  20.0GB  primary   ext4\n 3    52.8GB  53.2GB  400MB   primary   ext4            啟動\n 4    53.2GB  500GB   447GB   extended\n 5    53.2GB  58.2GB  4999MB  logical   ext4\n 6    58.2GB  63.2GB  4999MB  logical   ext4\n 7    63.2GB  500GB   437GB   logical   ext4\n\n\n\n\nalanjui at srv-01 in [~]   \n10:50:55 $ sudo parted /dev/sda7 print\n型號：未知 (unknown)\n磁碟 /dev/sda7：437GB\n磁區大小 (邏輯/物理)：512B/512B\n分割區：loop\n磁碟旗標：\n\n編號  起始點  結束點  大小   檔案系統  旗標\n 1    0.00B   437GB   437GB  ext4\n")])])]),n("p",[e._v("複製 /var ==> /mnt/myVar")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v("alanjui at srv-01 in [/mnt/myVar]   \n11:27:24 $ sudo cp -R /var/* /mnt/myVar\n\nalanjui at srv-01 in [/mnt/myVar]   \n11:30:52 $ ll\n總計 64K\ndrwxr-xr-x  2 root root 4.0K  9月 28 11:27 backups\ndrwxr-xr-x 11 root root 4.0K  9月 28 11:27 cache\ndrwxr-xr-t  2 root root 4.0K  9月 28 11:27 crash\ndrwxr-xr-x 78 root root 4.0K  9月 28 11:30 lib\ndrwxr-xr-x  2 root root 4.0K  9月 28 11:30 local\nlrwxrwxrwx  1 root root    9  9月 28 11:30 lock -> /run/lock\ndrwxr-xr-x 14 root root 4.0K  9月 28 11:30 log\ndrwx------  2 root root  16K  9月 27 23:46 lost+found\ndrwxr-xr-x  2 root root 4.0K  9月 28 11:30 mail\ndrwxr-xr-t  2 root root 4.0K  9月 28 11:30 metrics\ndrwxr-xr-x  2 root root 4.0K  9月 28 11:30 opt\nlrwxrwxrwx  1 root root    4  9月 28 11:30 run -> /run\ndrwxr-xr-x  4 root root 4.0K  9月 28 11:30 snap\ndrwxr-xr-x  4 root root 4.0K  9月 28 11:30 spool\ndrwxr-xr-t  8 root root 4.0K  9月 28 11:30 tmp\n")])])]),n("p",[e._v("將 /var 䘖載 (/dev/sda6)")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v('alanjui at srv-01 in [/mnt/myVar]   \n11:38:34 $ sudo blkid\n/dev/loop0: TYPE="squashfs"\n/dev/loop1: TYPE="squashfs"\n/dev/loop2: TYPE="squashfs"\n/dev/loop3: TYPE="squashfs"\n/dev/sda1: UUID="c9e4dd97-a0ef-45ad-b41d-b2e01e3aeb59" TYPE="swap" PARTUUID="7b5d65b9-01"\n/dev/sda2: UUID="f778e737-e06c-4e6f-a3e9-ae70e9116684" TYPE="ext4" PARTUUID="7b5d65b9-02"\n/dev/sda3: UUID="5424d353-e27e-4f82-a23a-0ce928241f41" TYPE="ext4" PARTUUID="7b5d65b9-03"\n/dev/sda5: UUID="5e7bb7f0-0700-43e3-b14c-3096f53ed85b" TYPE="ext4" PARTUUID="7b5d65b9-05"\n/dev/sda6: UUID="c4b25dd8-4e05-4afc-bfa8-4cb0b244768d" TYPE="ext4" PARTUUID="7b5d65b9-06"\n/dev/sda7: UUID="a432ba96-eb78-4b20-b65d-1f03d3be61ef" TYPE="ext4" PARTUUID="7b5d65b9-07"\n/dev/sdb1: LABEL="NAS" UUID="9279ede9-49f6-44fe-b481-261500f67675" TYPE="ext4" PARTUUID="3c9b9d09-01"\n/dev/loop4: UUID="bc6914c0-a7e7-468c-9c44-07abc4982637" TYPE="ext4"\n\nalanjui at srv-01 in [/mnt/myVar]   \n11:38:51 $ sudo umount /dev/sda6\n')])])]),n("p",[e._v("修改 /etc/fstab")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v("# /var was on /dev/sda6 during installation\n# UUID=c4b25dd8-4e05-4afc-bfa8-4cb0b244768d        /var                ext4        defaults                0        2\nUUID=bc6914c0-a7e7-468c-9c44-07abc4982637         /var                ext4        defaults                  0          2\n")])])]),n("h1",{attrs:{id:"mount"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mount"}},[e._v("#")]),e._v(" Mount")]),e._v(" "),n("p",[e._v("sudo mount UUID=bc6914c0-a7e7-468c-9c44-07abc4982637 /var")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v("alanjui at srv-01 in [/mnt/myVar]   \n11:39:55 $ mount --help\n\nUsage:\n mount [-lhV]\n mount -a [options]\n mount \\[options\\] [--source] <source> | [--target] <directory>\n mount [options] <source> <directory>\n mount <operation> <mountpoint> [<target>]\n\nMount a filesystem.\n\n選項：\n -a, --all               mount all filesystems mentioned in fstab\n -c, --no-canonicalize   don't canonicalize paths\n -f, --fake              dry run; skip the mount(2) syscall\n -F, --fork              fork off for each device (use with -a)\n -T, --fstab <path>      alternative file to /etc/fstab\n -i, --internal-only     don't call the mount.<type> helpers\n -l, --show-labels       show also filesystem labels\n -n, --no-mtab           don't write to /etc/mtab\n -o, --options <list>    comma-separated list of mount options\n -O, --test-opts <list>  limit the set of filesystems (use with -a)\n -r, --read-only         mount the filesystem read-only (same as -o ro)\n -t, --types <list>      limit the set of filesystem types\n     --source <src>      explicitly specifies source (path, label, uuid)\n     --target <target>   explicitly specifies mountpoint\n -v, --verbose           say what is being done\n -w, --rw, --read-write  mount the filesystem read-write (default)\n\n -h, --help     display this help and exit\n -V, --version  output version information and exit\n\nSource:\n -L, --label <label>     synonym for LABEL=<label>\n -U, --uuid <uuid>       synonym for UUID=<uuid>\n LABEL=<label>           specifies device by filesystem label\n UUID=<uuid>             specifies device by filesystem UUID\n PARTLABEL=<label>       specifies device by partition label\n PARTUUID=<uuid>         specifies device by partition UUID\n <device>                specifies device by path\n <directory>             mountpoint for bind mounts (see --bind/rbind)\n <file>                  regular file for loopdev setup\n\nOperations:\n -B, --bind              mount a subtree somewhere else (same as -o bind)\n -M, --move              move a subtree to some other place\n -R, --rbind             mount a subtree and all submounts somewhere else\n --make-shared           mark a subtree as shared\n --make-slave            mark a subtree as slave\n --make-private          mark a subtree as private\n --make-unbindable       mark a subtree as unbindable\n --make-rshared          recursively mark a whole subtree as shared\n --make-rslave           recursively mark a whole subtree as slave\n --make-rprivate         recursively mark a whole subtree as private\n --make-runbindable      recursively mark a whole subtree as unbindable\n\nFor more details see mount(8).\n")])])])])}),[],!1,null,null,null);n.default=s.exports}}]);